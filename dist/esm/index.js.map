{"version":3,"sources":["../../src/components/pages/error/index.tsx","../../src/hooks/auth/usePermissions/index.ts","../../src/contexts/auth/index.tsx","../../src/hooks/auth/useGetIdentity/index.ts","../../src/hooks/auth/useLogout/index.ts","../../src/hooks/auth/useLogin/index.ts","../../src/hooks/auth/useAuthenticated/index.ts","../../src/hooks/auth/useCheckError/index.ts","../../src/hooks/auth/useIsExistAuthentication.ts","../../src/hooks/data/useList.ts","../../src/definitions/helpers/userFriendlySeconds/index.ts","../../src/definitions/helpers/importCSVMapper/index.ts","../../src/definitions/helpers/userFriendlyResourceName/index.ts","../../src/definitions/helpers/handleUseParams/index.tsx","../../src/definitions/helpers/queryKeys/index.ts","../../src/definitions/helpers/hasPermission/index.ts","../../src/definitions/helpers/routeGenerator/index.ts","../../src/definitions/helpers/treeView/createTreeView/index.ts","../../src/hooks/data/useOne.ts","../../src/definitions/table/index.ts","../../src/definitions/upload/file2Base64/index.ts","../../src/hooks/data/useMany.ts","../../src/hooks/data/useUpdate.ts","../../src/contexts/undoableQueue/undoableQueueContext.tsx","../../src/hooks/data/useCreate.ts","../../src/hooks/data/useDelete.ts","../../src/hooks/data/useCreateMany.ts","../../src/hooks/data/useUpdateMany.ts","../../src/hooks/data/useDeleteMany.ts","../../src/hooks/data/useApiUrl.ts","../../src/hooks/data/useCustom.ts","../../src/hooks/data/useCustomMutation.ts","../../src/hooks/data/useDataProvider.tsx","../../src/contexts/data/index.tsx","../../src/hooks/live/useResourceSubscription/index.ts","../../src/contexts/live/index.tsx","../../src/contexts/refine/index.tsx","../../src/components/layoutWrapper/defaultLayout/index.tsx","../../src/hooks/live/useLiveMode/index.ts","../../src/hooks/live/useSubscription/index.ts","../../src/hooks/live/usePublish/index.ts","../../src/hooks/resource/useResource/index.ts","../../src/contexts/resource/index.tsx","../../src/hooks/resource/useResourceWithRoute/index.ts","../../src/hooks/notification/useCancelNotification/index.tsx","../../src/hooks/notification/useNotification/index.ts","../../src/contexts/notification/index.tsx","../../src/hooks/notification/useHandleNotification/index.ts","../../src/hooks/translate/useSetLocale.ts","../../src/contexts/translation/index.tsx","../../src/hooks/translate/useTranslate.ts","../../src/hooks/translate/useGetLocale.ts","../../src/hooks/refine/useMutationMode.ts","../../src/hooks/refine/useWarnAboutChange/index.ts","../../src/contexts/unsavedWarn/index.tsx","../../src/hooks/refine/useSyncWithLocation.ts","../../src/hooks/refine/useTitle.tsx","../../src/hooks/refine/useRefineContex.ts","../../src/hooks/export/index.ts","../../src/hooks/form/useForm.ts","../../src/hooks/redirection/index.ts","../../src/hooks/navigation/index.ts","../../src/hooks/show/useShow.ts","../../src/hooks/import/index.tsx","../../src/hooks/modal/useModal/index.tsx","../../src/hooks/router/useRouterContext.ts","../../src/contexts/router/index.tsx","../../src/hooks/accessControl/useCan/index.ts","../../src/contexts/accessControl/index.tsx","../../src/hooks/accessControl/useCanWithoutCache.ts","../../src/hooks/useSelect/index.ts","../../src/hooks/useTable/index.ts","../../src/hooks/auditLog/useLog/index.ts","../../src/contexts/auditLog/index.tsx","../../src/hooks/auditLog/useLogList/index.ts","../../src/hooks/invalidate/index.tsx","../../src/hooks/breadcrumb/index.ts","../../src/hooks/menu/useMenu.tsx","../../src/components/pages/login/index.tsx","../../src/components/pages/ready/index.tsx","../../src/components/containers/refine/index.tsx","../../src/components/telemetry/index.tsx","../../src/hooks/useTelemetryData/index.ts","../../src/components/undoableQueue/index.tsx","../../src/components/layoutWrapper/index.tsx","../../src/components/authenticated/index.tsx","../../src/components/routeChangeHandler/index.tsx","../../src/components/canAccess/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport {\r\n    useNavigation,\r\n    useTranslate,\r\n    useResourceWithRoute,\r\n    useRouterContext,\r\n} from \"@hooks\";\r\nimport { ResourceErrorRouterParams } from \"../../../interfaces\";\r\n\r\n/**\r\n * When the app is navigated to a non-existent route, refine shows a default error page.\r\n * A custom error component can be used for this error page.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/components/refine-config#catchall} for more details.\r\n */\r\nexport const ErrorComponent: React.FC = () => {\r\n    const [errorMessage, setErrorMessage] = useState<string>();\r\n    const { push } = useNavigation();\r\n    const translate = useTranslate();\r\n    const actionTypes = [\"edit\", \"create\", \"show\"];\r\n\r\n    const { useParams } = useRouterContext();\r\n\r\n    const params = useParams<ResourceErrorRouterParams>();\r\n    const resource = useResourceWithRoute();\r\n\r\n    useEffect(() => {\r\n        if (params.resource) {\r\n            const resourceFromRoute = resource(params.resource);\r\n            if (\r\n                params.action &&\r\n                actionTypes.includes(params.action) &&\r\n                !resourceFromRoute[params.action]\r\n            ) {\r\n                setErrorMessage(\r\n                    translate(\r\n                        \"pages.error.info\",\r\n                        {\r\n                            action: params.action,\r\n                            resource: params.resource,\r\n                        },\r\n                        `You may have forgotten to add the \"${params.action}\" component to \"${params.resource}\" resource.`,\r\n                    ),\r\n                );\r\n            }\r\n        }\r\n    }, [params]);\r\n\r\n    return (\r\n        <>\r\n            <h1>\r\n                {translate(\r\n                    \"pages.error.404\",\r\n                    undefined,\r\n                    \"Sorry, the page you visited does not exist.\",\r\n                )}\r\n            </h1>\r\n            {errorMessage && <p>{errorMessage}</p>}\r\n            <button onClick={() => push(\"/\")}>\r\n                {translate(\"pages.error.backHome\", undefined, \"Back Home\")}\r\n            </button>\r\n        </>\r\n    );\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { AuthContext } from \"@contexts/auth\";\r\nimport { IAuthContext } from \"../../../interfaces\";\r\nimport { useQuery, UseQueryResult, UseQueryOptions } from \"react-query\";\r\n\r\n/**\r\n * `usePermissions` calls the `getPermissions` method from the {@link https://refine.dev/docs/core/providers/auth-provider `authProvider`} under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/auth/usePermissions} for more details.\r\n *\r\n * @typeParam TData - Result data of the query\r\n *\r\n */\r\nexport const usePermissions = <TData = any>(\r\n    options?: UseQueryOptions<TData>,\r\n): UseQueryResult<TData, unknown> => {\r\n    const { getPermissions } = useContext<IAuthContext>(AuthContext);\r\n\r\n    const queryResponse = useQuery<TData>(\r\n        [\"usePermissions\"],\r\n        // Enabled check for `getPermissions` is enough to be sure that it's defined in the query function but TS is not smart enough to know that.\r\n        getPermissions ?? (() => Promise.resolve(undefined)),\r\n        {\r\n            enabled: !!getPermissions,\r\n            ...options,\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\n\r\nimport { useNavigation } from \"@hooks\";\r\nimport { IAuthContext } from \"../../interfaces\";\r\n\r\nexport const AuthContext = React.createContext<IAuthContext>({});\r\n\r\nexport const AuthContextProvider: React.FC<\r\n    IAuthContext & {\r\n        children?: React.ReactNode;\r\n    }\r\n> = ({ children, isProvided, ...authOperations }) => {\r\n    const { replace } = useNavigation();\r\n    const queryClient = useQueryClient();\r\n\r\n    const invalidateAuthStore = () => {\r\n        queryClient.invalidateQueries([\"useAuthenticated\"]);\r\n        queryClient.invalidateQueries([\"getUserIdentity\"]);\r\n        queryClient.invalidateQueries([\"usePermissions\"]);\r\n    };\r\n\r\n    const loginFunc = async (params: any) => {\r\n        try {\r\n            const result = await authOperations.login?.(params);\r\n            return Promise.resolve(result);\r\n        } catch (error) {\r\n            return Promise.reject(error);\r\n        } finally {\r\n            invalidateAuthStore();\r\n        }\r\n    };\r\n\r\n    const logoutFunc = async (params: any) => {\r\n        try {\r\n            const redirectPath = await authOperations.logout?.(params);\r\n            return Promise.resolve(redirectPath);\r\n        } catch (error) {\r\n            return Promise.reject(error);\r\n        } finally {\r\n            invalidateAuthStore();\r\n        }\r\n    };\r\n\r\n    const checkAuthFunc = async (params: any) => {\r\n        try {\r\n            await authOperations.checkAuth?.(params);\r\n            return Promise.resolve();\r\n        } catch (error) {\r\n            if ((error as { redirectPath?: string })?.redirectPath) {\r\n                replace((error as { redirectPath: string }).redirectPath);\r\n            }\r\n            return Promise.reject(error);\r\n        } finally {\r\n            invalidateAuthStore();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                ...authOperations,\r\n                login: loginFunc,\r\n                logout: logoutFunc,\r\n                checkAuth: checkAuthFunc,\r\n                isProvided,\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { useQuery, UseQueryResult, UseQueryOptions } from \"react-query\";\r\n\r\nimport { AuthContext } from \"@contexts/auth\";\r\nimport { IAuthContext } from \"../../../interfaces\";\r\n\r\nexport type UseGetIdentityProps<TData> = {\r\n    queryOptions?: UseQueryOptions<TData>;\r\n};\r\n\r\n/**\r\n * `useGetIdentity` calls the `getUserIdentity` method from the {@link https://refine.dev/docs/core/providers/auth-provider `authProvider`} under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/auth/useGetIdentity} for more details.\r\n *\r\n * @typeParam TData - Result data of the query\r\n *\r\n */\r\nexport const useGetIdentity = <TData = any>({\r\n    queryOptions,\r\n}: UseGetIdentityProps<TData> = {}): UseQueryResult<TData, unknown> => {\r\n    const { getUserIdentity } = React.useContext<IAuthContext>(AuthContext);\r\n\r\n    const queryResponse = useQuery<TData>(\r\n        [\"getUserIdentity\"],\r\n        // Enabled check for `getUserIdentity` is enough to be sure that it's defined in the query function but TS is not smart enough to know that.\r\n        getUserIdentity ?? (() => Promise.resolve(undefined)),\r\n        {\r\n            enabled: !!getUserIdentity,\r\n            retry: false,\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","import React from \"react\";\r\nimport { useMutation, UseMutationResult } from \"react-query\";\r\n\r\nimport { AuthContext } from \"@contexts/auth\";\r\nimport { IAuthContext, TLogoutData } from \"../../../interfaces\";\r\nimport { useNavigation, useNotification } from \"@hooks\";\r\n\r\n/**\r\n * `useLogout` calls the `logout` method from the {@link https://refine.dev/docs/api-references/providers/auth-provider `authProvider`} under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/auth/useLogout} for more details.\r\n *\r\n */\r\nexport const useLogout = <TVariables = void>(): UseMutationResult<\r\n    TLogoutData,\r\n    Error,\r\n    TVariables,\r\n    unknown\r\n> => {\r\n    const { push } = useNavigation();\r\n    const { logout: logoutFromContext } =\r\n        React.useContext<IAuthContext>(AuthContext);\r\n    const { open } = useNotification();\r\n\r\n    const queryResponse = useMutation<TLogoutData, Error, TVariables, unknown>(\r\n        \"useLogout\",\r\n        logoutFromContext,\r\n        {\r\n            onSuccess: (redirectPathFromAuth) => {\r\n                if (redirectPathFromAuth !== false) {\r\n                    if (redirectPathFromAuth) {\r\n                        push(redirectPathFromAuth);\r\n                    } else {\r\n                        push(\"/login\");\r\n                    }\r\n                }\r\n            },\r\n            onError: (error: Error) => {\r\n                open?.({\r\n                    key: \"useLogout-error\",\r\n                    type: \"error\",\r\n                    message: error?.name || \"Logout Error\",\r\n                    description:\r\n                        error?.message || \"Something went wrong during logout\",\r\n                });\r\n            },\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","import React from \"react\";\r\nimport { useMutation, UseMutationResult } from \"react-query\";\r\nimport qs from \"qs\";\r\n\r\nimport { AuthContext } from \"@contexts/auth\";\r\n\r\nimport { IAuthContext, TLoginData } from \"../../../interfaces\";\r\nimport { useNavigation, useRouterContext, useNotification } from \"@hooks\";\r\n\r\n/**\r\n * `useLogin` calls `login` method from {@link https://refine.dev/docs/api-references/providers/auth-provider `authProvider`} under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/auth/useLogin} for more details.\r\n *\r\n * @typeParam TData - Result data of the query\r\n * @typeParam TVariables - Values for mutation function. default `{}`\r\n *\r\n */\r\nexport const useLogin = <TVariables = {}>(): UseMutationResult<\r\n    TLoginData,\r\n    Error,\r\n    TVariables,\r\n    unknown\r\n> => {\r\n    const { replace } = useNavigation();\r\n    const { login: loginFromContext } =\r\n        React.useContext<IAuthContext>(AuthContext);\r\n\r\n    const { useLocation } = useRouterContext();\r\n    const { search } = useLocation();\r\n    const { close, open } = useNotification();\r\n\r\n    const { to } = qs.parse(search?.substring(1));\r\n\r\n    const queryResponse = useMutation<TLoginData, Error, TVariables, unknown>(\r\n        \"useLogin\",\r\n        loginFromContext,\r\n        {\r\n            onSuccess: (redirectPathFromAuth) => {\r\n                if (to) {\r\n                    return replace(to as string);\r\n                }\r\n\r\n                if (redirectPathFromAuth !== false) {\r\n                    if (redirectPathFromAuth) {\r\n                        replace(redirectPathFromAuth);\r\n                    } else {\r\n                        replace(\"/\");\r\n                    }\r\n                }\r\n                close?.(\"login-error\");\r\n            },\r\n            onError: (error: any) => {\r\n                open?.({\r\n                    message: error?.name || \"Login Error\",\r\n                    description: error?.message || \"Invalid credentials\",\r\n                    key: \"login-error\",\r\n                    type: \"error\",\r\n                });\r\n            },\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","import { useContext } from \"react\";\r\nimport { useQuery, UseQueryResult } from \"react-query\";\r\n\r\nimport { AuthContext } from \"@contexts/auth\";\r\nimport { IAuthContext } from \"../../../interfaces\";\r\n\r\n/**\r\n *  `useAuthenticated` calls the `checkAuth` method from the {@link https://refine.dev/docs/core/providers/auth-provider `authProvider`} under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/auth/useAuthenticated} for more details.\r\n *\r\n */\r\nexport const useAuthenticated = (\r\n    params?: any,\r\n): UseQueryResult<any, unknown> => {\r\n    const { checkAuth } = useContext<IAuthContext>(AuthContext);\r\n\r\n    const queryResponse = useQuery(\r\n        [\"useAuthenticated\", params],\r\n        async () => {\r\n            await checkAuth?.(params);\r\n        },\r\n        {\r\n            retry: false,\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","import React from \"react\";\r\nimport { useMutation, UseMutationResult } from \"react-query\";\r\n\r\nimport { AuthContext } from \"@contexts/auth\";\r\nimport { IAuthContext } from \"../../../interfaces\";\r\nimport { useLogout } from \"@hooks\";\r\n\r\n/**\r\n * `useCheckError` calls the `checkError` method from the {@link https://refine.dev/docs/core/providers/auth-provider `authProvider`} under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/auth/useCheckError} for more details.\r\n *\r\n */\r\nexport const useCheckError = (): UseMutationResult<\r\n    void,\r\n    string | undefined,\r\n    any,\r\n    unknown\r\n> => {\r\n    const { checkError: checkErrorFromContext } =\r\n        React.useContext<IAuthContext>(AuthContext);\r\n\r\n    const { mutate: logout } = useLogout<{ redirectPath?: string }>();\r\n\r\n    const queryResponse = useMutation(\"useCheckError\", checkErrorFromContext, {\r\n        onError: (redirectPath?: string) => {\r\n            logout({ redirectPath });\r\n        },\r\n    });\r\n\r\n    return queryResponse;\r\n};\r\n","import { useContext } from \"react\";\r\nimport { AuthContext } from \"@contexts/auth\";\r\nimport { IAuthContext } from \"../../interfaces\";\r\n\r\n/**\r\n * A hook that the UI uses\r\n * @internal\r\n */\r\nexport const useIsExistAuthentication = (): boolean => {\r\n    const { isProvided } = useContext<IAuthContext>(AuthContext);\r\n\r\n    return isProvided || false;\r\n};\r\n","import { QueryObserverResult, useQuery, UseQueryOptions } from \"react-query\";\r\nimport {\r\n    GetListResponse,\r\n    CrudFilters,\r\n    Pagination,\r\n    BaseRecord,\r\n    HttpError,\r\n    CrudSorting,\r\n    MetaDataQuery,\r\n    SuccessErrorNotification,\r\n    LiveModeProps,\r\n} from \"../../interfaces\";\r\nimport {\r\n    useCheckError,\r\n    useHandleNotification,\r\n    useResourceSubscription,\r\n    useTranslate,\r\n    useDataProvider,\r\n} from \"@hooks\";\r\nimport { queryKeys } from \"@definitions/helpers\";\r\n\r\nexport interface UseListConfig {\r\n    pagination?: Pagination;\r\n    hasPagination?: boolean;\r\n    sort?: CrudSorting;\r\n    filters?: CrudFilters;\r\n}\r\n\r\nexport type UseListProps<TData, TError> = {\r\n    resource: string;\r\n    config?: UseListConfig;\r\n    queryOptions?: UseQueryOptions<GetListResponse<TData>, TError>;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n} & SuccessErrorNotification &\r\n    LiveModeProps;\r\n\r\n/**\r\n * `useList` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/guides/queries `useQuery`} used for retrieving items from a `resource` with pagination, sort, and filter configurations.\r\n *\r\n * It uses the `getList` method as the query function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/data/useList} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/core/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/core/interfaceReferences#httperror `HttpError`}\r\n *\r\n */\r\nexport const useList = <\r\n    TData = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n>({\r\n    resource,\r\n    config,\r\n    queryOptions,\r\n    successNotification,\r\n    errorNotification,\r\n    metaData,\r\n    liveMode,\r\n    onLiveEvent,\r\n    liveParams,\r\n    dataProviderName,\r\n}: UseListProps<TData, TError>): QueryObserverResult<\r\n    GetListResponse<TData>,\r\n    TError\r\n> => {\r\n    const dataProvider = useDataProvider();\r\n    const queryKey = queryKeys(resource, dataProviderName, metaData);\r\n    const { getList } = dataProvider(dataProviderName);\r\n\r\n    const translate = useTranslate();\r\n    const { mutate: checkError } = useCheckError();\r\n    const handleNotification = useHandleNotification();\r\n\r\n    const isEnabled =\r\n        queryOptions?.enabled === undefined || queryOptions?.enabled === true;\r\n\r\n    useResourceSubscription({\r\n        resource,\r\n        types: [\"*\"],\r\n        params: {\r\n            metaData,\r\n            pagination: config?.pagination,\r\n            hasPagination: config?.hasPagination,\r\n            sort: config?.sort,\r\n            filters: config?.filters,\r\n            subscriptionType: \"useList\",\r\n            ...liveParams,\r\n        },\r\n        channel: `resources/${resource}`,\r\n        enabled: isEnabled,\r\n        liveMode,\r\n        onLiveEvent,\r\n    });\r\n\r\n    const queryResponse = useQuery<GetListResponse<TData>, TError>(\r\n        queryKey.list(config),\r\n        () => {\r\n            const { hasPagination, ...restConfig } = config || {};\r\n            return getList<TData>({\r\n                resource,\r\n                ...restConfig,\r\n                hasPagination,\r\n                metaData,\r\n            });\r\n        },\r\n        {\r\n            ...queryOptions,\r\n            onSuccess: (data) => {\r\n                queryOptions?.onSuccess?.(data);\r\n\r\n                const notificationConfig =\r\n                    typeof successNotification === \"function\"\r\n                        ? successNotification(\r\n                              data,\r\n                              { metaData, config },\r\n                              resource,\r\n                          )\r\n                        : successNotification;\r\n\r\n                handleNotification(notificationConfig);\r\n            },\r\n            onError: (err: TError) => {\r\n                checkError(err);\r\n                queryOptions?.onError?.(err);\r\n\r\n                const notificationConfig =\r\n                    typeof errorNotification === \"function\"\r\n                        ? errorNotification(err, { metaData, config }, resource)\r\n                        : errorNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `${resource}-useList-notification`,\r\n                    message: translate(\r\n                        \"common:notifications.error\",\r\n                        { statusCode: err.statusCode },\r\n                        `Error (status code: ${err.statusCode})`,\r\n                    ),\r\n                    description: err.message,\r\n                    type: \"error\",\r\n                });\r\n            },\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","export const userFriendlySecond = (miliseconds: number): number => {\r\n    return miliseconds / 1000; //convert to seconds\r\n};\r\n","import zip from \"lodash/zip\";\r\nimport fromPairs from \"lodash/fromPairs\";\r\nimport { MapDataFn } from \"../../../interfaces\";\r\n\r\nexport const importCSVMapper = <TItem = any, TVariables = any>(\r\n    data: any[][],\r\n    mapData: MapDataFn<TItem, TVariables> = (item) => item as any,\r\n): TVariables[] => {\r\n    const [headers, ...body] = data;\r\n    return body\r\n        .map((entry) => fromPairs(zip(headers, entry)))\r\n        .map((item: any, index, array: any) =>\r\n            mapData.call(undefined, item, index, array),\r\n        );\r\n};\r\n","import humanizeString from \"humanize-string\";\r\nimport pluralize from \"pluralize\";\r\n\r\n/**\r\n * A method that the internal uses\r\n * @internal\r\n */\r\nexport const userFriendlyResourceName = (\r\n    resource = \"\",\r\n    type: \"singular\" | \"plural\",\r\n): string => {\r\n    const humanizeResource = humanizeString(resource);\r\n    if (type === \"singular\") {\r\n        return pluralize.singular(humanizeResource);\r\n    }\r\n    return pluralize.plural(humanizeResource);\r\n};\r\n","export const handleUseParams = (params: any = {}): any => {\r\n    if (params?.id) {\r\n        return {\r\n            ...params,\r\n            id: decodeURIComponent(params.id),\r\n        };\r\n    }\r\n    return params;\r\n};\r\n","import { IQueryKeys } from \"src/interfaces\";\r\nimport { QueryKey } from \"react-query\";\r\n\r\nimport { MetaDataQuery } from \"src/interfaces\";\r\n\r\nexport const queryKeys = (\r\n    resource?: string,\r\n    dataProviderName?: string,\r\n    metaData?: MetaDataQuery | undefined,\r\n): IQueryKeys => {\r\n    const providerName = dataProviderName || \"default\";\r\n    const keys: IQueryKeys = {\r\n        all: [providerName],\r\n        resourceAll: [providerName, resource || \"\"],\r\n        list: (config) => [\r\n            ...keys.resourceAll,\r\n            \"list\",\r\n            { ...config, ...metaData } as QueryKey,\r\n        ],\r\n        many: (ids) =>\r\n            [\r\n                ...keys.resourceAll,\r\n                \"getMany\",\r\n                (ids && ids.map(String)) as QueryKey,\r\n                { ...metaData } as QueryKey,\r\n            ].filter((item) => item !== undefined),\r\n        detail: (id) => [\r\n            ...keys.resourceAll,\r\n            \"detail\",\r\n            id?.toString(),\r\n            { ...metaData } as QueryKey,\r\n        ],\r\n        logList: (meta) =>\r\n            [\"logList\", resource, meta as any, metaData as QueryKey].filter(\r\n                (item) => item !== undefined,\r\n            ),\r\n    };\r\n    return keys;\r\n};\r\n","export const hasPermission = (\r\n    permissions: string[] | undefined,\r\n    action: string | undefined,\r\n): boolean => {\r\n    if (!permissions || !action) {\r\n        return false;\r\n    }\r\n    return !!permissions.find((i) => i === action);\r\n};\r\n","import { ResourceProps } from \"src/interfaces\";\r\n\r\nexport const routeGenerator = (\r\n    item: ResourceProps,\r\n    resourcesFromProps: ResourceProps[],\r\n): string | undefined => {\r\n    let route;\r\n\r\n    if (item.parentName) {\r\n        const hasParentName = resourcesFromProps.find(\r\n            (p) => p.name === item.parentName,\r\n        );\r\n        if (hasParentName?.parentName) {\r\n            const routePrefix = routeGenerator(\r\n                hasParentName,\r\n                resourcesFromProps,\r\n            );\r\n            route = `${routePrefix}/${item.name}`;\r\n            routeGenerator(hasParentName, resourcesFromProps);\r\n        } else if (item.parentName) {\r\n            route = `${item.parentName}/${item.name}`;\r\n        }\r\n    } else {\r\n        route = item.name;\r\n    }\r\n    return route;\r\n};\r\n","import { IResourceItem, ITreeMenu, IMenuItem } from \"src/interfaces\";\r\n\r\nexport const createTreeView = (\r\n    resources: IResourceItem[] | IMenuItem[],\r\n): ITreeMenu[] | ITreeMenu[] => {\r\n    const tree = [];\r\n    const resourcesRouteObject: { [key: string]: any } = {};\r\n    const resourcesNameObject: { [key: string]: any } = {};\r\n    let parent: IResourceItem | IMenuItem;\r\n    let child: ITreeMenu;\r\n\r\n    for (let i = 0; i < resources.length; i++) {\r\n        parent = resources[i];\r\n\r\n        const route = parent.route ?? parent.options?.route ?? \"\";\r\n\r\n        resourcesRouteObject[route] = parent;\r\n        resourcesRouteObject[route][\"children\"] = [];\r\n\r\n        resourcesNameObject[parent.name] = parent;\r\n        resourcesNameObject[parent.name][\"children\"] = [];\r\n    }\r\n\r\n    for (const name in resourcesRouteObject) {\r\n        if (resourcesRouteObject.hasOwnProperty(name)) {\r\n            child = resourcesRouteObject[name];\r\n\r\n            if (child.parentName && resourcesNameObject[child.parentName]) {\r\n                resourcesNameObject[child.parentName][\"children\"].push(child);\r\n            } else {\r\n                tree.push(child);\r\n            }\r\n        }\r\n    }\r\n\r\n    return tree;\r\n};\r\n","import { QueryObserverResult, useQuery, UseQueryOptions } from \"react-query\";\r\n\r\nimport {\r\n    GetOneResponse,\r\n    HttpError,\r\n    BaseRecord,\r\n    BaseKey,\r\n    MetaDataQuery,\r\n    LiveModeProps,\r\n    SuccessErrorNotification,\r\n} from \"../../interfaces\";\r\nimport {\r\n    useCheckError,\r\n    useTranslate,\r\n    useResourceSubscription,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n} from \"@hooks\";\r\nimport { queryKeys } from \"@definitions\";\r\n\r\nexport type UseOneProps<TData, TError> = {\r\n    resource: string;\r\n    id: BaseKey;\r\n    queryOptions?: UseQueryOptions<GetOneResponse<TData>, TError>;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n} & SuccessErrorNotification &\r\n    LiveModeProps;\r\n\r\n/**\r\n * `useOne` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/guides/queries `useQuery`} used for retrieving single items from a `resource`.\r\n *\r\n * It uses `getOne` method as query function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/data/useOne} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/api-references/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/api-references/interfaceReferences#httperror `HttpError`}\r\n *\r\n */\r\nexport const useOne = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n>({\r\n    resource,\r\n    id,\r\n    queryOptions,\r\n    successNotification,\r\n    errorNotification,\r\n    metaData,\r\n    liveMode,\r\n    onLiveEvent,\r\n    liveParams,\r\n    dataProviderName,\r\n}: UseOneProps<TData, TError>): QueryObserverResult<GetOneResponse<TData>> => {\r\n    const dataProvider = useDataProvider();\r\n    const queryKey = queryKeys(resource, dataProviderName, metaData);\r\n\r\n    const { getOne } = dataProvider(dataProviderName);\r\n    const translate = useTranslate();\r\n    const { mutate: checkError } = useCheckError();\r\n    const handleNotification = useHandleNotification();\r\n\r\n    useResourceSubscription({\r\n        resource,\r\n        types: [\"*\"],\r\n        channel: `resources/${resource}`,\r\n        params: {\r\n            ids: id ? [id] : [],\r\n            id: id,\r\n            metaData,\r\n            subscriptionType: \"useOne\",\r\n            ...liveParams,\r\n        },\r\n        enabled: queryOptions?.enabled,\r\n        liveMode,\r\n        onLiveEvent,\r\n    });\r\n\r\n    const queryResponse = useQuery<GetOneResponse<TData>, TError>(\r\n        queryKey.detail(id),\r\n        () => getOne<TData>({ resource, id, metaData }),\r\n        {\r\n            ...queryOptions,\r\n            onSuccess: (data) => {\r\n                queryOptions?.onSuccess?.(data);\r\n\r\n                const notificationConfig =\r\n                    typeof successNotification === \"function\"\r\n                        ? successNotification(data, { id, metaData }, resource)\r\n                        : successNotification;\r\n\r\n                handleNotification(notificationConfig);\r\n            },\r\n            onError: (err: TError) => {\r\n                checkError(err);\r\n                queryOptions?.onError?.(err);\r\n\r\n                const notificationConfig =\r\n                    typeof errorNotification === \"function\"\r\n                        ? errorNotification(err, { id, metaData }, resource)\r\n                        : errorNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `${id}-${resource}-getOne-notification`,\r\n                    message: translate(\r\n                        \"notifications.error\",\r\n                        { statusCode: err.statusCode },\r\n                        `Error (status code: ${err.statusCode})`,\r\n                    ),\r\n                    description: err.message,\r\n                    type: \"error\",\r\n                });\r\n            },\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","import qs, { IStringifyOptions } from \"qs\";\r\nimport unionWith from \"lodash/unionWith\";\r\nimport differenceWith from \"lodash/differenceWith\";\r\n\r\nimport {\r\n    CrudFilters,\r\n    CrudSorting,\r\n    CrudFilter,\r\n    CrudSort,\r\n    CrudOperators,\r\n    SortOrder,\r\n} from \"../../interfaces\";\r\n\r\nexport const parseTableParams = (url: string) => {\r\n    const { current, pageSize, sorter, filters } = qs.parse(\r\n        url.substring(1), // remove first ? character\r\n    );\r\n\r\n    return {\r\n        parsedCurrent: current && Number(current),\r\n        parsedPageSize: pageSize && Number(pageSize),\r\n        parsedSorter: (sorter as CrudSorting) ?? [],\r\n        parsedFilters: (filters as CrudFilters) ?? [],\r\n    };\r\n};\r\n\r\nexport const parseTableParamsFromQuery = (params: any) => {\r\n    const url = qs.stringify(params);\r\n    return parseTableParams(`/${url}`);\r\n};\r\n\r\nexport const stringifyTableParams = (params: {\r\n    pagination?: { current?: number; pageSize?: number };\r\n    sorter: CrudSorting;\r\n    filters: CrudFilters;\r\n}): string => {\r\n    const options: IStringifyOptions = {\r\n        skipNulls: true,\r\n        arrayFormat: \"indices\",\r\n        encode: false,\r\n    };\r\n    const { pagination, sorter, filters } = params;\r\n\r\n    const queryString = qs.stringify(\r\n        { ...(pagination ? pagination : {}), sorter, filters },\r\n        options,\r\n    );\r\n\r\n    return queryString;\r\n};\r\n\r\nexport const compareFilters = (\r\n    left: CrudFilter,\r\n    right: CrudFilter,\r\n): boolean => {\r\n    return (\r\n        (\"field\" in left ? left.field : undefined) ==\r\n            (\"field\" in right ? right.field : undefined) &&\r\n        left.operator == right.operator\r\n    );\r\n};\r\n\r\nexport const compareSorters = (left: CrudSort, right: CrudSort): boolean =>\r\n    left.field == right.field;\r\n// Keep only one CrudFilter per type according to compareFilters\r\n// Items in the array that is passed first to unionWith have higher priority\r\n// CrudFilter items with undefined values are necessary to signify no filter\r\n// After union, don't keep CrudFilter items with undefined value in the result\r\n// Items in the arrays with higher priority are put at the end.\r\nexport const unionFilters = (\r\n    permanentFilter: CrudFilters,\r\n    newFilters: CrudFilters,\r\n    prevFilters: CrudFilters = [],\r\n): CrudFilters =>\r\n    unionWith(permanentFilter, newFilters, prevFilters, compareFilters).filter(\r\n        (crudFilter) =>\r\n            crudFilter.value !== undefined &&\r\n            crudFilter.value !== null &&\r\n            (crudFilter.operator !== \"or\" ||\r\n                (crudFilter.operator === \"or\" &&\r\n                    crudFilter.value.length !== 0)),\r\n    );\r\n\r\nexport const unionSorters = (\r\n    permanentSorter: CrudSorting,\r\n    newSorters: CrudSorting,\r\n): CrudSorting =>\r\n    unionWith(permanentSorter, newSorters, compareSorters).filter(\r\n        (crudSorter) =>\r\n            crudSorter.order !== undefined && crudSorter.order !== null,\r\n    );\r\n// Prioritize filters in the permanentFilter and put it at the end of result array\r\nexport const setInitialFilters = (\r\n    permanentFilter: CrudFilters,\r\n    defaultFilter: CrudFilters,\r\n): CrudFilters => [\r\n    ...differenceWith(defaultFilter, permanentFilter, compareFilters),\r\n    ...permanentFilter,\r\n];\r\n\r\nexport const setInitialSorters = (\r\n    permanentSorter: CrudSorting,\r\n    defaultSorter: CrudSorting,\r\n): CrudSorting => [\r\n    ...differenceWith(defaultSorter, permanentSorter, compareSorters),\r\n    ...permanentSorter,\r\n];\r\n\r\nexport const getDefaultSortOrder = (\r\n    columnName: string,\r\n    sorter?: CrudSorting,\r\n): SortOrder | undefined => {\r\n    if (!sorter) {\r\n        return undefined;\r\n    }\r\n\r\n    const sortItem = sorter.find((item) => item.field === columnName);\r\n\r\n    if (sortItem) {\r\n        return sortItem.order as SortOrder;\r\n    }\r\n\r\n    return undefined;\r\n};\r\n\r\nexport const getDefaultFilter = (\r\n    columnName: string,\r\n    filters?: CrudFilters,\r\n    operatorType: CrudOperators = \"eq\",\r\n): CrudFilter[\"value\"] | undefined => {\r\n    const filter = filters?.find((filter) => {\r\n        if (filter.operator !== \"or\") {\r\n            const { operator, field } = filter;\r\n            return field === columnName && operator === operatorType;\r\n        }\r\n        return undefined;\r\n    });\r\n\r\n    if (filter) {\r\n        return filter.value || [];\r\n    }\r\n\r\n    return undefined;\r\n};\r\n","export const file2Base64 = (file: any): Promise<string> => {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n\r\n        const resultHandler = () => {\r\n            if (reader.result) {\r\n                reader.removeEventListener(\"load\", resultHandler, false);\r\n\r\n                resolve(reader.result as string);\r\n            }\r\n        };\r\n\r\n        reader.addEventListener(\"load\", resultHandler, false);\r\n\r\n        reader.readAsDataURL(file.originFileObj as Blob);\r\n        reader.onerror = (error) => {\r\n            reader.removeEventListener(\"load\", resultHandler, false);\r\n            return reject(error);\r\n        };\r\n    });\r\n};\r\n","import { QueryObserverResult, useQuery, UseQueryOptions } from \"react-query\";\r\n\r\nimport {\r\n    BaseRecord,\r\n    BaseKey,\r\n    GetManyResponse,\r\n    HttpError,\r\n    MetaDataQuery,\r\n    LiveModeProps,\r\n    SuccessErrorNotification,\r\n} from \"../../interfaces\";\r\nimport {\r\n    useTranslate,\r\n    useCheckError,\r\n    useResourceSubscription,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n} from \"@hooks\";\r\nimport { queryKeys } from \"@definitions/helpers\";\r\n\r\nexport type UseManyProps<TData, TError> = {\r\n    resource: string;\r\n    ids: BaseKey[];\r\n    queryOptions?: UseQueryOptions<GetManyResponse<TData>, TError>;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n} & SuccessErrorNotification &\r\n    LiveModeProps;\r\n\r\n/**\r\n * `useMany` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/guides/queries `useQuery`} used for retrieving multiple items from a `resource`.\r\n *\r\n * It uses `getMany` method as query function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/data/useMany} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/core/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/core/interfaceReferences#httperror `HttpError`}\r\n *\r\n */\r\nexport const useMany = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n>({\r\n    resource,\r\n    ids,\r\n    queryOptions,\r\n    successNotification,\r\n    errorNotification,\r\n    metaData,\r\n    liveMode,\r\n    onLiveEvent,\r\n    liveParams,\r\n    dataProviderName,\r\n}: UseManyProps<TData, TError>): QueryObserverResult<\r\n    GetManyResponse<TData>\r\n> => {\r\n    const dataProvider = useDataProvider();\r\n    const queryKey = queryKeys(resource, dataProviderName, metaData);\r\n\r\n    const { getMany } = dataProvider(dataProviderName);\r\n\r\n    const translate = useTranslate();\r\n    const { mutate: checkError } = useCheckError();\r\n    const handleNotification = useHandleNotification();\r\n\r\n    const isEnabled =\r\n        queryOptions?.enabled === undefined || queryOptions?.enabled === true;\r\n\r\n    useResourceSubscription({\r\n        resource,\r\n        types: [\"*\"],\r\n        params: {\r\n            ids: ids ?? [],\r\n            metaData,\r\n            subscriptionType: \"useMany\",\r\n            ...liveParams,\r\n        },\r\n        channel: `resources/${resource}`,\r\n        enabled: isEnabled,\r\n        liveMode,\r\n        onLiveEvent,\r\n    });\r\n\r\n    const queryResponse = useQuery<GetManyResponse<TData>, TError>(\r\n        queryKey.many(ids),\r\n        () => getMany<TData>({ resource, ids, metaData }),\r\n        {\r\n            ...queryOptions,\r\n            onSuccess: (data) => {\r\n                queryOptions?.onSuccess?.(data);\r\n\r\n                const notificationConfig =\r\n                    typeof successNotification === \"function\"\r\n                        ? successNotification(data, ids, resource)\r\n                        : successNotification;\r\n\r\n                handleNotification(notificationConfig);\r\n            },\r\n            onError: (err: TError) => {\r\n                checkError(err);\r\n                queryOptions?.onError?.(err);\r\n\r\n                const notificationConfig =\r\n                    typeof errorNotification === \"function\"\r\n                        ? errorNotification(err, ids, resource)\r\n                        : errorNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `${ids[0]}-${resource}-getMany-notification`,\r\n                    message: translate(\r\n                        \"notifications.error\",\r\n                        { statusCode: err.statusCode },\r\n                        `Error (status code: ${err.statusCode})`,\r\n                    ),\r\n                    description: err.message,\r\n                    type: \"error\",\r\n                });\r\n            },\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","import { useMutation, UseMutationResult, useQueryClient } from \"react-query\";\r\n\r\nimport { ActionTypes } from \"@contexts/undoableQueue\";\r\nimport {\r\n    BaseRecord,\r\n    BaseKey,\r\n    UpdateResponse,\r\n    MutationMode,\r\n    PrevContext as UpdateContext,\r\n    HttpError,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n    PreviousQuery,\r\n    GetListResponse,\r\n    IQueryKeys,\r\n} from \"../../interfaces\";\r\nimport pluralize from \"pluralize\";\r\nimport {\r\n    useMutationMode,\r\n    useCancelNotification,\r\n    useTranslate,\r\n    useCheckError,\r\n    usePublish,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n    useLog,\r\n    useInvalidate,\r\n} from \"@hooks\";\r\nimport { queryKeys } from \"@definitions/helpers\";\r\n\r\nexport type UpdateParams<TVariables> = {\r\n    id: BaseKey;\r\n    resource: string;\r\n    mutationMode?: MutationMode;\r\n    undoableTimeout?: number;\r\n    onCancel?: (cancelMutation: () => void) => void;\r\n    values: TVariables;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n    invalidates?: Array<keyof IQueryKeys>;\r\n} & SuccessErrorNotification;\r\n\r\nexport type UseUpdateReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n> = UseMutationResult<\r\n    UpdateResponse<TData>,\r\n    TError,\r\n    UpdateParams<TVariables>,\r\n    UpdateContext<TData>\r\n>;\r\n\r\n/**\r\n * `useUpdate` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/reference/useMutation `useMutation`} for update mutations.\r\n *\r\n * It uses `update` method as mutation function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/hooks/data/useUpdate} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/api-references/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/api-references/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for mutation function\r\n *\r\n */\r\nexport const useUpdate = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n>(): UseUpdateReturnType<TData, TError, TVariables> => {\r\n    const queryClient = useQueryClient();\r\n    const dataProvider = useDataProvider();\r\n\r\n    const {\r\n        mutationMode: mutationModeContext,\r\n        undoableTimeout: undoableTimeoutContext,\r\n    } = useMutationMode();\r\n    const translate = useTranslate();\r\n    const { mutate: checkError } = useCheckError();\r\n    const publish = usePublish();\r\n    const { log } = useLog();\r\n    const { notificationDispatch } = useCancelNotification();\r\n    const handleNotification = useHandleNotification();\r\n    const invalidateStore = useInvalidate();\r\n\r\n    const mutation = useMutation<\r\n        UpdateResponse<TData>,\r\n        TError,\r\n        UpdateParams<TVariables>,\r\n        UpdateContext<TData>\r\n    >(\r\n        ({\r\n            id,\r\n            values,\r\n            resource,\r\n            mutationMode,\r\n            undoableTimeout,\r\n            onCancel,\r\n            metaData,\r\n            dataProviderName,\r\n        }) => {\r\n            const mutationModePropOrContext =\r\n                mutationMode ?? mutationModeContext;\r\n\r\n            const undoableTimeoutPropOrContext =\r\n                undoableTimeout ?? undoableTimeoutContext;\r\n\r\n            if (!(mutationModePropOrContext === \"undoable\")) {\r\n                return dataProvider(dataProviderName).update<TData, TVariables>(\r\n                    {\r\n                        resource,\r\n                        id,\r\n                        variables: values,\r\n                        metaData,\r\n                    },\r\n                );\r\n            }\r\n            const updatePromise = new Promise<UpdateResponse<TData>>(\r\n                (resolve, reject) => {\r\n                    const doMutation = () => {\r\n                        dataProvider(dataProviderName)\r\n                            .update<TData, TVariables>({\r\n                                resource,\r\n                                id,\r\n                                variables: values,\r\n                                metaData,\r\n                            })\r\n                            .then((result) => resolve(result))\r\n                            .catch((err) => reject(err));\r\n                    };\r\n\r\n                    const cancelMutation = () => {\r\n                        reject({ message: \"mutationCancelled\" });\r\n                    };\r\n\r\n                    if (onCancel) {\r\n                        onCancel(cancelMutation);\r\n                    }\r\n\r\n                    notificationDispatch({\r\n                        type: ActionTypes.ADD,\r\n                        payload: {\r\n                            id: id,\r\n                            resource: resource,\r\n                            cancelMutation: cancelMutation,\r\n                            doMutation: doMutation,\r\n                            seconds: undoableTimeoutPropOrContext,\r\n                            isSilent: !!onCancel,\r\n                        },\r\n                    });\r\n                },\r\n            );\r\n            return updatePromise;\r\n        },\r\n        {\r\n            onMutate: async ({\r\n                resource,\r\n                id,\r\n                mutationMode,\r\n                values,\r\n                dataProviderName,\r\n            }) => {\r\n                const queryKey = queryKeys(resource, dataProviderName);\r\n\r\n                const previousQueries: PreviousQuery<TData>[] =\r\n                    queryClient.getQueriesData(queryKey.resourceAll);\r\n\r\n                const mutationModePropOrContext =\r\n                    mutationMode ?? mutationModeContext;\r\n\r\n                await queryClient.cancelQueries(\r\n                    queryKey.resourceAll,\r\n                    undefined,\r\n                    {\r\n                        silent: true,\r\n                    },\r\n                );\r\n\r\n                if (!(mutationModePropOrContext === \"pessimistic\")) {\r\n                    // Set the previous queries to the new ones:\r\n                    queryClient.setQueriesData(\r\n                        queryKey.list(),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n                            const data = previous.data.map((record: TData) => {\r\n                                if (record.id?.toString() === id?.toString()) {\r\n                                    return {\r\n                                        id,\r\n                                        ...values,\r\n                                    } as unknown as TData;\r\n                                }\r\n                                return record;\r\n                            });\r\n\r\n                            return {\r\n                                ...previous,\r\n                                data,\r\n                            };\r\n                        },\r\n                    );\r\n\r\n                    queryClient.setQueriesData(\r\n                        queryKey.many(),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n\r\n                            const data = previous.data.map((record: TData) => {\r\n                                if (record.id?.toString() === id?.toString()) {\r\n                                    record = {\r\n                                        id,\r\n                                        ...values,\r\n                                    } as unknown as TData;\r\n                                }\r\n                                return record;\r\n                            });\r\n                            return {\r\n                                ...previous,\r\n                                data,\r\n                            };\r\n                        },\r\n                    );\r\n\r\n                    queryClient.setQueriesData(\r\n                        queryKey.detail(id),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n\r\n                            return {\r\n                                ...previous,\r\n                                data: {\r\n                                    ...previous.data,\r\n                                    ...values,\r\n                                },\r\n                            };\r\n                        },\r\n                    );\r\n                }\r\n\r\n                return {\r\n                    previousQueries,\r\n                    queryKey,\r\n                };\r\n            },\r\n            onSettled: (\r\n                _data,\r\n                _error,\r\n                {\r\n                    id,\r\n                    resource,\r\n                    dataProviderName,\r\n                    invalidates = [\"list\", \"many\", \"detail\"],\r\n                },\r\n            ) => {\r\n                invalidateStore({\r\n                    resource,\r\n                    dataProviderName,\r\n                    invalidates,\r\n                    id,\r\n                });\r\n\r\n                notificationDispatch({\r\n                    type: ActionTypes.REMOVE,\r\n                    payload: { id, resource },\r\n                });\r\n            },\r\n            onSuccess: (\r\n                data,\r\n                {\r\n                    id,\r\n                    resource,\r\n                    successNotification,\r\n                    dataProviderName,\r\n                    values,\r\n                    metaData,\r\n                },\r\n                context,\r\n            ) => {\r\n                const resourceSingular = pluralize.singular(resource);\r\n\r\n                const notificationConfig =\r\n                    typeof successNotification === \"function\"\r\n                        ? successNotification(data, { id, values }, resource)\r\n                        : successNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `${id}-${resource}-notification`,\r\n                    description: translate(\r\n                        \"notifications.success\",\r\n                        \"Successful\",\r\n                    ),\r\n                    message: translate(\r\n                        \"notifications.editSuccess\",\r\n                        {\r\n                            resource: translate(\r\n                                `${resource}.${resource}`,\r\n                                resourceSingular,\r\n                            ),\r\n                        },\r\n                        `Successfully updated ${resourceSingular}`,\r\n                    ),\r\n                    type: \"success\",\r\n                });\r\n\r\n                publish?.({\r\n                    channel: `resources/${resource}`,\r\n                    type: \"updated\",\r\n                    payload: {\r\n                        ids: data.data?.id ? [data.data.id] : undefined,\r\n                    },\r\n                    date: new Date(),\r\n                });\r\n\r\n                let previousData: any;\r\n                if (context) {\r\n                    const queryData = queryClient.getQueryData<\r\n                        UpdateResponse<TData>\r\n                    >(context.queryKey.detail(id));\r\n\r\n                    previousData = Object.keys(values).reduce<any>(\r\n                        (acc, item) => {\r\n                            acc[item] = queryData?.data?.[item];\r\n                            return acc;\r\n                        },\r\n                        {},\r\n                    );\r\n                }\r\n\r\n                const { fields, operation, variables, ...rest } =\r\n                    metaData || {};\r\n\r\n                log?.mutate({\r\n                    action: \"update\",\r\n                    resource,\r\n                    data: values,\r\n                    previousData,\r\n                    meta: {\r\n                        id,\r\n                        dataProviderName,\r\n                        ...rest,\r\n                    },\r\n                });\r\n            },\r\n            onError: (\r\n                err: TError,\r\n                { id, resource, errorNotification, values },\r\n                context,\r\n            ) => {\r\n                // set back the queries to the context:\r\n\r\n                if (context) {\r\n                    for (const query of context.previousQueries) {\r\n                        queryClient.setQueryData(query[0], query[1]);\r\n                    }\r\n                }\r\n\r\n                if (err.message !== \"mutationCancelled\") {\r\n                    checkError?.(err);\r\n\r\n                    const resourceSingular = pluralize.singular(resource);\r\n\r\n                    const notificationConfig =\r\n                        typeof errorNotification === \"function\"\r\n                            ? errorNotification(err, { id, values }, resource)\r\n                            : errorNotification;\r\n\r\n                    handleNotification(notificationConfig, {\r\n                        key: `${id}-${resource}-notification`,\r\n                        message: translate(\r\n                            \"notifications.editError\",\r\n                            {\r\n                                resource: translate(\r\n                                    `${resource}.${resource}`,\r\n                                    resourceSingular,\r\n                                ),\r\n                                statusCode: err.statusCode,\r\n                            },\r\n                            `Error when updating ${resourceSingular} (status code: ${err.statusCode})`,\r\n                        ),\r\n                        description: err.message,\r\n                        type: \"error\",\r\n                    });\r\n                }\r\n            },\r\n        },\r\n    );\r\n\r\n    return mutation;\r\n};\r\n","import React, { ReactNode, useReducer } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nimport { UndoableQueue } from \"@components\";\r\n\r\nimport { IUndoableQueue, IUndoableQueueContext } from \"../../interfaces\";\r\nimport { ActionTypes } from \"./actionTypes\";\r\n\r\nexport const UndoableQueueContext = React.createContext<IUndoableQueueContext>({\r\n    notifications: [],\r\n    notificationDispatch: () => false,\r\n});\r\n\r\nconst initialState: IUndoableQueue[] = [];\r\n\r\nexport const undoableQueueReducer = (state: IUndoableQueue[], action: any) => {\r\n    switch (action.type) {\r\n        case ActionTypes.ADD:\r\n            return [\r\n                ...state.filter(\r\n                    (notificationItem: IUndoableQueue) =>\r\n                        notificationItem.id != action.payload.id &&\r\n                        notificationItem.resource == action.payload.resource,\r\n                ),\r\n                {\r\n                    ...action.payload,\r\n                    isRunning: true,\r\n                },\r\n            ];\r\n        case ActionTypes.REMOVE:\r\n            return state.filter(\r\n                (notificationItem: IUndoableQueue) =>\r\n                    notificationItem.id != action.payload.id &&\r\n                    notificationItem.resource == action.payload.resource,\r\n            );\r\n        case ActionTypes.DECREASE_NOTIFICATION_SECOND:\r\n            return state.map((notificationItem: IUndoableQueue) => {\r\n                if (\r\n                    notificationItem.id == action.payload.id &&\r\n                    notificationItem.resource == action.payload.resource\r\n                ) {\r\n                    return {\r\n                        ...notificationItem,\r\n                        seconds: action.payload.seconds - 1000,\r\n                    };\r\n                }\r\n                return notificationItem;\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const UndoableQueueContextProvider: React.FC<{ children: ReactNode }> =\r\n    ({ children }) => {\r\n        const [notifications, notificationDispatch] = useReducer(\r\n            undoableQueueReducer,\r\n            initialState,\r\n        );\r\n\r\n        const notificationData = { notifications, notificationDispatch };\r\n\r\n        return (\r\n            <UndoableQueueContext.Provider value={notificationData}>\r\n                {children}\r\n                {typeof window !== \"undefined\" &&\r\n                    createPortal(\r\n                        <UndoableQueue notifications={notifications} />,\r\n                        document.body,\r\n                    )}\r\n            </UndoableQueueContext.Provider>\r\n        );\r\n    };\r\n","import { useMutation, UseMutationResult } from \"react-query\";\r\nimport pluralize from \"pluralize\";\r\n\r\nimport {\r\n    CreateResponse,\r\n    BaseRecord,\r\n    HttpError,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n    IQueryKeys,\r\n} from \"../../interfaces\";\r\nimport {\r\n    useTranslate,\r\n    useCheckError,\r\n    usePublish,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n    useLog,\r\n    useInvalidate,\r\n} from \"@hooks\";\r\n\r\ntype useCreateParams<TVariables> = {\r\n    resource: string;\r\n    values: TVariables;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n    invalidates?: Array<keyof IQueryKeys>;\r\n} & SuccessErrorNotification;\r\n\r\nexport type UseCreateReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n> = UseMutationResult<\r\n    CreateResponse<TData>,\r\n    TError,\r\n    useCreateParams<TVariables>,\r\n    unknown\r\n>;\r\n\r\n/**\r\n * `useCreate` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/reference/useMutation `useMutation`} for create mutations.\r\n *\r\n * It uses `create` method as mutation function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/hooks/data/useCreate} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/api-references/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/api-references/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for mutation function\r\n *\r\n */\r\n\r\nexport const useCreate = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n>(): UseCreateReturnType<TData, TError, TVariables> => {\r\n    const { mutate: checkError } = useCheckError();\r\n    const dataProvider = useDataProvider();\r\n    const invalidateStore = useInvalidate();\r\n\r\n    const translate = useTranslate();\r\n    const publish = usePublish();\r\n    const { log } = useLog();\r\n    const handleNotification = useHandleNotification();\r\n\r\n    const mutation = useMutation<\r\n        CreateResponse<TData>,\r\n        TError,\r\n        useCreateParams<TVariables>,\r\n        unknown\r\n    >(\r\n        ({\r\n            resource,\r\n            values,\r\n            metaData,\r\n            dataProviderName,\r\n        }: useCreateParams<TVariables>) => {\r\n            return dataProvider(dataProviderName).create<TData, TVariables>({\r\n                resource,\r\n                variables: values,\r\n                metaData,\r\n            });\r\n        },\r\n        {\r\n            onSuccess: (\r\n                data,\r\n                {\r\n                    resource,\r\n                    successNotification: successNotificationFromProp,\r\n                    dataProviderName,\r\n                    invalidates = [\"list\", \"many\"],\r\n                    values,\r\n                    metaData,\r\n                },\r\n            ) => {\r\n                const resourceSingular = pluralize.singular(resource);\r\n\r\n                const notificationConfig =\r\n                    typeof successNotificationFromProp === \"function\"\r\n                        ? successNotificationFromProp(data, values, resource)\r\n                        : successNotificationFromProp;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `create-${resource}-notification`,\r\n                    message: translate(\r\n                        \"notifications.createSuccess\",\r\n                        {\r\n                            resource: translate(\r\n                                `${resource}.${resource}`,\r\n                                resourceSingular,\r\n                            ),\r\n                        },\r\n                        `Successfully created ${resourceSingular}`,\r\n                    ),\r\n                    description: translate(\"notifications.success\", \"Success\"),\r\n                    type: \"success\",\r\n                });\r\n\r\n                invalidateStore({\r\n                    resource,\r\n                    dataProviderName,\r\n                    invalidates,\r\n                });\r\n\r\n                publish?.({\r\n                    channel: `resources/${resource}`,\r\n                    type: \"created\",\r\n                    payload: {\r\n                        ids: data?.data?.id ? [data.data.id] : undefined,\r\n                    },\r\n                    date: new Date(),\r\n                });\r\n\r\n                const { fields, operation, variables, ...rest } =\r\n                    metaData || {};\r\n\r\n                log?.mutate({\r\n                    action: \"create\",\r\n                    resource,\r\n                    data: values,\r\n                    meta: {\r\n                        dataProviderName,\r\n                        id: data?.data?.id ?? undefined,\r\n                        ...rest,\r\n                    },\r\n                });\r\n            },\r\n            onError: (\r\n                err: TError,\r\n                {\r\n                    resource,\r\n                    errorNotification: errorNotificationFromProp,\r\n                    values,\r\n                },\r\n            ) => {\r\n                checkError(err);\r\n                const resourceSingular = pluralize.singular(resource);\r\n\r\n                const notificationConfig =\r\n                    typeof errorNotificationFromProp === \"function\"\r\n                        ? errorNotificationFromProp(err, values, resource)\r\n                        : errorNotificationFromProp;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `create-${resource}-notification`,\r\n                    description: err.message,\r\n                    message: translate(\r\n                        \"notifications.createError\",\r\n                        {\r\n                            resource: translate(\r\n                                `${resource}.${resource}`,\r\n                                resourceSingular,\r\n                            ),\r\n                            statusCode: err.statusCode,\r\n                        },\r\n                        `There was an error creating ${resourceSingular} (status code: ${err.statusCode})`,\r\n                    ),\r\n                    type: \"error\",\r\n                });\r\n            },\r\n        },\r\n    );\r\n\r\n    return mutation;\r\n};\r\n","import { useQueryClient, useMutation, UseMutationResult } from \"react-query\";\r\nimport pluralize from \"pluralize\";\r\n\r\nimport {\r\n    useMutationMode,\r\n    useCancelNotification,\r\n    useTranslate,\r\n    useCheckError,\r\n    usePublish,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n    useLog,\r\n    useInvalidate,\r\n} from \"@hooks\";\r\nimport { ActionTypes } from \"@contexts/undoableQueue\";\r\nimport {\r\n    DeleteOneResponse,\r\n    MutationMode,\r\n    PrevContext as DeleteContext,\r\n    BaseRecord,\r\n    BaseKey,\r\n    HttpError,\r\n    GetListResponse,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n    PreviousQuery,\r\n    IQueryKeys,\r\n} from \"../../interfaces\";\r\nimport { queryKeys } from \"@definitions/helpers\";\r\n\r\nexport type DeleteParams<TVariables> = {\r\n    id: BaseKey;\r\n    resource: string;\r\n    mutationMode?: MutationMode;\r\n    undoableTimeout?: number;\r\n    onCancel?: (cancelMutation: () => void) => void;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n    invalidates?: Array<keyof IQueryKeys>;\r\n    values?: TVariables;\r\n} & SuccessErrorNotification;\r\n\r\nexport type UseDeleteReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError = HttpError,\r\n    TVariables = {},\r\n> = UseMutationResult<\r\n    DeleteOneResponse<TData>,\r\n    TError,\r\n    DeleteParams<TVariables>,\r\n    DeleteContext<TData>\r\n>;\r\n\r\n/**\r\n * `useDelete` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/reference/useMutation `useMutation`} for delete mutations.\r\n *\r\n * It uses `deleteOne` method as mutation function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/hooks/data/useDelete} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/api-references/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/api-references/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for params. default `{}`\r\n *\r\n */\r\nexport const useDelete = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n>(): UseDeleteReturnType<TData, TError, TVariables> => {\r\n    const { mutate: checkError } = useCheckError();\r\n    const dataProvider = useDataProvider();\r\n\r\n    const queryClient = useQueryClient();\r\n\r\n    const {\r\n        mutationMode: mutationModeContext,\r\n        undoableTimeout: undoableTimeoutContext,\r\n    } = useMutationMode();\r\n\r\n    const { notificationDispatch } = useCancelNotification();\r\n    const translate = useTranslate();\r\n    const publish = usePublish();\r\n    const { log } = useLog();\r\n    const handleNotification = useHandleNotification();\r\n    const invalidateStore = useInvalidate();\r\n\r\n    const mutation = useMutation<\r\n        DeleteOneResponse<TData>,\r\n        TError,\r\n        DeleteParams<TVariables>,\r\n        DeleteContext<TData>\r\n    >(\r\n        ({\r\n            id,\r\n            mutationMode,\r\n            undoableTimeout,\r\n            resource,\r\n            onCancel,\r\n            metaData,\r\n            dataProviderName,\r\n            values,\r\n        }) => {\r\n            const mutationModePropOrContext =\r\n                mutationMode ?? mutationModeContext;\r\n\r\n            const undoableTimeoutPropOrContext =\r\n                undoableTimeout ?? undoableTimeoutContext;\r\n\r\n            if (!(mutationModePropOrContext === \"undoable\")) {\r\n                return dataProvider(dataProviderName).deleteOne<TData>({\r\n                    resource,\r\n                    id,\r\n                    metaData,\r\n                    variables: values,\r\n                });\r\n            }\r\n\r\n            const deletePromise = new Promise<DeleteOneResponse<TData>>(\r\n                (resolve, reject) => {\r\n                    const doMutation = () => {\r\n                        dataProvider(dataProviderName)\r\n                            .deleteOne<TData>({\r\n                                resource,\r\n                                id,\r\n                                metaData,\r\n                                variables: values,\r\n                            })\r\n                            .then((result) => resolve(result))\r\n                            .catch((err) => reject(err));\r\n                    };\r\n\r\n                    const cancelMutation = () => {\r\n                        reject({ message: \"mutationCancelled\" });\r\n                    };\r\n\r\n                    if (onCancel) {\r\n                        onCancel(cancelMutation);\r\n                    }\r\n\r\n                    notificationDispatch({\r\n                        type: ActionTypes.ADD,\r\n                        payload: {\r\n                            id,\r\n                            resource: resource,\r\n                            cancelMutation: cancelMutation,\r\n                            doMutation: doMutation,\r\n                            seconds: undoableTimeoutPropOrContext,\r\n                            isSilent: !!onCancel,\r\n                        },\r\n                    });\r\n                },\r\n            );\r\n            return deletePromise;\r\n        },\r\n        {\r\n            onMutate: async ({\r\n                id,\r\n                resource,\r\n                mutationMode,\r\n                dataProviderName,\r\n            }) => {\r\n                const queryKey = queryKeys(resource, dataProviderName);\r\n\r\n                const mutationModePropOrContext =\r\n                    mutationMode ?? mutationModeContext;\r\n\r\n                await queryClient.cancelQueries(\r\n                    queryKey.resourceAll,\r\n                    undefined,\r\n                    {\r\n                        silent: true,\r\n                    },\r\n                );\r\n\r\n                const previousQueries: PreviousQuery<TData>[] =\r\n                    queryClient.getQueriesData(queryKey.resourceAll);\r\n\r\n                if (!(mutationModePropOrContext === \"pessimistic\")) {\r\n                    // Set the previous queries to the new ones:\r\n                    queryClient.setQueriesData(\r\n                        queryKey.list(),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n                            const data = previous.data.filter(\r\n                                (record: TData) =>\r\n                                    record.id?.toString() !== id.toString(),\r\n                            );\r\n\r\n                            return {\r\n                                data,\r\n                                total: previous.total - 1,\r\n                            };\r\n                        },\r\n                    );\r\n\r\n                    queryClient.setQueriesData(\r\n                        queryKey.many(),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n                            const data = previous.data.filter(\r\n                                (record: TData) => {\r\n                                    return (\r\n                                        record.id?.toString() !== id?.toString()\r\n                                    );\r\n                                },\r\n                            );\r\n\r\n                            return {\r\n                                ...previous,\r\n                                data,\r\n                            };\r\n                        },\r\n                    );\r\n                }\r\n\r\n                return {\r\n                    previousQueries,\r\n                    queryKey,\r\n                };\r\n            },\r\n            onSettled: (\r\n                _data,\r\n                _error,\r\n                {\r\n                    id,\r\n                    resource,\r\n                    dataProviderName,\r\n                    invalidates = [\"list\", \"many\"],\r\n                },\r\n            ) => {\r\n                // invalidate the cache for the list and many queries:\r\n                invalidateStore({\r\n                    resource,\r\n                    dataProviderName,\r\n                    invalidates,\r\n                });\r\n\r\n                notificationDispatch({\r\n                    type: ActionTypes.REMOVE,\r\n                    payload: { id, resource },\r\n                });\r\n            },\r\n            onSuccess: (\r\n                _data,\r\n                {\r\n                    id,\r\n                    resource,\r\n                    successNotification,\r\n                    dataProviderName,\r\n                    metaData,\r\n                },\r\n                context,\r\n            ) => {\r\n                const resourceSingular = pluralize.singular(resource ?? \"\");\r\n\r\n                // Remove the queries from the cache:\r\n                queryClient.removeQueries(context?.queryKey.detail(id));\r\n\r\n                const notificationConfig =\r\n                    typeof successNotification === \"function\"\r\n                        ? successNotification(_data, id, resource)\r\n                        : successNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `${id}-${resource}-notification`,\r\n                    description: translate(\"notifications.success\", \"Success\"),\r\n                    message: translate(\r\n                        \"notifications.deleteSuccess\",\r\n                        {\r\n                            resource: translate(\r\n                                `${resource}.${resource}`,\r\n                                resourceSingular,\r\n                            ),\r\n                        },\r\n                        `Successfully deleted a ${resourceSingular}`,\r\n                    ),\r\n                    type: \"success\",\r\n                });\r\n\r\n                publish?.({\r\n                    channel: `resources/${resource}`,\r\n                    type: \"deleted\",\r\n                    payload: {\r\n                        ids: id ? [id] : [],\r\n                    },\r\n                    date: new Date(),\r\n                });\r\n\r\n                const { fields, operation, variables, ...rest } =\r\n                    metaData || {};\r\n\r\n                log?.mutate({\r\n                    action: \"delete\",\r\n                    resource,\r\n                    meta: {\r\n                        id,\r\n                        dataProviderName,\r\n                        ...rest,\r\n                    },\r\n                });\r\n\r\n                // Remove the queries from the cache:\r\n                queryClient.removeQueries(context?.queryKey.detail(id));\r\n            },\r\n            onError: (\r\n                err: TError,\r\n                { id, resource, errorNotification },\r\n                context,\r\n            ) => {\r\n                // set back the queries to the context:\r\n                if (context) {\r\n                    for (const query of context.previousQueries) {\r\n                        queryClient.setQueryData(query[0], query[1]);\r\n                    }\r\n                }\r\n\r\n                if (err.message !== \"mutationCancelled\") {\r\n                    checkError(err);\r\n\r\n                    const resourceSingular = pluralize.singular(resource ?? \"\");\r\n\r\n                    const notificationConfig =\r\n                        typeof errorNotification === \"function\"\r\n                            ? errorNotification(err, id, resource)\r\n                            : errorNotification;\r\n\r\n                    handleNotification(notificationConfig, {\r\n                        key: `${id}-${resource}-notification`,\r\n                        message: translate(\r\n                            \"notifications.deleteError\",\r\n                            {\r\n                                resource: resourceSingular,\r\n                                statusCode: err.statusCode,\r\n                            },\r\n                            `Error (status code: ${err.statusCode})`,\r\n                        ),\r\n                        description: err.message,\r\n                        type: \"error\",\r\n                    });\r\n                }\r\n            },\r\n        },\r\n    );\r\n\r\n    return mutation;\r\n};\r\n","import { useMutation, UseMutationResult } from \"react-query\";\r\n\r\nimport {\r\n    BaseRecord,\r\n    CreateManyResponse,\r\n    HttpError,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n    IQueryKeys,\r\n} from \"../../interfaces\";\r\nimport {\r\n    useTranslate,\r\n    usePublish,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n    useInvalidate,\r\n} from \"@hooks\";\r\nimport pluralize from \"pluralize\";\r\n\r\ntype useCreateManyParams<TVariables> = {\r\n    resource: string;\r\n    values: TVariables[];\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n    invalidates?: Array<keyof IQueryKeys>;\r\n} & SuccessErrorNotification;\r\n\r\nexport type UseCreateManyReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError = HttpError,\r\n    TVariables = {},\r\n> = UseMutationResult<\r\n    CreateManyResponse<TData>,\r\n    TError,\r\n    useCreateManyParams<TVariables>,\r\n    unknown\r\n>;\r\n\r\n/**\r\n * `useCreateMany` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/reference/useMutation `useMutation`} for multiple create mutations.\r\n *\r\n * It uses `createMany` method as mutation function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/data/useCreateMany} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/core/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/core/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for mutation function\r\n *\r\n */\r\nexport const useCreateMany = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n>(): UseCreateManyReturnType<TData, TError, TVariables> => {\r\n    const dataProvider = useDataProvider();\r\n\r\n    const translate = useTranslate();\r\n    const publish = usePublish();\r\n    const handleNotification = useHandleNotification();\r\n    const invalidateStore = useInvalidate();\r\n\r\n    const mutation = useMutation<\r\n        CreateManyResponse<TData>,\r\n        TError,\r\n        useCreateManyParams<TVariables>\r\n    >(\r\n        ({\r\n            resource,\r\n            values,\r\n            metaData,\r\n            dataProviderName,\r\n        }: useCreateManyParams<TVariables>) =>\r\n            dataProvider(dataProviderName).createMany<TData, TVariables>({\r\n                resource,\r\n                variables: values,\r\n                metaData,\r\n            }),\r\n        {\r\n            onSuccess: (\r\n                response,\r\n                {\r\n                    resource,\r\n                    successNotification,\r\n                    dataProviderName,\r\n                    invalidates = [\"list\", \"many\"],\r\n                    values,\r\n                },\r\n            ) => {\r\n                const resourcePlural = pluralize.plural(resource);\r\n\r\n                const notificationConfig =\r\n                    typeof successNotification === \"function\"\r\n                        ? successNotification(response, values, resource)\r\n                        : successNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `createMany-${resource}-notification`,\r\n                    message: translate(\r\n                        \"notifications.createSuccess\",\r\n                        {\r\n                            resource: translate(\r\n                                `${resource}.${resource}`,\r\n                                resource,\r\n                            ),\r\n                        },\r\n                        `Successfully created ${resourcePlural}`,\r\n                    ),\r\n                    description: translate(\"notifications.success\", \"Success\"),\r\n                    type: \"success\",\r\n                });\r\n\r\n                invalidateStore({\r\n                    resource,\r\n                    dataProviderName,\r\n                    invalidates,\r\n                });\r\n\r\n                const ids = response?.data\r\n                    .filter((item) => item?.id !== undefined)\r\n                    .map((item) => item.id!);\r\n\r\n                publish?.({\r\n                    channel: `resources/${resource}`,\r\n                    type: \"created\",\r\n                    payload: {\r\n                        ids,\r\n                    },\r\n                    date: new Date(),\r\n                });\r\n            },\r\n            onError: (err: TError, { resource, errorNotification, values }) => {\r\n                const notificationConfig =\r\n                    typeof errorNotification === \"function\"\r\n                        ? errorNotification(err, values, resource)\r\n                        : errorNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `createMany-${resource}-notification`,\r\n                    description: err.message,\r\n                    message: translate(\r\n                        \"notifications.createError\",\r\n                        {\r\n                            resource: translate(\r\n                                `${resource}.${resource}`,\r\n                                resource,\r\n                            ),\r\n                            statusCode: err.statusCode,\r\n                        },\r\n                        `There was an error creating ${resource} (status code: ${err.statusCode}`,\r\n                    ),\r\n                    type: \"error\",\r\n                });\r\n            },\r\n        },\r\n    );\r\n\r\n    return mutation;\r\n};\r\n","import { useMutation, UseMutationResult, useQueryClient } from \"react-query\";\r\nimport pluralize from \"pluralize\";\r\n\r\nimport {\r\n    useCancelNotification,\r\n    useCheckError,\r\n    useMutationMode,\r\n    useTranslate,\r\n    usePublish,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n    useInvalidate,\r\n} from \"@hooks\";\r\nimport { ActionTypes } from \"@contexts/undoableQueue\";\r\nimport {\r\n    BaseRecord,\r\n    BaseKey,\r\n    UpdateManyResponse,\r\n    HttpError,\r\n    MutationMode,\r\n    QueryResponse,\r\n    PrevContext as UpdateContext,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n    GetListResponse,\r\n    IQueryKeys,\r\n} from \"../../interfaces\";\r\nimport { queryKeys } from \"@definitions/helpers\";\r\n\r\ntype UpdateManyParams<TVariables> = {\r\n    ids: BaseKey[];\r\n    resource: string;\r\n    mutationMode?: MutationMode;\r\n    undoableTimeout?: number;\r\n    onCancel?: (cancelMutation: () => void) => void;\r\n    values: TVariables;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n    invalidates?: Array<keyof IQueryKeys>;\r\n} & SuccessErrorNotification;\r\n\r\ntype UseUpdateManyReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n> = UseMutationResult<\r\n    UpdateManyResponse<TData>,\r\n    TError,\r\n    UpdateManyParams<TVariables>,\r\n    UpdateContext<TData>\r\n>;\r\n\r\n/**\r\n * `useUpdateMany` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/reference/useMutation `useMutation`} for multiple update mutations.\r\n *\r\n * It uses `updateMany` method as mutation function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/data/useUpdateMany} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/core/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/core/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for mutation function\r\n *\r\n */\r\nexport const useUpdateMany = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n>(): UseUpdateManyReturnType<TData, TError, TVariables> => {\r\n    const queryClient = useQueryClient();\r\n    const dataProvider = useDataProvider();\r\n    const translate = useTranslate();\r\n\r\n    const {\r\n        mutationMode: mutationModeContext,\r\n        undoableTimeout: undoableTimeoutContext,\r\n    } = useMutationMode();\r\n    const { mutate: checkError } = useCheckError();\r\n    const { notificationDispatch } = useCancelNotification();\r\n    const publish = usePublish();\r\n    const handleNotification = useHandleNotification();\r\n    const invalidateStore = useInvalidate();\r\n\r\n    const mutation = useMutation<\r\n        UpdateManyResponse<TData>,\r\n        TError,\r\n        UpdateManyParams<TVariables>,\r\n        UpdateContext<TData>\r\n    >(\r\n        ({\r\n            ids,\r\n            values,\r\n            resource,\r\n            onCancel,\r\n            mutationMode,\r\n            undoableTimeout,\r\n            metaData,\r\n            dataProviderName,\r\n        }: UpdateManyParams<TVariables>) => {\r\n            const mutationModePropOrContext =\r\n                mutationMode ?? mutationModeContext;\r\n\r\n            const undoableTimeoutPropOrContext =\r\n                undoableTimeout ?? undoableTimeoutContext;\r\n\r\n            if (!(mutationModePropOrContext === \"undoable\")) {\r\n                return dataProvider(dataProviderName).updateMany<\r\n                    TData,\r\n                    TVariables\r\n                >({\r\n                    resource,\r\n                    ids,\r\n                    variables: values,\r\n                    metaData,\r\n                });\r\n            }\r\n\r\n            const updatePromise = new Promise<UpdateManyResponse<TData>>(\r\n                (resolve, reject) => {\r\n                    const doMutation = () => {\r\n                        dataProvider(dataProviderName)\r\n                            .updateMany<TData, TVariables>({\r\n                                resource,\r\n                                ids,\r\n                                variables: values,\r\n                                metaData,\r\n                            })\r\n                            .then((result) => resolve(result))\r\n                            .catch((err) => reject(err));\r\n                    };\r\n\r\n                    const cancelMutation = () => {\r\n                        reject({ message: \"mutationCancelled\" });\r\n                    };\r\n\r\n                    if (onCancel) {\r\n                        onCancel(cancelMutation);\r\n                    }\r\n\r\n                    notificationDispatch({\r\n                        type: ActionTypes.ADD,\r\n                        payload: {\r\n                            id: ids,\r\n                            resource: resource,\r\n                            cancelMutation: cancelMutation,\r\n                            doMutation: doMutation,\r\n                            seconds: undoableTimeoutPropOrContext,\r\n                            isSilent: !!onCancel,\r\n                        },\r\n                    });\r\n                },\r\n            );\r\n            return updatePromise;\r\n        },\r\n\r\n        {\r\n            onMutate: async ({\r\n                resource,\r\n                ids,\r\n                values,\r\n                mutationMode,\r\n                dataProviderName,\r\n                metaData,\r\n            }) => {\r\n                const queryKey = queryKeys(\r\n                    resource,\r\n                    dataProviderName,\r\n                    metaData,\r\n                );\r\n\r\n                const mutationModePropOrContext =\r\n                    mutationMode ?? mutationModeContext;\r\n\r\n                await queryClient.cancelQueries(\r\n                    queryKey.resourceAll,\r\n                    undefined,\r\n                    {\r\n                        silent: true,\r\n                    },\r\n                );\r\n\r\n                const previousQueries = queryClient.getQueriesData<\r\n                    QueryResponse<TData>\r\n                >(queryKey.resourceAll);\r\n\r\n                if (!(mutationModePropOrContext === \"pessimistic\")) {\r\n                    // Set the previous queries to the new ones:\r\n                    queryClient.setQueriesData(\r\n                        queryKey.list(),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n\r\n                            const data = previous.data.map((record: TData) => {\r\n                                if (\r\n                                    record.id !== undefined &&\r\n                                    ids\r\n                                        .filter((id) => id !== undefined)\r\n                                        .map(String)\r\n                                        .includes(record.id.toString())\r\n                                ) {\r\n                                    return {\r\n                                        ...record,\r\n                                        ...values,\r\n                                    };\r\n                                }\r\n\r\n                                return record;\r\n                            });\r\n\r\n                            return {\r\n                                ...previous,\r\n                                data,\r\n                            };\r\n                        },\r\n                    );\r\n\r\n                    queryClient.setQueriesData(\r\n                        queryKey.many(),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n\r\n                            const data = previous.data.map((record: TData) => {\r\n                                if (\r\n                                    record.id !== undefined &&\r\n                                    ids\r\n                                        .filter((id) => id !== undefined)\r\n                                        .map(String)\r\n                                        .includes(record.id.toString())\r\n                                ) {\r\n                                    return {\r\n                                        ...record,\r\n                                        ...values,\r\n                                    };\r\n                                }\r\n                                return record;\r\n                            });\r\n                            return {\r\n                                ...previous,\r\n                                data,\r\n                            };\r\n                        },\r\n                    );\r\n                    for (const id of ids) {\r\n                        queryClient.setQueriesData(\r\n                            queryKey.detail(id),\r\n                            (previous?: GetListResponse<TData> | null) => {\r\n                                if (!previous) {\r\n                                    return null;\r\n                                }\r\n\r\n                                const data = {\r\n                                    ...previous.data,\r\n                                    ...values,\r\n                                };\r\n                                return {\r\n                                    ...previous,\r\n                                    data,\r\n                                };\r\n                            },\r\n                        );\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    previousQueries,\r\n                    queryKey,\r\n                };\r\n            },\r\n            onSettled: (_data, _error, { ids, resource, dataProviderName }) => {\r\n                // invalidate the cache for the list and many queries:\r\n                invalidateStore({\r\n                    resource,\r\n                    invalidates: [\"list\", \"many\"],\r\n                    dataProviderName,\r\n                });\r\n\r\n                ids.forEach((id) =>\r\n                    invalidateStore({\r\n                        resource,\r\n                        invalidates: [\"detail\"],\r\n                        dataProviderName,\r\n                        id,\r\n                    }),\r\n                );\r\n\r\n                notificationDispatch({\r\n                    type: ActionTypes.REMOVE,\r\n                    payload: { id: ids, resource },\r\n                });\r\n            },\r\n            onSuccess: (\r\n                data,\r\n                { ids, resource, successNotification, values },\r\n            ) => {\r\n                const resourceSingular = pluralize.singular(resource);\r\n\r\n                const notificationConfig =\r\n                    typeof successNotification === \"function\"\r\n                        ? successNotification(data, { ids, values }, resource)\r\n                        : successNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `${ids}-${resource}-notification`,\r\n                    description: translate(\r\n                        \"notifications.success\",\r\n                        \"Successful\",\r\n                    ),\r\n                    message: translate(\r\n                        \"notifications.editSuccess\",\r\n                        {\r\n                            resource: translate(\r\n                                `${resource}.${resource}`,\r\n                                resource,\r\n                            ),\r\n                        },\r\n                        `Successfully updated ${resourceSingular}`,\r\n                    ),\r\n                    type: \"success\",\r\n                });\r\n\r\n                publish?.({\r\n                    channel: `resources/${resource}`,\r\n                    type: \"updated\",\r\n                    payload: {\r\n                        ids: ids.map(String),\r\n                    },\r\n                    date: new Date(),\r\n                });\r\n            },\r\n            onError: (\r\n                err: TError,\r\n                { ids, resource, errorNotification, values },\r\n                context,\r\n            ) => {\r\n                // set back the queries to the context:\r\n                if (context) {\r\n                    for (const query of context.previousQueries) {\r\n                        queryClient.setQueryData(query[0], query[1]);\r\n                    }\r\n                }\r\n\r\n                if (err.message !== \"mutationCancelled\") {\r\n                    checkError?.(err);\r\n\r\n                    const resourceSingular = pluralize.singular(resource);\r\n\r\n                    const notificationConfig =\r\n                        typeof errorNotification === \"function\"\r\n                            ? errorNotification(err, { ids, values }, resource)\r\n                            : errorNotification;\r\n\r\n                    handleNotification(notificationConfig, {\r\n                        key: `${ids}-${resource}-updateMany-error-notification`,\r\n                        message: translate(\r\n                            \"notifications.editError\",\r\n                            {\r\n                                resource: resourceSingular,\r\n                                statusCode: err.statusCode,\r\n                            },\r\n                            `Error when updating ${resourceSingular} (status code: ${err.statusCode})`,\r\n                        ),\r\n                        description: err.message,\r\n                        type: \"error\",\r\n                    });\r\n                }\r\n            },\r\n        },\r\n    );\r\n\r\n    return mutation;\r\n};\r\n","import { useQueryClient, useMutation, UseMutationResult } from \"react-query\";\r\nimport pluralize from \"pluralize\";\r\n\r\nimport {\r\n    DeleteManyResponse,\r\n    HttpError,\r\n    BaseRecord,\r\n    BaseKey,\r\n    MutationMode,\r\n    PreviousQuery,\r\n    GetListResponse,\r\n    PrevContext as DeleteContext,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n    IQueryKeys,\r\n} from \"../../interfaces\";\r\nimport {\r\n    useTranslate,\r\n    useMutationMode,\r\n    useCancelNotification,\r\n    useCheckError,\r\n    usePublish,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n    useInvalidate,\r\n} from \"@hooks\";\r\nimport { ActionTypes } from \"@contexts/undoableQueue\";\r\nimport { queryKeys } from \"@definitions\";\r\n\r\nexport type DeleteManyParams<TVariables> = {\r\n    ids: BaseKey[];\r\n    resource: string;\r\n    mutationMode?: MutationMode;\r\n    undoableTimeout?: number;\r\n    onCancel?: (cancelMutation: () => void) => void;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n    invalidates?: Array<keyof IQueryKeys>;\r\n    values?: TVariables;\r\n} & SuccessErrorNotification;\r\n\r\nexport type UseDeleteManyReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError = HttpError,\r\n    TVariables = {},\r\n> = UseMutationResult<\r\n    DeleteManyResponse<TData>,\r\n    TError,\r\n    DeleteManyParams<TVariables>,\r\n    unknown\r\n>;\r\n\r\n/**\r\n * `useDeleteMany` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/reference/useMutation `useMutation`} for multiple delete mutations.\r\n *\r\n * It uses `deleteMany` method as mutation function from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/data/useDeleteMany} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/core/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/core/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for params. default `{}`\r\n *\r\n */\r\nexport const useDeleteMany = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n>(): UseDeleteManyReturnType<TData, TError, TVariables> => {\r\n    const { mutate: checkError } = useCheckError();\r\n\r\n    const {\r\n        mutationMode: mutationModeContext,\r\n        undoableTimeout: undoableTimeoutContext,\r\n    } = useMutationMode();\r\n    const dataProvider = useDataProvider();\r\n\r\n    const { notificationDispatch } = useCancelNotification();\r\n    const translate = useTranslate();\r\n    const publish = usePublish();\r\n    const handleNotification = useHandleNotification();\r\n    const invalidateStore = useInvalidate();\r\n\r\n    const queryClient = useQueryClient();\r\n\r\n    const mutation = useMutation<\r\n        DeleteManyResponse<TData>,\r\n        TError,\r\n        DeleteManyParams<TVariables>,\r\n        DeleteContext<TData>\r\n    >(\r\n        ({\r\n            resource,\r\n            ids,\r\n            mutationMode,\r\n            undoableTimeout,\r\n            onCancel,\r\n            metaData,\r\n            dataProviderName,\r\n            values,\r\n        }: DeleteManyParams<TVariables>) => {\r\n            const mutationModePropOrContext =\r\n                mutationMode ?? mutationModeContext;\r\n\r\n            const undoableTimeoutPropOrContext =\r\n                undoableTimeout ?? undoableTimeoutContext;\r\n            if (!(mutationModePropOrContext === \"undoable\")) {\r\n                return dataProvider(dataProviderName).deleteMany<TData>({\r\n                    resource,\r\n                    ids,\r\n                    metaData,\r\n                    variables: values,\r\n                });\r\n            }\r\n\r\n            const updatePromise = new Promise<DeleteManyResponse<TData>>(\r\n                (resolve, reject) => {\r\n                    const doMutation = () => {\r\n                        dataProvider(dataProviderName)\r\n                            .deleteMany<TData>({\r\n                                resource,\r\n                                ids,\r\n                                metaData,\r\n                                variables: values,\r\n                            })\r\n                            .then((result) => resolve(result))\r\n                            .catch((err) => reject(err));\r\n                    };\r\n\r\n                    const cancelMutation = () => {\r\n                        reject({ message: \"mutationCancelled\" });\r\n                    };\r\n\r\n                    if (onCancel) {\r\n                        onCancel(cancelMutation);\r\n                    }\r\n\r\n                    notificationDispatch({\r\n                        type: ActionTypes.ADD,\r\n                        payload: {\r\n                            id: ids,\r\n                            resource: resource,\r\n                            cancelMutation: cancelMutation,\r\n                            doMutation: doMutation,\r\n                            seconds: undoableTimeoutPropOrContext,\r\n                            isSilent: !!onCancel,\r\n                        },\r\n                    });\r\n                },\r\n            );\r\n            return updatePromise;\r\n        },\r\n        {\r\n            onMutate: async ({\r\n                ids,\r\n                resource,\r\n                mutationMode,\r\n                dataProviderName,\r\n            }) => {\r\n                const queryKey = queryKeys(resource, dataProviderName);\r\n\r\n                const mutationModePropOrContext =\r\n                    mutationMode ?? mutationModeContext;\r\n\r\n                await queryClient.cancelQueries(\r\n                    queryKey.resourceAll,\r\n                    undefined,\r\n                    {\r\n                        silent: true,\r\n                    },\r\n                );\r\n\r\n                const previousQueries: PreviousQuery<TData>[] =\r\n                    queryClient.getQueriesData(queryKey.resourceAll);\r\n\r\n                if (!(mutationModePropOrContext === \"pessimistic\")) {\r\n                    // Set the previous queries to the new ones:\r\n                    queryClient.setQueriesData(\r\n                        queryKey.list(),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n\r\n                            const data = previous.data.filter(\r\n                                (item) =>\r\n                                    item.id &&\r\n                                    !ids\r\n                                        .map(String)\r\n                                        .includes(item.id.toString()),\r\n                            );\r\n\r\n                            return {\r\n                                data,\r\n                                total: previous.total - 1,\r\n                            };\r\n                        },\r\n                    );\r\n\r\n                    queryClient.setQueriesData(\r\n                        queryKey.many(),\r\n                        (previous?: GetListResponse<TData> | null) => {\r\n                            if (!previous) {\r\n                                return null;\r\n                            }\r\n\r\n                            const data = previous.data.filter(\r\n                                (record: TData) => {\r\n                                    if (record.id) {\r\n                                        return !ids\r\n                                            .map(String)\r\n                                            .includes(record.id.toString());\r\n                                    }\r\n                                    return false;\r\n                                },\r\n                            );\r\n\r\n                            return {\r\n                                ...previous,\r\n                                data,\r\n                            };\r\n                        },\r\n                    );\r\n\r\n                    for (const id of ids) {\r\n                        queryClient.setQueriesData(\r\n                            queryKey.detail(id),\r\n                            (previous?: any | null) => {\r\n                                if (!previous || previous.data.id == id) {\r\n                                    return null;\r\n                                }\r\n                                return {\r\n                                    ...previous,\r\n                                };\r\n                            },\r\n                        );\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    previousQueries,\r\n                    queryKey,\r\n                };\r\n            },\r\n            // Always refetch after error or success:\r\n            onSettled: (\r\n                _data,\r\n                _error,\r\n                {\r\n                    resource,\r\n                    ids,\r\n                    dataProviderName,\r\n                    invalidates = [\"list\", \"many\"],\r\n                },\r\n            ) => {\r\n                // invalidate the cache for the list and many queries:\r\n                invalidateStore({\r\n                    resource,\r\n                    dataProviderName,\r\n                    invalidates,\r\n                });\r\n\r\n                notificationDispatch({\r\n                    type: ActionTypes.REMOVE,\r\n                    payload: { id: ids, resource },\r\n                });\r\n            },\r\n            onSuccess: (\r\n                _data,\r\n                { ids, resource, successNotification },\r\n                context,\r\n            ) => {\r\n                // Remove the queries from the cache:\r\n                ids.forEach((id) =>\r\n                    queryClient.removeQueries(context?.queryKey.detail(id)),\r\n                );\r\n\r\n                const notificationConfig =\r\n                    typeof successNotification === \"function\"\r\n                        ? successNotification(_data, ids, resource)\r\n                        : successNotification;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `${ids}-${resource}-notification`,\r\n                    description: translate(\"notifications.success\", \"Success\"),\r\n                    message: translate(\r\n                        \"notifications.deleteSuccess\",\r\n                        {\r\n                            resource: translate(\r\n                                `${resource}.${resource}`,\r\n                                resource,\r\n                            ),\r\n                        },\r\n                        `Successfully deleted ${resource}`,\r\n                    ),\r\n                    type: \"success\",\r\n                });\r\n\r\n                publish?.({\r\n                    channel: `resources/${resource}`,\r\n                    type: \"deleted\",\r\n                    payload: { ids },\r\n                    date: new Date(),\r\n                });\r\n\r\n                // Remove the queries from the cache:\r\n                ids.forEach((id) =>\r\n                    queryClient.removeQueries(context?.queryKey.detail(id)),\r\n                );\r\n            },\r\n            onError: (err, { ids, resource, errorNotification }, context) => {\r\n                // set back the queries to the context:\r\n                if (context) {\r\n                    for (const query of context.previousQueries) {\r\n                        queryClient.setQueryData(query[0], query[1]);\r\n                    }\r\n                }\r\n\r\n                if (err.message !== \"mutationCancelled\") {\r\n                    checkError(err);\r\n                    const resourceSingular = pluralize.singular(resource);\r\n\r\n                    const notificationConfig =\r\n                        typeof errorNotification === \"function\"\r\n                            ? errorNotification(err, ids, resource)\r\n                            : errorNotification;\r\n\r\n                    handleNotification(notificationConfig, {\r\n                        key: `${ids}-${resource}-notification`,\r\n                        message: translate(\r\n                            \"notifications.deleteError\",\r\n                            {\r\n                                resource: resourceSingular,\r\n                                statusCode: err.statusCode,\r\n                            },\r\n                            `Error (status code: ${err.statusCode})`,\r\n                        ),\r\n                        description: err.message,\r\n                        type: \"error\",\r\n                    });\r\n                }\r\n            },\r\n        },\r\n    );\r\n\r\n    return mutation;\r\n};\r\n","import { useDataProvider } from \"@hooks\";\r\n\r\nexport const useApiUrl = (dataProviderName?: string): string => {\r\n    const dataProvider = useDataProvider();\r\n\r\n    const { getApiUrl } = dataProvider(dataProviderName);\r\n\r\n    return getApiUrl();\r\n};\r\n","import { QueryObserverResult, useQuery, UseQueryOptions } from \"react-query\";\r\n\r\nimport {\r\n    CustomResponse,\r\n    CrudSorting,\r\n    CrudFilters,\r\n    BaseRecord,\r\n    HttpError,\r\n    MetaDataQuery,\r\n    SuccessErrorNotification,\r\n} from \"../../interfaces\";\r\nimport {\r\n    useTranslate,\r\n    useCheckError,\r\n    useHandleNotification,\r\n    useDataProvider,\r\n} from \"@hooks\";\r\n\r\ninterface UseCustomConfig<TQuery, TPayload> {\r\n    sort?: CrudSorting;\r\n    filters?: CrudFilters;\r\n    query?: TQuery;\r\n    payload?: TPayload;\r\n    headers?: {};\r\n}\r\n\r\nexport type UseCustomProps<TData, TError, TQuery, TPayload> = {\r\n    url: string;\r\n    method: \"get\" | \"delete\" | \"head\" | \"options\" | \"post\" | \"put\" | \"patch\";\r\n    config?: UseCustomConfig<TQuery, TPayload>;\r\n    queryOptions?: UseQueryOptions<CustomResponse<TData>, TError>;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n} & SuccessErrorNotification;\r\n\r\n/**\r\n * `useCustom` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/guides/queries `useQuery`} used for custom requests.\r\n *\r\n * It uses the `custom` method from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/data/useCustom} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/core/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/core/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TQuery - Values for query params\r\n * @typeParam TPayload - Values for params\r\n *\r\n */\r\nexport const useCustom = <\r\n    TData = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TQuery = unknown,\r\n    TPayload = unknown,\r\n>({\r\n    url,\r\n    method,\r\n    config,\r\n    queryOptions,\r\n    successNotification,\r\n    errorNotification,\r\n    metaData,\r\n    dataProviderName,\r\n}: UseCustomProps<TData, TError, TQuery, TPayload>): QueryObserverResult<\r\n    CustomResponse<TData>,\r\n    TError\r\n> => {\r\n    const dataProvider = useDataProvider();\r\n\r\n    const { custom } = dataProvider(dataProviderName);\r\n    const { mutate: checkError } = useCheckError();\r\n    const translate = useTranslate();\r\n    const handleNotification = useHandleNotification();\r\n\r\n    if (custom) {\r\n        const queryResponse = useQuery<CustomResponse<TData>, TError>(\r\n            [\r\n                dataProviderName,\r\n                \"custom\",\r\n                method,\r\n                url,\r\n                { ...config, ...metaData },\r\n            ],\r\n            () => custom<TData>({ url, method, ...config, metaData }),\r\n            {\r\n                ...queryOptions,\r\n                onSuccess: (data) => {\r\n                    queryOptions?.onSuccess?.(data);\r\n\r\n                    const notificationConfig =\r\n                        typeof successNotification === \"function\"\r\n                            ? successNotification(data, {\r\n                                  ...config,\r\n                                  ...metaData,\r\n                              })\r\n                            : successNotification;\r\n\r\n                    handleNotification(notificationConfig);\r\n                },\r\n                onError: (err: TError) => {\r\n                    checkError(err);\r\n                    queryOptions?.onError?.(err);\r\n\r\n                    const notificationConfig =\r\n                        typeof errorNotification === \"function\"\r\n                            ? errorNotification(err, { ...config, ...metaData })\r\n                            : errorNotification;\r\n\r\n                    handleNotification(notificationConfig, {\r\n                        key: `${method}-notification`,\r\n                        message: translate(\r\n                            \"common:notifications.error\",\r\n                            { statusCode: err.statusCode },\r\n                            `Error (status code: ${err.statusCode})`,\r\n                        ),\r\n                        description: err.message,\r\n                        type: \"error\",\r\n                    });\r\n                },\r\n            },\r\n        );\r\n        return queryResponse;\r\n    } else {\r\n        throw Error(\"Not implemented custom on data provider.\");\r\n    }\r\n};\r\n","import { useMutation, UseMutationResult } from \"react-query\";\r\n\r\nimport { useDataProvider, useHandleNotification, useTranslate } from \"@hooks\";\r\nimport {\r\n    CreateResponse,\r\n    BaseRecord,\r\n    HttpError,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n} from \"../../interfaces\";\r\n\r\ninterface UseCustomMutationConfig {\r\n    headers?: {};\r\n}\r\n\r\ntype useCustomMutationParams<TVariables> = {\r\n    url: string;\r\n    method: \"post\" | \"put\" | \"patch\" | \"delete\";\r\n    values: TVariables;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n    config?: UseCustomMutationConfig;\r\n} & SuccessErrorNotification;\r\n\r\nexport type UseCustomMutationReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n> = UseMutationResult<\r\n    CreateResponse<TData>,\r\n    TError,\r\n    useCustomMutationParams<TVariables>,\r\n    unknown\r\n>;\r\n\r\n/**\r\n * `useCustomMutation` is a modified version of `react-query`'s {@link https://react-query.tanstack.com/reference/useMutation `useMutation`} for create mutations.\r\n *\r\n * It uses the `custom` method from the `dataProvider` which is passed to `<Refine>`.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/hooks/data/useCustomMutation} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/api-references/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/api-references/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for mutation function\r\n *\r\n */\r\n\r\nexport const useCustomMutation = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n>(): UseCustomMutationReturnType<TData, TError, TVariables> => {\r\n    const handleNotification = useHandleNotification();\r\n    const dataProvider = useDataProvider();\r\n    const translate = useTranslate();\r\n\r\n    const mutation = useMutation<\r\n        CreateResponse<TData>,\r\n        TError,\r\n        useCustomMutationParams<TVariables>,\r\n        unknown\r\n    >(\r\n        ({\r\n            url,\r\n            method,\r\n            values,\r\n            metaData,\r\n            dataProviderName,\r\n            config,\r\n        }: useCustomMutationParams<TVariables>) => {\r\n            const { custom } = dataProvider(dataProviderName);\r\n\r\n            if (custom) {\r\n                return custom<TData>({\r\n                    url,\r\n                    method,\r\n                    payload: values,\r\n                    metaData,\r\n                    headers: { ...config?.headers },\r\n                });\r\n            }\r\n\r\n            throw Error(\"Not implemented custom on data provider.\");\r\n        },\r\n        {\r\n            onSuccess: (\r\n                data,\r\n                {\r\n                    successNotification: successNotificationFromProp,\r\n                    config,\r\n                    metaData,\r\n                },\r\n            ) => {\r\n                const notificationConfig =\r\n                    typeof successNotificationFromProp === \"function\"\r\n                        ? successNotificationFromProp(data, {\r\n                              ...config,\r\n                              ...metaData,\r\n                          })\r\n                        : successNotificationFromProp;\r\n\r\n                handleNotification(notificationConfig);\r\n            },\r\n            onError: (\r\n                err: TError,\r\n                {\r\n                    errorNotification: errorNotificationFromProp,\r\n                    method,\r\n                    config,\r\n                    metaData,\r\n                },\r\n            ) => {\r\n                const notificationConfig =\r\n                    typeof errorNotificationFromProp === \"function\"\r\n                        ? errorNotificationFromProp(err, {\r\n                              ...config,\r\n                              ...metaData,\r\n                          })\r\n                        : errorNotificationFromProp;\r\n\r\n                handleNotification(notificationConfig, {\r\n                    key: `${method}-notification`,\r\n                    message: translate(\r\n                        \"common:notifications.error\",\r\n                        { statusCode: err.statusCode },\r\n                        `Error (status code: ${err.statusCode})`,\r\n                    ),\r\n                    description: err.message,\r\n                    type: \"error\",\r\n                });\r\n            },\r\n        },\r\n    );\r\n\r\n    return mutation;\r\n};\r\n","import { useCallback, useContext } from \"react\";\r\n\r\nimport { DataContext } from \"@contexts/data\";\r\nimport {\r\n    IDataContextProvider,\r\n    IDataMultipleContextProvider,\r\n} from \"../../interfaces\";\r\n\r\nexport const useDataProvider = (): ((\r\n    dataProviderName?: string,\r\n) => IDataContextProvider) => {\r\n    const context = useContext<IDataMultipleContextProvider>(DataContext);\r\n\r\n    const handleDataProvider = useCallback(\r\n        (dataProviderName?: string) => {\r\n            if (dataProviderName) {\r\n                const dataProvider = context[dataProviderName];\r\n                if (!dataProvider) {\r\n                    throw new Error(\r\n                        `\"${dataProviderName}\" Data provider not found`,\r\n                    );\r\n                }\r\n                return context[dataProviderName];\r\n            }\r\n            if (context.default) {\r\n                return context.default;\r\n            } else\r\n                throw new Error(\r\n                    `There is no \"default\" data provider. Please pass dataProviderName.`,\r\n                );\r\n        },\r\n        [context],\r\n    );\r\n\r\n    return handleDataProvider;\r\n};\r\n","import React from \"react\";\r\nimport { ReactNode } from \"react\";\r\n\r\nimport {\r\n    IDataContextProvider,\r\n    IDataMultipleContextProvider,\r\n} from \"../../interfaces\";\r\n\r\nexport const defaultDataProvider = () => {\r\n    return {\r\n        default: {\r\n            create: () => Promise.resolve({ data: { id: 1 } }),\r\n            createMany: () => Promise.resolve({ data: [] }),\r\n            deleteOne: () => Promise.resolve({ data: { id: 1 } }),\r\n            deleteMany: () => Promise.resolve({ data: [] }),\r\n            getList: () => Promise.resolve({ data: [], total: 0 }),\r\n            getMany: () => Promise.resolve({ data: [] }),\r\n            getOne: () => Promise.resolve({ data: { id: 1 } }),\r\n            update: () => Promise.resolve({ data: { id: 1 } }),\r\n            updateMany: () => Promise.resolve({ data: [] }),\r\n            custom: () => Promise.resolve({ data: {} }),\r\n            getApiUrl: () => \"\",\r\n        },\r\n    };\r\n};\r\n\r\nexport const DataContext = React.createContext<IDataMultipleContextProvider>(\r\n    defaultDataProvider() as IDataMultipleContextProvider,\r\n);\r\n\r\nexport const DataContextProvider: React.FC<\r\n    | IDataMultipleContextProvider\r\n    | (IDataContextProvider & {\r\n          children: ReactNode;\r\n      })\r\n> = ({ children, ...rest }) => {\r\n    let dataProviders;\r\n    if (\r\n        !rest.hasOwnProperty(\"updateMany\") ||\r\n        !rest.hasOwnProperty(\"createMany\")\r\n    ) {\r\n        dataProviders = rest as IDataMultipleContextProvider;\r\n    } else {\r\n        dataProviders = {\r\n            default: rest,\r\n        } as IDataMultipleContextProvider;\r\n    }\r\n    return (\r\n        <DataContext.Provider value={dataProviders}>\r\n            {children}\r\n        </DataContext.Provider>\r\n    );\r\n};\r\n","import { useContext, useEffect } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport {\r\n    BaseKey,\r\n    CrudFilters,\r\n    CrudSorting,\r\n    ILiveContext,\r\n    IRefineContext,\r\n    LiveEvent,\r\n    LiveModeProps,\r\n    MetaDataQuery,\r\n    Pagination,\r\n} from \"../../../interfaces\";\r\nimport { LiveContext } from \"@contexts/live\";\r\nimport { RefineContext } from \"@contexts/refine\";\r\nimport { queryKeys } from \"@definitions\";\r\n\r\nexport type UseResourceSubscriptionProps = {\r\n    channel: string;\r\n    params?: {\r\n        ids?: BaseKey[];\r\n        id?: BaseKey;\r\n        metaData?: MetaDataQuery;\r\n        pagination?: Pagination;\r\n        hasPagination?: boolean;\r\n        sort?: CrudSorting;\r\n        filters?: CrudFilters;\r\n        subscriptionType: \"useList\" | \"useOne\" | \"useMany\";\r\n        [key: string]: any;\r\n    };\r\n    types: LiveEvent[\"type\"][];\r\n    resource: string;\r\n    enabled?: boolean;\r\n} & LiveModeProps;\r\n\r\nexport type PublishType = {\r\n    (event: LiveEvent): void;\r\n};\r\n\r\nexport const useResourceSubscription = ({\r\n    resource,\r\n    params,\r\n    channel,\r\n    types,\r\n    enabled = true,\r\n    liveMode: liveModeFromProp,\r\n    onLiveEvent,\r\n}: UseResourceSubscriptionProps): void => {\r\n    const queryClient = useQueryClient();\r\n    const queryKey = queryKeys(resource);\r\n\r\n    const liveDataContext = useContext<ILiveContext>(LiveContext);\r\n    const {\r\n        liveMode: liveModeFromContext,\r\n        onLiveEvent: onLiveEventContextCallback,\r\n    } = useContext<IRefineContext>(RefineContext);\r\n\r\n    const liveMode = liveModeFromProp ?? liveModeFromContext;\r\n\r\n    useEffect(() => {\r\n        let subscription: any;\r\n\r\n        if (liveMode && liveMode !== \"off\" && enabled) {\r\n            subscription = liveDataContext?.subscribe({\r\n                channel,\r\n                params: {\r\n                    resource,\r\n                    ...params,\r\n                },\r\n                types,\r\n                callback: (event) => {\r\n                    if (liveMode === \"auto\") {\r\n                        queryClient.invalidateQueries(queryKey.resourceAll);\r\n                    }\r\n\r\n                    onLiveEvent?.(event);\r\n                    onLiveEventContextCallback?.(event);\r\n                },\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            if (subscription) {\r\n                liveDataContext?.unsubscribe(subscription);\r\n            }\r\n        };\r\n    }, [enabled]);\r\n};\r\n","import React from \"react\";\r\n\r\nimport { ILiveContext, ILiveContextProvider } from \"./ILiveContext\";\r\n\r\nexport const LiveContext = React.createContext<ILiveContext>(undefined);\r\n\r\nexport const LiveContextProvider: React.FC<ILiveContextProvider> = ({\r\n    liveProvider,\r\n    children,\r\n}) => {\r\n    return (\r\n        <LiveContext.Provider value={liveProvider}>\r\n            {children}\r\n        </LiveContext.Provider>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\nimport { IRefineContext, IRefineContextProvider } from \"./IRefineContext\";\r\nimport { DefaultLayout } from \"@components/layoutWrapper/defaultLayout\";\r\n\r\nimport { LoginPage as DefaultLoginPage } from \"@components/pages\";\r\n\r\nexport const RefineContext = React.createContext<IRefineContext>({\r\n    hasDashboard: false,\r\n    mutationMode: \"pessimistic\",\r\n    warnWhenUnsavedChanges: false,\r\n    syncWithLocation: false,\r\n    undoableTimeout: 5000,\r\n    Title: undefined,\r\n    Sider: undefined,\r\n    Header: undefined,\r\n    Footer: undefined,\r\n    Layout: DefaultLayout,\r\n    OffLayoutArea: undefined,\r\n    liveMode: \"off\",\r\n    onLiveEvent: undefined,\r\n});\r\n\r\nexport const RefineContextProvider: React.FC<IRefineContextProvider> = ({\r\n    hasDashboard,\r\n    mutationMode,\r\n    warnWhenUnsavedChanges,\r\n    syncWithLocation,\r\n    undoableTimeout,\r\n    children,\r\n    DashboardPage,\r\n    Title,\r\n    Layout = DefaultLayout,\r\n    Header,\r\n    Sider,\r\n    Footer,\r\n    OffLayoutArea,\r\n    LoginPage = DefaultLoginPage,\r\n    catchAll,\r\n    liveMode = \"off\",\r\n    onLiveEvent,\r\n}) => {\r\n    return (\r\n        <RefineContext.Provider\r\n            value={{\r\n                hasDashboard,\r\n                mutationMode,\r\n                warnWhenUnsavedChanges,\r\n                syncWithLocation,\r\n                Title,\r\n                undoableTimeout,\r\n                Layout,\r\n                Header,\r\n                Sider,\r\n                Footer,\r\n                OffLayoutArea,\r\n                DashboardPage,\r\n                LoginPage,\r\n                catchAll,\r\n                liveMode,\r\n                onLiveEvent,\r\n            }}\r\n        >\r\n            {children}\r\n        </RefineContext.Provider>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\nimport { LayoutProps } from \"../../../interfaces\";\r\n\r\nexport const DefaultLayout: React.FC<LayoutProps> = ({ children }) => {\r\n    return <div>{children}</div>;\r\n};\r\n","import { useContext } from \"react\";\r\nimport { LiveModeProps, IRefineContext } from \"../../../interfaces\";\r\nimport { RefineContext } from \"@contexts/refine\";\r\n\r\nexport const useLiveMode = (\r\n    liveMode: LiveModeProps[\"liveMode\"],\r\n): LiveModeProps[\"liveMode\"] => {\r\n    const { liveMode: liveModeFromContext } =\r\n        useContext<IRefineContext>(RefineContext);\r\n\r\n    return liveMode ?? liveModeFromContext;\r\n};\r\n","import { useContext, useEffect } from \"react\";\r\n\r\nimport { LiveContext } from \"@contexts/live\";\r\nimport {\r\n    BaseKey,\r\n    CrudFilters,\r\n    CrudSorting,\r\n    ILiveContext,\r\n    LiveEvent,\r\n    MetaDataQuery,\r\n    Pagination,\r\n} from \"../../../interfaces\";\r\n\r\nexport type UseSubscriptionProps = {\r\n    channel: string;\r\n    onLiveEvent: (event: LiveEvent) => void;\r\n    params?: {\r\n        ids?: BaseKey[];\r\n        id?: BaseKey;\r\n        metaData?: MetaDataQuery;\r\n        pagination?: Pagination;\r\n        hasPagination?: boolean;\r\n        sort?: CrudSorting;\r\n        filters?: CrudFilters;\r\n        subscriptionType?: \"useList\" | \"useOne\" | \"useMany\";\r\n        resource?: string;\r\n        [key: string]: any;\r\n    };\r\n    types?: LiveEvent[\"type\"][];\r\n    enabled?: boolean;\r\n};\r\n\r\nexport const useSubscription = ({\r\n    params,\r\n    channel,\r\n    types = [\"*\"],\r\n    enabled = true,\r\n    onLiveEvent,\r\n}: UseSubscriptionProps): void => {\r\n    const liveDataContext = useContext<ILiveContext>(LiveContext);\r\n\r\n    useEffect(() => {\r\n        let subscription: any;\r\n\r\n        if (enabled) {\r\n            subscription = liveDataContext?.subscribe({\r\n                channel,\r\n                params,\r\n                types,\r\n                callback: onLiveEvent,\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            if (subscription) {\r\n                liveDataContext?.unsubscribe(subscription);\r\n            }\r\n        };\r\n    }, [enabled]);\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { LiveContext } from \"@contexts/live\";\r\nimport { ILiveContext } from \"../../../interfaces\";\r\n\r\nexport const usePublish: () => NonNullable<ILiveContext>[\"publish\"] = () => {\r\n    const liveContext = useContext<ILiveContext>(LiveContext);\r\n\r\n    return liveContext?.publish;\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { ResourceContext, IResourceContext } from \"@contexts/resource\";\r\nimport { BaseKey, IResourceItem, ResourceRouterParams } from \"src/interfaces\";\r\nimport { useRouterContext, useResourceWithRoute } from \"@hooks\";\r\n\r\nexport type UseResourcePropsType = {\r\n    /**\r\n     * @deprecated resourceName deprecated. Use resourceNameOrRouteName instead # https://github.com/pankod/refine/issues/1618\r\n     */\r\n    resourceName?: string;\r\n    resourceNameOrRouteName?: string;\r\n    recordItemId?: BaseKey;\r\n};\r\n\r\ntype UseResourceReturnType = {\r\n    resources: IResourceContext[\"resources\"];\r\n    resource: IResourceItem;\r\n    resourceName: string;\r\n    id?: BaseKey;\r\n};\r\n\r\n/**\r\n * `useResource` is used to get `resources` that are defined as property of the `<Refine>` component.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/resource/useResource} for more details.\r\n */\r\nexport const useResource = ({\r\n    resourceName: propResourceName,\r\n    resourceNameOrRouteName,\r\n    recordItemId,\r\n}: UseResourcePropsType = {}): UseResourceReturnType => {\r\n    const { resources } = useContext(ResourceContext);\r\n\r\n    const resourceWithRoute = useResourceWithRoute();\r\n\r\n    const { useParams } = useRouterContext();\r\n\r\n    const params = useParams<ResourceRouterParams>();\r\n\r\n    const resource = resourceWithRoute(\r\n        resourceNameOrRouteName ?? params.resource,\r\n    );\r\n\r\n    const resourceName = propResourceName ?? resource.name;\r\n\r\n    const id = recordItemId ?? params.id;\r\n\r\n    return { resources, resource, resourceName, id };\r\n};\r\n","import React, { ReactNode } from \"react\";\r\n\r\nimport { IResourceContext } from \"./IResourceContext\";\r\n\r\nexport {\r\n    IResourceItem,\r\n    IResourceComponents,\r\n    IResourceComponentsProps,\r\n    IResourceContext,\r\n} from \"./IResourceContext\";\r\n\r\nexport const ResourceContext = React.createContext<IResourceContext>({\r\n    resources: [],\r\n});\r\n\r\nexport const ResourceContextProvider: React.FC<\r\n    IResourceContext & { children: ReactNode }\r\n> = ({ resources, children }) => {\r\n    return (\r\n        <ResourceContext.Provider value={{ resources }}>\r\n            {children}\r\n        </ResourceContext.Provider>\r\n    );\r\n};\r\n","import { useContext, useCallback } from \"react\";\r\nimport { ResourceContext } from \"@contexts/resource\";\r\nimport { IResourceItem } from \"../../../interfaces\";\r\n\r\nexport type UseResourceWithRouteReturnType = (route: string) => IResourceItem;\r\n\r\nexport const useResourceWithRoute = (): UseResourceWithRouteReturnType => {\r\n    const { resources } = useContext(ResourceContext);\r\n\r\n    const resourceWithRoute = useCallback(\r\n        (route: string) => {\r\n            const resource = resources.find((p) => p.route === route);\r\n\r\n            if (!resource) {\r\n                const resourceWithName = resources.find(\r\n                    (p) => p.name === route,\r\n                );\r\n                return (\r\n                    resourceWithName ??\r\n                    ({ name: route, route: route } as IResourceItem)\r\n                );\r\n            }\r\n            return resource;\r\n        },\r\n        [resources],\r\n    );\r\n\r\n    return resourceWithRoute;\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { UndoableQueueContext } from \"@contexts/undoableQueue\";\r\nimport { IUndoableQueue, IUndoableQueueContext } from \"../../../interfaces\";\r\n\r\nexport type UseCancelNotificationType = () => {\r\n    notifications: IUndoableQueue[];\r\n    notificationDispatch: React.Dispatch<any>;\r\n};\r\n\r\nexport const useCancelNotification: UseCancelNotificationType = () => {\r\n    const { notifications, notificationDispatch } =\r\n        useContext<IUndoableQueueContext>(UndoableQueueContext);\r\n\r\n    return { notifications, notificationDispatch };\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { NotificationContext } from \"@contexts/notification\";\r\nimport { INotificationContext } from \"../../../interfaces\";\r\n\r\nexport const useNotification = (): INotificationContext => {\r\n    const { open, close } = useContext(NotificationContext);\r\n\r\n    return { open, close };\r\n};\r\n","import React, { createContext } from \"react\";\r\n\r\nimport { INotificationContext } from \"./INotificationContext\";\r\n\r\n/** @deprecated default value for notification context has no use and is an empty object.  */\r\nexport const defaultNotificationProvider: INotificationContext = {};\r\n\r\nexport const NotificationContext = createContext<INotificationContext>({});\r\n\r\nexport const NotificationContextProvider: React.FC<\r\n    INotificationContext & {\r\n        children?: React.ReactNode;\r\n    }\r\n> = ({ open, close, children }) => {\r\n    return (\r\n        <NotificationContext.Provider value={{ open, close }}>\r\n            {children}\r\n        </NotificationContext.Provider>\r\n    );\r\n};\r\n","import { useCallback } from \"react\";\r\n\r\nimport { OpenNotificationParams } from \"../../../interfaces\";\r\nimport { useNotification } from \"@hooks\";\r\n\r\nexport const useHandleNotification = (): typeof handleNotification => {\r\n    const { open } = useNotification();\r\n\r\n    const handleNotification = useCallback(\r\n        (\r\n            notification: OpenNotificationParams | false | undefined,\r\n            fallbackNotification?: OpenNotificationParams,\r\n        ) => {\r\n            if (notification !== false) {\r\n                if (notification) {\r\n                    open?.(notification);\r\n                } else if (fallbackNotification) {\r\n                    open?.(fallbackNotification);\r\n                }\r\n            }\r\n        },\r\n        [],\r\n    );\r\n\r\n    return handleNotification;\r\n};\r\n","import { useCallback, useContext } from \"react\";\r\nimport { TranslationContext } from \"@contexts/translation\";\r\n\r\n/**\r\n * If you need to change the locale at runtime, refine provides the `useSetLocale` hook.\r\n * It returns the changeLocale method from `i18nProvider` under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/translate/useSetLocale} for more details.\r\n */\r\nexport const useSetLocale = () => {\r\n    const { i18nProvider } = useContext(TranslationContext);\r\n\r\n    return useCallback((lang: string) => i18nProvider?.changeLocale(lang), []);\r\n};\r\n","import React from \"react\";\r\n\r\nimport { ITranslationContext } from \"../../interfaces\";\r\n\r\n/** @deprecated default value for translation context has no use and is an empty object.  */\r\nexport const defaultProvider: ITranslationContext = {};\r\n\r\nexport const TranslationContext = React.createContext<ITranslationContext>({});\r\n\r\nexport const TranslationContextProvider: React.FC<\r\n    ITranslationContext & {\r\n        children?: React.ReactNode;\r\n    }\r\n> = ({ children, i18nProvider }) => {\r\n    return (\r\n        <TranslationContext.Provider\r\n            value={{\r\n                i18nProvider: i18nProvider,\r\n            }}\r\n        >\r\n            {children}\r\n        </TranslationContext.Provider>\r\n    );\r\n};\r\n","import { useContext, useMemo } from \"react\";\r\nimport { TranslationContext } from \"@contexts/translation\";\r\n\r\n/**\r\n * If you need to translate the texts in your own components, refine provides the `useTranslate` hook.\r\n * It returns the translate method from `i18nProvider` under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/translate/useTranslate} for more details.\r\n */\r\nexport const useTranslate = () => {\r\n    const { i18nProvider } = useContext(TranslationContext);\r\n\r\n    const fn = useMemo(() => {\r\n        function translate(\r\n            key: string,\r\n            options?: any,\r\n            defaultMessage?: string,\r\n        ): string;\r\n        function translate(key: string, defaultMessage?: string): string;\r\n\r\n        function translate(\r\n            key: string,\r\n            options?: string | any,\r\n            defaultMessage?: string,\r\n        ) {\r\n            return (\r\n                i18nProvider?.translate(key, options, defaultMessage) ??\r\n                defaultMessage ??\r\n                (typeof options === \"string\" &&\r\n                typeof defaultMessage === \"undefined\"\r\n                    ? options\r\n                    : key)\r\n            );\r\n        }\r\n\r\n        return translate;\r\n    }, [i18nProvider]);\r\n\r\n    return fn;\r\n};\r\n","import { useContext, useCallback } from \"react\";\r\nimport { TranslationContext } from \"@contexts/translation\";\r\n\r\nexport type UseGetLocaleType = () => () => string | undefined;\r\n\r\n/**\r\n * If you need to know the current locale, refine provides the `useGetLocale` hook.\r\n * It returns the `getLocale` method from `i18nProvider` under the hood.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/translate/useGetLocale} for more details.\r\n */\r\nexport const useGetLocale: UseGetLocaleType = () => {\r\n    const { i18nProvider } = useContext(TranslationContext);\r\n\r\n    return useCallback(() => i18nProvider?.getLocale(), []);\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { RefineContext } from \"@contexts/refine\";\r\nimport { IRefineContext } from \"../../interfaces\";\r\n\r\ntype UseMutationModeType = () => {\r\n    mutationMode: IRefineContext[\"mutationMode\"];\r\n    undoableTimeout: IRefineContext[\"undoableTimeout\"];\r\n};\r\n\r\n/**\r\n * Mutation mode determines which mode the mutation runs with.\r\n * Mutations can run under three different modes: `pessimistic`, `optimistic` and `undoable`.\r\n * Each mode corresponds to a different type of user experience.\r\n *\r\n * @see {@link https://refine.dev/docs/guides-and-concepts/mutation-mode} for more details.\r\n */\r\nexport const useMutationMode: UseMutationModeType = () => {\r\n    const { mutationMode, undoableTimeout } = useContext(RefineContext);\r\n\r\n    return { mutationMode, undoableTimeout };\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { RefineContext } from \"@contexts/refine\";\r\nimport { UnsavedWarnContext } from \"@contexts/unsavedWarn\";\r\nimport { IRefineContext, IUnsavedWarnContext } from \"../../../interfaces\";\r\n\r\ntype UseWarnAboutChangeType = () => {\r\n    warnWhenUnsavedChanges: IRefineContext[\"warnWhenUnsavedChanges\"];\r\n    warnWhen: NonNullable<IUnsavedWarnContext[\"warnWhen\"]>;\r\n    setWarnWhen: NonNullable<IUnsavedWarnContext[\"setWarnWhen\"]>;\r\n};\r\n\r\n/**\r\n * When you have unsaved changes and try to leave the current page, **refine** shows a confirmation modal box.\r\n * To activate this feature, set the `warnWhenUnsavedChanges` to `true`.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/components/refine-config#warnwhenunsavedchanges} for more details.\r\n */\r\nexport const useWarnAboutChange: UseWarnAboutChangeType = () => {\r\n    const { warnWhenUnsavedChanges } = useContext(RefineContext);\r\n\r\n    const { warnWhen, setWarnWhen } = useContext(UnsavedWarnContext);\r\n\r\n    return {\r\n        warnWhenUnsavedChanges,\r\n        warnWhen: Boolean(warnWhen),\r\n        setWarnWhen: setWarnWhen ?? (() => undefined),\r\n    };\r\n};\r\n","import React, { ReactNode, useState } from \"react\";\r\n\r\nimport { IUnsavedWarnContext } from \"./IUnsavedWarnContext\";\r\n\r\nexport const UnsavedWarnContext = React.createContext<IUnsavedWarnContext>({});\r\n\r\nexport const UnsavedWarnContextProvider: React.FC<{ children: ReactNode }> = ({\r\n    children,\r\n}) => {\r\n    const [warnWhen, setWarnWhen] = useState(false);\r\n\r\n    return (\r\n        <UnsavedWarnContext.Provider value={{ warnWhen, setWarnWhen }}>\r\n            {children}\r\n        </UnsavedWarnContext.Provider>\r\n    );\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { RefineContext } from \"@contexts/refine\";\r\nimport { IRefineContext } from \"../../interfaces\";\r\n\r\ntype UseSyncWithLocationType = () => {\r\n    syncWithLocation: IRefineContext[\"syncWithLocation\"];\r\n};\r\n\r\n/**\r\n * List query parameter values can be edited manually by typing directly in the URL.\r\n * To activate this feature `syncWithLocation` needs to be set to `true`.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/components/refine-config#syncwithlocation} for more details.\r\n */\r\nexport const useSyncWithLocation: UseSyncWithLocationType = () => {\r\n    const { syncWithLocation } = useContext(RefineContext);\r\n\r\n    return { syncWithLocation };\r\n};\r\n","import { useContext } from \"react\";\r\nimport { RefineContext } from \"@contexts/refine\";\r\nimport { TitleProps } from \"../../interfaces\";\r\n\r\n/**\r\n * `useTitle` returns a component that calls the `<Title>` passed to the `<Refine>`.\r\n * In this way, it becomes easier for us to access this component in various parts of the application.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/refine/useTitle} for more details.\r\n */\r\nexport const useTitle: () => React.FC<TitleProps> | undefined = () => {\r\n    const { Title } = useContext(RefineContext);\r\n\r\n    return Title;\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { RefineContext } from \"@contexts/refine\";\r\n\r\nexport const useRefineContext = () => {\r\n    const {\r\n        Footer,\r\n        Header,\r\n        Layout,\r\n        OffLayoutArea,\r\n        Sider,\r\n        Title,\r\n        hasDashboard,\r\n        mutationMode,\r\n        syncWithLocation,\r\n        undoableTimeout,\r\n        warnWhenUnsavedChanges,\r\n        DashboardPage,\r\n        LoginPage,\r\n        catchAll,\r\n    } = useContext(RefineContext);\r\n\r\n    return {\r\n        Footer,\r\n        Header,\r\n        Layout,\r\n        OffLayoutArea,\r\n        Sider,\r\n        Title,\r\n        hasDashboard,\r\n        mutationMode,\r\n        syncWithLocation,\r\n        undoableTimeout,\r\n        warnWhenUnsavedChanges,\r\n        DashboardPage,\r\n        LoginPage,\r\n        catchAll,\r\n    };\r\n};\r\n","import { useState } from \"react\";\r\nimport {\r\n    useResourceWithRoute,\r\n    useRouterContext,\r\n    useDataProvider,\r\n} from \"@hooks\";\r\nimport {\r\n    ResourceRouterParams,\r\n    BaseRecord,\r\n    MapDataFn,\r\n    CrudSorting,\r\n    CrudFilters,\r\n    MetaDataQuery,\r\n} from \"../../interfaces\";\r\nimport { userFriendlyResourceName } from \"@definitions\";\r\nimport { ExportToCsv, Options } from \"export-to-csv-fix-source-map\";\r\n\r\ntype UseExportOptionsType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TVariables = any,\r\n> = {\r\n    resourceName?: string;\r\n    mapData?: MapDataFn<TData, TVariables>;\r\n    sorter?: CrudSorting;\r\n    filters?: CrudFilters;\r\n    maxItemCount?: number;\r\n    pageSize?: number;\r\n    exportOptions?: Options;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n    onError?: (error: any) => void;\r\n};\r\n\r\ntype UseExportReturnType = {\r\n    isLoading: boolean;\r\n    triggerExport: () => Promise<void>;\r\n};\r\n\r\n/**\r\n * `useExport` hook allows you to make your resources exportable.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/import-export/useExport} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/api-references/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TVariables - Values for params.\r\n *\r\n */\r\nexport const useExport = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TVariables = any,\r\n>({\r\n    resourceName,\r\n    sorter,\r\n    filters,\r\n    maxItemCount,\r\n    pageSize = 20,\r\n    mapData = (item) => item as any,\r\n    exportOptions,\r\n    metaData,\r\n    dataProviderName,\r\n    onError,\r\n}: UseExportOptionsType<TData, TVariables> = {}): UseExportReturnType => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const resourceWithRoute = useResourceWithRoute();\r\n    const dataProvider = useDataProvider();\r\n\r\n    const { useParams } = useRouterContext();\r\n\r\n    const { resource: routeResourceName } = useParams<ResourceRouterParams>();\r\n    let { name: resource } = resourceWithRoute(routeResourceName);\r\n\r\n    if (resourceName) {\r\n        resource = resourceName;\r\n    }\r\n\r\n    const filename = `${userFriendlyResourceName(\r\n        resource,\r\n        \"plural\",\r\n    )}-${new Date().toLocaleString()}`;\r\n\r\n    const { getList } = dataProvider(dataProviderName);\r\n\r\n    const triggerExport = async () => {\r\n        setIsLoading(true);\r\n\r\n        let rawData: BaseRecord[] = [];\r\n\r\n        let current = 1;\r\n        let preparingData = true;\r\n        while (preparingData) {\r\n            try {\r\n                const { data, total } = await getList<TData>({\r\n                    resource,\r\n                    filters,\r\n                    sort: sorter,\r\n                    pagination: {\r\n                        current,\r\n                        pageSize,\r\n                    },\r\n                    metaData,\r\n                });\r\n\r\n                current++;\r\n\r\n                rawData.push(...data);\r\n\r\n                if (maxItemCount && rawData.length >= maxItemCount) {\r\n                    rawData = rawData.slice(0, maxItemCount);\r\n                    preparingData = false;\r\n                }\r\n\r\n                if (total === rawData.length) {\r\n                    preparingData = false;\r\n                }\r\n            } catch (error) {\r\n                setIsLoading(false);\r\n                preparingData = false;\r\n\r\n                onError?.(error);\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n        const csvExporter = new ExportToCsv({\r\n            filename,\r\n            useKeysAsHeaders: true,\r\n            ...exportOptions,\r\n        });\r\n\r\n        csvExporter.generateCsv(rawData.map(mapData as any));\r\n\r\n        setIsLoading(false);\r\n    };\r\n\r\n    return {\r\n        isLoading,\r\n        triggerExport,\r\n    };\r\n};\r\n","import React, { Dispatch, SetStateAction } from \"react\";\r\nimport { QueryObserverResult, UseQueryOptions } from \"react-query\";\r\n\r\nimport {\r\n    useResourceWithRoute,\r\n    useRouterContext,\r\n    useWarnAboutChange,\r\n    useCreate,\r\n    useUpdate,\r\n    useRedirectionAfterSubmission,\r\n    useMutationMode,\r\n    useOne,\r\n} from \"@hooks\";\r\n\r\nimport {\r\n    BaseRecord,\r\n    CreateResponse,\r\n    GetOneResponse,\r\n    HttpError,\r\n    LiveModeProps,\r\n    ResourceRouterParams,\r\n    RedirectionTypes,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n    UpdateResponse,\r\n    MutationMode,\r\n    BaseKey,\r\n    IQueryKeys,\r\n} from \"../../interfaces\";\r\nimport { UpdateParams, UseUpdateReturnType } from \"../data/useUpdate\";\r\nimport { UseCreateReturnType } from \"../data/useCreate\";\r\n\r\nexport type ActionParams = {\r\n    action?: \"edit\" | \"create\" | \"clone\";\r\n};\r\n\r\ntype ActionFormProps<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n> = {\r\n    onMutationSuccess?: (\r\n        data: CreateResponse<TData> | UpdateResponse<TData>,\r\n        variables: TVariables,\r\n        context: any,\r\n    ) => void;\r\n    onMutationError?: (\r\n        error: TError,\r\n        variables: TVariables,\r\n        context: any,\r\n    ) => void;\r\n    redirect?: RedirectionTypes;\r\n    resource?: string;\r\n    id?: BaseKey;\r\n    metaData?: MetaDataQuery;\r\n    mutationMode?: MutationMode;\r\n    undoableTimeout?: number;\r\n    dataProviderName?: string;\r\n    invalidates?: Array<keyof IQueryKeys>;\r\n    queryOptions?: UseQueryOptions<GetOneResponse<TData>, HttpError>;\r\n} & SuccessErrorNotification &\r\n    ActionParams &\r\n    LiveModeProps;\r\n\r\nexport type UseFormProps<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n> = ActionParams & ActionFormProps<TData, TError, TVariables> & LiveModeProps;\r\n\r\nexport type UseFormReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n> = {\r\n    id?: BaseKey;\r\n    setId: Dispatch<SetStateAction<BaseKey | undefined>>;\r\n\r\n    queryResult?: QueryObserverResult<GetOneResponse<TData>>;\r\n    mutationResult:\r\n        | UseUpdateReturnType<TData, TError, TVariables>\r\n        | UseCreateReturnType<TData, TError, TVariables>;\r\n    formLoading: boolean;\r\n    onFinish: (\r\n        values: TVariables,\r\n    ) => Promise<CreateResponse<TData> | UpdateResponse<TData> | void>;\r\n    redirect: (\r\n        redirect: \"show\" | \"list\" | \"edit\" | \"create\" | false,\r\n        idFromFunction?: BaseKey | undefined,\r\n    ) => void;\r\n};\r\n\r\n/**\r\n * `useForm` is used to manage forms. It uses Ant Design {@link https://ant.design/components/form/ Form} data scope management under the hood and returns the required props for managing the form actions.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/hooks/form/useForm} for more details.\r\n *\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/api-references/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/api-references/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for params. default `{}`\r\n *\r\n *\r\n */\r\nexport const useForm = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = {},\r\n>({\r\n    action: actionFromProps,\r\n    resource: resourceFromProps,\r\n    id: idFromProps,\r\n    onMutationSuccess,\r\n    onMutationError,\r\n    redirect: redirectFromProps,\r\n    successNotification,\r\n    errorNotification,\r\n    metaData,\r\n    mutationMode: mutationModeProp,\r\n    liveMode,\r\n    onLiveEvent,\r\n    liveParams,\r\n    undoableTimeout,\r\n    dataProviderName,\r\n    invalidates,\r\n    queryOptions,\r\n}: UseFormProps<TData, TError, TVariables> = {}): UseFormReturnType<\r\n    TData,\r\n    TError,\r\n    TVariables\r\n> => {\r\n    const { useParams } = useRouterContext();\r\n    const {\r\n        resource: resourceFromRoute,\r\n        action: actionFromRoute,\r\n        id: idFromParams,\r\n    } = useParams<ResourceRouterParams>();\r\n\r\n    const defaultId =\r\n        !resourceFromProps || resourceFromProps === resourceFromRoute\r\n            ? idFromProps ?? idFromParams\r\n            : idFromProps;\r\n\r\n    // id state is needed to determine selected record in a context for example useModal\r\n    const [id, setId] = React.useState<BaseKey | undefined>(defaultId);\r\n\r\n    const resourceName = resourceFromProps ?? resourceFromRoute;\r\n    const action = actionFromProps ?? actionFromRoute ?? \"create\";\r\n\r\n    const resourceWithRoute = useResourceWithRoute();\r\n    const resource = resourceWithRoute(resourceName);\r\n\r\n    const { mutationMode: mutationModeContext } = useMutationMode();\r\n    const mutationMode = mutationModeProp ?? mutationModeContext;\r\n\r\n    const isCreate = action === \"create\";\r\n    const isEdit = action === \"edit\";\r\n    const isClone = action === \"clone\";\r\n\r\n    const redirect = redirectFromProps ?? \"list\";\r\n\r\n    const enableQuery = id !== undefined && (isEdit || isClone);\r\n\r\n    const queryResult = useOne<TData>({\r\n        resource: resource.name,\r\n        id: id ?? \"\",\r\n        queryOptions: {\r\n            enabled: enableQuery,\r\n            ...queryOptions,\r\n        },\r\n        liveMode,\r\n        onLiveEvent,\r\n        liveParams,\r\n        metaData,\r\n        dataProviderName,\r\n    });\r\n\r\n    const { isFetching: isFetchingQuery } = queryResult;\r\n\r\n    const mutationResultCreate = useCreate<TData, TError, TVariables>();\r\n    const { mutate: mutateCreate, isLoading: isLoadingCreate } =\r\n        mutationResultCreate;\r\n\r\n    const mutationResultUpdate = useUpdate<TData, TError, TVariables>();\r\n    const { mutate: mutateUpdate, isLoading: isLoadingUpdate } =\r\n        mutationResultUpdate;\r\n\r\n    const { setWarnWhen } = useWarnAboutChange();\r\n\r\n    const handleSubmitWithRedirect = useRedirectionAfterSubmission();\r\n\r\n    const onFinishCreate = async (values: TVariables) => {\r\n        setWarnWhen(false);\r\n\r\n        const onSuccess = (id?: BaseKey) => {\r\n            handleSubmitWithRedirect({\r\n                redirect,\r\n                resource,\r\n                id,\r\n            });\r\n        };\r\n\r\n        if (mutationMode !== \"pessimistic\") {\r\n            setTimeout(() => {\r\n                onSuccess();\r\n            });\r\n        }\r\n\r\n        return new Promise<CreateResponse<TData> | void>((resolve, reject) => {\r\n            if (mutationMode !== \"pessimistic\") {\r\n                resolve();\r\n            }\r\n            return mutateCreate(\r\n                {\r\n                    values,\r\n                    resource: resource.name,\r\n                    successNotification,\r\n                    errorNotification,\r\n                    metaData,\r\n                    dataProviderName,\r\n                    invalidates,\r\n                },\r\n                {\r\n                    onSuccess: (data, _, context) => {\r\n                        if (onMutationSuccess) {\r\n                            onMutationSuccess(data, values, context);\r\n                        }\r\n\r\n                        const responseId = data?.data?.id;\r\n\r\n                        onSuccess(responseId);\r\n\r\n                        resolve(data);\r\n                    },\r\n                    onError: (error: TError, _, context) => {\r\n                        if (onMutationError) {\r\n                            return onMutationError(error, values, context);\r\n                        }\r\n                        reject();\r\n                    },\r\n                },\r\n            );\r\n        });\r\n    };\r\n\r\n    const onFinishUpdate = async (values: TVariables) => {\r\n        setWarnWhen(false);\r\n\r\n        const variables: UpdateParams<TVariables> = {\r\n            id: id ?? \"\",\r\n            values,\r\n            resource: resource.name,\r\n            mutationMode,\r\n            undoableTimeout,\r\n            successNotification,\r\n            errorNotification,\r\n            metaData,\r\n            dataProviderName,\r\n            invalidates,\r\n        };\r\n\r\n        const onSuccess = () => {\r\n            // If it is in modal mode set it to undefined. Otherwise set it to current id from route.\r\n            setId(defaultId);\r\n            handleSubmitWithRedirect({\r\n                redirect,\r\n                resource,\r\n                id,\r\n            });\r\n        };\r\n\r\n        // setWarnWhen is set to \"false\" at the start of the mutation. With the help of setTimeout we guarantee that the value false is set.\r\n        if (mutationMode !== \"pessimistic\") {\r\n            setTimeout(() => {\r\n                onSuccess();\r\n            });\r\n        }\r\n\r\n        // setTimeout is required to make onSuccess e.g. callbacks to work if component unmounts i.e. on route change\r\n        return new Promise<UpdateResponse<TData> | void>((resolve, reject) => {\r\n            if (mutationMode !== \"pessimistic\") {\r\n                resolve();\r\n            }\r\n            return setTimeout(() => {\r\n                mutateUpdate(variables, {\r\n                    onSuccess: (data, _, context) => {\r\n                        if (onMutationSuccess) {\r\n                            onMutationSuccess(data, values, context);\r\n                        }\r\n\r\n                        if (mutationMode === \"pessimistic\") {\r\n                            onSuccess();\r\n                        }\r\n\r\n                        resolve(data);\r\n                    },\r\n                    onError: (error: TError, _, context) => {\r\n                        if (onMutationError) {\r\n                            return onMutationError(error, values, context);\r\n                        }\r\n                        reject();\r\n                    },\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    const createResult = {\r\n        formLoading: isFetchingQuery || isLoadingCreate,\r\n        mutationResult: mutationResultCreate,\r\n        onFinish: onFinishCreate,\r\n    };\r\n\r\n    const editResult = {\r\n        formLoading: isFetchingQuery || isLoadingUpdate,\r\n        mutationResult: mutationResultUpdate,\r\n        onFinish: onFinishUpdate,\r\n    };\r\n\r\n    const result = isCreate || isClone ? createResult : editResult;\r\n\r\n    return {\r\n        ...result,\r\n        queryResult,\r\n        id,\r\n        setId,\r\n        redirect: (redirect, idFromFunction?: BaseKey | undefined) => {\r\n            handleSubmitWithRedirect({\r\n                redirect:\r\n                    redirect !== undefined\r\n                        ? redirect\r\n                        : isEdit\r\n                        ? \"list\"\r\n                        : \"edit\",\r\n                resource,\r\n                id: idFromFunction ?? id,\r\n            });\r\n        },\r\n    };\r\n};\r\n","import { useCallback } from \"react\";\r\n\r\nimport { BaseKey, IResourceItem } from \"../../interfaces\";\r\nimport { useNavigation } from \"@hooks\";\r\n\r\nexport type UseRedirectionAfterSubmissionType = () => (options: {\r\n    redirect: \"show\" | \"list\" | \"edit\" | \"create\" | false;\r\n    resource: IResourceItem;\r\n    id?: BaseKey;\r\n}) => void;\r\n\r\nexport const useRedirectionAfterSubmission: UseRedirectionAfterSubmissionType =\r\n    () => {\r\n        const { show, edit, list, create } = useNavigation();\r\n\r\n        const handleSubmitWithRedirect = useCallback(\r\n            ({\r\n                redirect,\r\n                resource,\r\n                id,\r\n            }: {\r\n                redirect: \"show\" | \"list\" | \"edit\" | \"create\" | false;\r\n                resource: IResourceItem;\r\n                id?: BaseKey;\r\n            }) => {\r\n                if (redirect && resource.route) {\r\n                    if (resource.canShow && redirect === \"show\" && id) {\r\n                        return show(resource.route, id);\r\n                    }\r\n\r\n                    if (resource.canEdit && redirect === \"edit\" && id) {\r\n                        return edit(resource.route, id);\r\n                    }\r\n\r\n                    if (resource.canCreate && redirect === \"create\") {\r\n                        return create(resource.route);\r\n                    }\r\n\r\n                    return list(resource.route, \"push\");\r\n                } else {\r\n                    return;\r\n                }\r\n            },\r\n            [],\r\n        );\r\n\r\n        return handleSubmitWithRedirect;\r\n    };\r\n","import { useResourceWithRoute, useRouterContext } from \"@hooks\";\r\nimport { BaseKey } from \"../../interfaces\";\r\n\r\nexport type HistoryType = \"push\" | \"replace\";\r\n\r\n/**\r\n * `refine` uses {@link https://reactrouter.com/web/api/Hooks `React Router`} and comes with all redirects out of the box.\r\n * It allows you to manage your routing operations in refine.\r\n * Using this hook, you can manage all the routing operations of your application very easily.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/navigation/useNavigation} for more details.\r\n */\r\nexport const useNavigation = () => {\r\n    const { useHistory } = useRouterContext();\r\n    const history = useHistory();\r\n    const resourceWithRoute = useResourceWithRoute();\r\n\r\n    const handleUrl = (url: string, type: HistoryType = \"push\") => {\r\n        type === \"push\" ? history.push(url) : history.replace(url);\r\n    };\r\n\r\n    const createUrl = (resource: string) => {\r\n        const resourceName = resourceWithRoute(resource);\r\n        return `/${resourceName.route}/create`;\r\n    };\r\n\r\n    const editUrl = (resource: string, id: BaseKey) => {\r\n        const resourceName = resourceWithRoute(resource);\r\n        const encodedId = encodeURIComponent(id);\r\n\r\n        return `/${resourceName.route}/edit/${encodedId}`;\r\n    };\r\n\r\n    const cloneUrl = (resource: string, id: BaseKey) => {\r\n        const resourceName = resourceWithRoute(resource);\r\n        const encodedId = encodeURIComponent(id);\r\n        return `/${resourceName.route}/clone/${encodedId}`;\r\n    };\r\n\r\n    const showUrl = (resource: string, id: BaseKey) => {\r\n        const resourceName = resourceWithRoute(resource);\r\n        const encodedId = encodeURIComponent(id);\r\n        return `/${resourceName.route}/show/${encodedId}`;\r\n    };\r\n\r\n    const listUrl = (resource: string) => {\r\n        const resourceName = resourceWithRoute(resource);\r\n        return `/${resourceName.route}`;\r\n    };\r\n\r\n    const create = (resource: string, type: HistoryType = \"push\") => {\r\n        handleUrl(createUrl(resource), type);\r\n    };\r\n\r\n    const edit = (\r\n        resource: string,\r\n        id: BaseKey,\r\n        type: HistoryType = \"push\",\r\n    ) => {\r\n        handleUrl(editUrl(resource, id), type);\r\n    };\r\n\r\n    const clone = (\r\n        resource: string,\r\n        id: BaseKey,\r\n        type: HistoryType = \"push\",\r\n    ) => {\r\n        handleUrl(cloneUrl(resource, id), type);\r\n    };\r\n\r\n    const show = (\r\n        resource: string,\r\n        id: BaseKey,\r\n        type: HistoryType = \"push\",\r\n    ) => {\r\n        handleUrl(showUrl(resource, id), type);\r\n    };\r\n\r\n    const list = (resource: string, type: HistoryType = \"push\") => {\r\n        handleUrl(listUrl(resource), type);\r\n    };\r\n\r\n    const push = (path: string, state?: unknown) => {\r\n        history.push(path, state);\r\n    };\r\n\r\n    const replace = (path: string, state?: unknown) => {\r\n        history.replace(path, state);\r\n    };\r\n\r\n    const goBack = () => {\r\n        history.goBack();\r\n    };\r\n\r\n    return {\r\n        create,\r\n        createUrl,\r\n        edit,\r\n        editUrl,\r\n        clone,\r\n        cloneUrl,\r\n        show,\r\n        showUrl,\r\n        list,\r\n        listUrl,\r\n        push,\r\n        replace,\r\n        goBack,\r\n    };\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { QueryObserverResult } from \"react-query\";\r\n\r\nimport { useOne, useResourceWithRoute, useRouterContext } from \"@hooks\";\r\n\r\nimport {\r\n    ResourceRouterParams,\r\n    BaseRecord,\r\n    GetOneResponse,\r\n    SuccessErrorNotification,\r\n    MetaDataQuery,\r\n    LiveModeProps,\r\n    BaseKey,\r\n} from \"../../interfaces\";\r\n\r\nexport type useShowReturnType<TData extends BaseRecord = BaseRecord> = {\r\n    queryResult: QueryObserverResult<GetOneResponse<TData>>;\r\n    showId?: BaseKey;\r\n    setShowId: React.Dispatch<React.SetStateAction<BaseKey | undefined>>;\r\n};\r\n\r\nexport type useShowProps = {\r\n    resource?: string;\r\n    id?: BaseKey;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n} & LiveModeProps &\r\n    SuccessErrorNotification;\r\n\r\n/**\r\n * `useShow` hook allows you to fetch the desired record.\r\n * It uses `getOne` method as query function from the dataProvider that is\r\n * passed to {@link https://refine.dev/docs/api-references/components/refine-config `<Refine>`}.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/show/useShow} for more details.\r\n */\r\nexport const useShow = <TData extends BaseRecord = BaseRecord>({\r\n    resource: resourceFromProp,\r\n    id,\r\n    successNotification,\r\n    errorNotification,\r\n    metaData,\r\n    liveMode,\r\n    onLiveEvent,\r\n    dataProviderName,\r\n}: useShowProps = {}): useShowReturnType<TData> => {\r\n    const { useParams } = useRouterContext();\r\n\r\n    const { resource: routeResourceName, id: idFromRoute } =\r\n        useParams<ResourceRouterParams>();\r\n\r\n    const defaultId =\r\n        !resourceFromProp || resourceFromProp === routeResourceName\r\n            ? id ?? idFromRoute\r\n            : id;\r\n\r\n    const [showId, setShowId] = useState<BaseKey | undefined>(defaultId);\r\n\r\n    const resourceWithRoute = useResourceWithRoute();\r\n\r\n    const resource = resourceWithRoute(resourceFromProp ?? routeResourceName);\r\n\r\n    const queryResult = useOne<TData>({\r\n        resource: resource.name,\r\n        id: showId ?? \"\",\r\n        queryOptions: {\r\n            enabled: showId !== undefined,\r\n        },\r\n        successNotification,\r\n        errorNotification,\r\n        metaData,\r\n        liveMode,\r\n        onLiveEvent,\r\n        dataProviderName,\r\n    });\r\n\r\n    return {\r\n        queryResult,\r\n        showId,\r\n        setShowId,\r\n    };\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { parse, ParseConfig } from \"papaparse\";\r\nimport chunk from \"lodash/chunk\";\r\n\r\nimport {\r\n    useCreate,\r\n    useCreateMany,\r\n    useResourceWithRoute,\r\n    useRouterContext,\r\n} from \"@hooks\";\r\nimport {\r\n    MapDataFn,\r\n    BaseRecord,\r\n    HttpError,\r\n    ResourceRouterParams,\r\n    MetaDataQuery,\r\n} from \"../../interfaces\";\r\nimport { importCSVMapper } from \"@definitions\";\r\nimport { UseCreateReturnType } from \"../../hooks/data/useCreate\";\r\nimport { UseCreateManyReturnType } from \"../../hooks/data/useCreateMany\";\r\n\r\nexport type ImportSuccessResult<TVariables, TData> = {\r\n    request: TVariables[];\r\n    type: \"success\";\r\n    response: TData[];\r\n};\r\n\r\nexport type ImportErrorResult<TVariables> = {\r\n    request: TVariables[];\r\n    type: \"error\";\r\n    response: HttpError[];\r\n};\r\n\r\nexport type OnFinishParams<TVariables, TData> = {\r\n    succeeded: ImportSuccessResult<TVariables, TData>[];\r\n    errored: ImportErrorResult<TVariables>[];\r\n};\r\n\r\nexport type OnProgressParams = {\r\n    totalAmount: number;\r\n    processedAmount: number;\r\n};\r\n\r\nexport type ImportOptions<\r\n    TItem,\r\n    TVariables = any,\r\n    TData extends BaseRecord = BaseRecord,\r\n> = {\r\n    resourceName?: string;\r\n    mapData?: MapDataFn<TItem, TVariables>;\r\n    paparseOptions?: ParseConfig;\r\n    batchSize?: number;\r\n    onFinish?: (results: OnFinishParams<TVariables, TData>) => void;\r\n    metaData?: MetaDataQuery;\r\n    onProgress?: (onProgressParams: OnProgressParams) => void;\r\n    dataProviderName?: string;\r\n};\r\n\r\nexport type CreatedValuesType<TVariables, TData> =\r\n    | ImportSuccessResult<TVariables, TData>\r\n    | ImportErrorResult<TVariables>;\r\n\r\nexport type HandleChangeType<TVariables, TData> = (onChangeParams: {\r\n    file: Partial<File>;\r\n}) => Promise<CreatedValuesType<TVariables, TData>[]>;\r\n\r\nexport type UseImportInputPropsType = {\r\n    type: \"file\";\r\n    accept: string;\r\n    onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n};\r\n\r\nexport type UseImportReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TVariables = {},\r\n    TError extends HttpError = HttpError,\r\n> = {\r\n    inputProps: UseImportInputPropsType;\r\n    mutationResult:\r\n        | UseCreateReturnType<TData, TError, TVariables>\r\n        | UseCreateManyReturnType<TData, TError, TVariables>;\r\n    isLoading: boolean;\r\n    handleChange: HandleChangeType<TVariables, TData>;\r\n};\r\n\r\n/**\r\n * `useImport` hook allows you to handle your csv import logic easily.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/import-export/useImport} for more details.\r\n *\r\n * @typeParam TItem - Interface of parsed csv data\r\n * @typeParam TData - Result data of the query extends {@link https://refine.dev/docs/api-references/interfaceReferences#baserecord `BaseRecord`}\r\n * @typeParam TError - Custom error object that extends {@link https://refine.dev/docs/api-references/interfaceReferences#httperror `HttpError`}\r\n * @typeParam TVariables - Values for mutation function\r\n *\r\n */\r\nexport const useImport = <\r\n    TItem extends unknown = any,\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n    TVariables = any,\r\n>({\r\n    resourceName,\r\n    mapData = (item) => item as unknown as TVariables,\r\n    paparseOptions,\r\n    batchSize = Number.MAX_SAFE_INTEGER,\r\n    onFinish,\r\n    metaData,\r\n    onProgress,\r\n}: ImportOptions<TItem, TVariables, TData> = {}): UseImportReturnType<\r\n    TData,\r\n    TVariables,\r\n    TError\r\n> => {\r\n    const [processedAmount, setProcessedAmount] = useState<number>(0);\r\n    const [totalAmount, setTotalAmount] = useState<number>(0);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const resourceWithRoute = useResourceWithRoute();\r\n    const { useParams } = useRouterContext();\r\n\r\n    const { resource: routeResourceName } = useParams<ResourceRouterParams>();\r\n    const { name: resource } = resourceWithRoute(\r\n        resourceName ?? routeResourceName,\r\n    );\r\n\r\n    const createMany = useCreateMany<TData, TError, TVariables>();\r\n    const create = useCreate<TData, TError, TVariables>();\r\n\r\n    let mutationResult:\r\n        | UseCreateReturnType<TData, TError, TVariables>\r\n        | UseCreateManyReturnType<TData, TError, TVariables>;\r\n\r\n    if (batchSize === 1) {\r\n        mutationResult = create;\r\n    } else {\r\n        mutationResult = createMany;\r\n    }\r\n\r\n    const handleCleanup = () => {\r\n        setTotalAmount(0);\r\n        setProcessedAmount(0);\r\n        setIsLoading(false);\r\n    };\r\n\r\n    const handleFinish = (\r\n        createdValues: CreatedValuesType<TVariables, TData>[],\r\n    ) => {\r\n        const result = {\r\n            succeeded: createdValues.filter(\r\n                (item) => item.type === \"success\",\r\n            ) as unknown as ImportSuccessResult<TVariables, TData>[],\r\n            errored: createdValues.filter(\r\n                (item) => item.type === \"error\",\r\n            ) as unknown as ImportErrorResult<TVariables>[],\r\n        };\r\n\r\n        onFinish?.(result);\r\n        setIsLoading(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        onProgress?.({ totalAmount, processedAmount });\r\n    }, [totalAmount, processedAmount]);\r\n\r\n    const handleChange: HandleChangeType<TVariables, TData> = ({ file }) => {\r\n        handleCleanup();\r\n        return new Promise<CreatedValuesType<TVariables, TData>[]>(\r\n            (resolve) => {\r\n                setIsLoading(true);\r\n                parse(file as any, {\r\n                    complete: async ({ data }: { data: unknown[][] }) => {\r\n                        const values = importCSVMapper(data, mapData);\r\n\r\n                        setTotalAmount(values.length);\r\n                        if (batchSize === 1) {\r\n                            const createdValues = await Promise.all(\r\n                                values\r\n                                    .map((value) => {\r\n                                        const response = create.mutateAsync({\r\n                                            resource,\r\n                                            values: value,\r\n                                            successNotification: false,\r\n                                            errorNotification: false,\r\n                                            metaData,\r\n                                        });\r\n\r\n                                        return { response, value };\r\n                                    })\r\n                                    .map(({ response, value }) =>\r\n                                        response\r\n                                            .then(({ data }) => {\r\n                                                setProcessedAmount(\r\n                                                    (currentAmount) => {\r\n                                                        return (\r\n                                                            currentAmount + 1\r\n                                                        );\r\n                                                    },\r\n                                                );\r\n\r\n                                                return {\r\n                                                    response: [data],\r\n                                                    type: \"success\",\r\n                                                    request: [value],\r\n                                                } as ImportSuccessResult<\r\n                                                    TVariables,\r\n                                                    TData\r\n                                                >;\r\n                                            })\r\n                                            .catch(\r\n                                                (error: HttpError) =>\r\n                                                    ({\r\n                                                        response: [error],\r\n                                                        type: \"error\",\r\n                                                        request: [value],\r\n                                                    } as ImportErrorResult<TVariables>),\r\n                                            ),\r\n                                    ),\r\n                            );\r\n                            resolve(createdValues);\r\n                        } else {\r\n                            const createdValues = await Promise.all(\r\n                                chunk(values, batchSize)\r\n                                    .map((batch) => {\r\n                                        return {\r\n                                            response: createMany.mutateAsync({\r\n                                                resource,\r\n                                                values: batch,\r\n                                                successNotification: false,\r\n                                                errorNotification: false,\r\n                                                metaData,\r\n                                            }),\r\n                                            currentBatchLength: batch.length,\r\n                                            value: batch,\r\n                                        };\r\n                                    })\r\n                                    .map(\r\n                                        ({\r\n                                            response,\r\n                                            value,\r\n                                            currentBatchLength,\r\n                                        }) =>\r\n                                            response\r\n                                                .then((response) => {\r\n                                                    setProcessedAmount(\r\n                                                        (currentAmount) => {\r\n                                                            return (\r\n                                                                currentAmount +\r\n                                                                currentBatchLength\r\n                                                            );\r\n                                                        },\r\n                                                    );\r\n\r\n                                                    return {\r\n                                                        response: response.data,\r\n                                                        type: \"success\",\r\n                                                        request: value,\r\n                                                    } as ImportSuccessResult<\r\n                                                        TVariables,\r\n                                                        TData\r\n                                                    >;\r\n                                                })\r\n                                                .catch(\r\n                                                    (error: HttpError) =>\r\n                                                        ({\r\n                                                            response: [error],\r\n                                                            type: \"error\",\r\n                                                            request: value,\r\n                                                        } as ImportErrorResult<TVariables>),\r\n                                                ),\r\n                                    ),\r\n                            );\r\n\r\n                            resolve(createdValues);\r\n                        }\r\n                    },\r\n\r\n                    ...paparseOptions,\r\n                });\r\n            },\r\n        ).then((createdValues) => {\r\n            handleFinish(createdValues);\r\n            return createdValues;\r\n        });\r\n    };\r\n\r\n    return {\r\n        inputProps: {\r\n            type: \"file\",\r\n            accept: \".csv\",\r\n            onChange: (event: React.ChangeEvent<HTMLInputElement>) => {\r\n                if (event.target.files && event.target.files.length > 0) {\r\n                    handleChange({ file: event.target.files[0] });\r\n                }\r\n            },\r\n        },\r\n        mutationResult,\r\n        isLoading,\r\n        handleChange,\r\n    };\r\n};\r\n","import { useCallback, useState } from \"react\";\r\n\r\nexport type useModalReturnType = {\r\n    visible: boolean;\r\n    show: () => void;\r\n    close: () => void;\r\n};\r\n\r\nexport type useModalProps = {\r\n    defaultVisible?: boolean;\r\n};\r\n\r\nexport const useModal = ({\r\n    defaultVisible = false,\r\n}: useModalProps = {}): useModalReturnType => {\r\n    const [visible, setVisible] = useState(defaultVisible);\r\n\r\n    const show = useCallback(() => setVisible(true), [visible]);\r\n    const close = useCallback(() => setVisible(false), [visible]);\r\n\r\n    return {\r\n        visible,\r\n        show,\r\n        close,\r\n    };\r\n};\r\n","import { useContext } from \"react\";\r\nimport { RouterContext } from \"@contexts/router\";\r\n\r\nexport const useRouterContext = () => {\r\n    const { useHistory, useLocation, useParams, Prompt, Link, routes } =\r\n        useContext(RouterContext);\r\n\r\n    return {\r\n        useHistory,\r\n        useLocation,\r\n        useParams,\r\n        Prompt,\r\n        Link,\r\n        routes,\r\n    };\r\n};\r\n","import React from \"react\";\r\n\r\nimport { IRouterContext } from \"../../interfaces\";\r\n\r\nexport const defaultProvider: IRouterContext = {\r\n    useHistory: () => false,\r\n    useLocation: () => false,\r\n    useParams: () => ({} as any),\r\n    Prompt: () => null,\r\n    Link: () => null,\r\n};\r\n\r\nexport const RouterContext =\r\n    React.createContext<IRouterContext>(defaultProvider);\r\n\r\nexport const RouterContextProvider: React.FC<\r\n    IRouterContext & {\r\n        children?: React.ReactNode;\r\n    }\r\n> = ({\r\n    children,\r\n    useHistory,\r\n    useLocation,\r\n    useParams,\r\n    Prompt,\r\n    Link,\r\n    routes,\r\n}) => {\r\n    return (\r\n        <RouterContext.Provider\r\n            value={{\r\n                useHistory,\r\n                useLocation,\r\n                useParams,\r\n                Prompt,\r\n                Link,\r\n                routes,\r\n            }}\r\n        >\r\n            {children}\r\n        </RouterContext.Provider>\r\n    );\r\n};\r\n","import { useContext } from \"react\";\r\nimport { useQuery, UseQueryResult, UseQueryOptions } from \"react-query\";\r\n\r\nimport { AccessControlContext } from \"@contexts/accessControl\";\r\nimport { CanParams, CanReturnType } from \"../../../interfaces\";\r\n\r\nexport type UseCanProps = CanParams & {\r\n    queryOptions?: UseQueryOptions<CanReturnType>;\r\n};\r\n\r\n/**\r\n * `useCan` uses the `can` as the query function for `react-query`'s {@link https://react-query.tanstack.com/guides/queries `useQuery`}. It takes the parameters that `can` takes. It can also be configured with `queryOptions` for `useQuery`. Returns the result of `useQuery`.\r\n * @see {@link https://refine.dev/docs/core/hooks/accessControl/useCan} for more details.\r\n *\r\n * @typeParam CanParams {@link https://refine.dev/docs/core/interfaceReferences#canparams}\r\n * @typeParam CanReturnType {@link https://refine.dev/docs/core/interfaceReferences#canreturntype}\r\n *\r\n */\r\nexport const useCan = ({\r\n    action,\r\n    resource,\r\n    params,\r\n    queryOptions,\r\n}: UseCanProps): UseQueryResult<CanReturnType> => {\r\n    const { can } = useContext(AccessControlContext);\r\n\r\n    const queryResponse = useQuery<CanReturnType>(\r\n        [\"useCan\", { action, resource, params }],\r\n        // Enabled check for `can` is enough to be sure that it's defined in the query function but TS is not smart enough to know that.\r\n        () => can?.({ action, resource, params }) ?? { can: true },\r\n        {\r\n            enabled: typeof can !== \"undefined\",\r\n            ...queryOptions,\r\n            retry: false,\r\n        },\r\n    );\r\n\r\n    return typeof can === \"undefined\"\r\n        ? ({ data: { can: true } } as typeof queryResponse)\r\n        : queryResponse;\r\n};\r\n","import React from \"react\";\r\n\r\nimport { IAccessControlContext } from \"./IAccessControlContext\";\r\n\r\n/** @deprecated default value for access control context has no use and is an empty object. */\r\nexport const defaultAccessControlContext: IAccessControlContext = {};\r\n\r\nexport const AccessControlContext = React.createContext<IAccessControlContext>(\r\n    {},\r\n);\r\n\r\nexport const AccessControlContextProvider: React.FC<\r\n    IAccessControlContext & {\r\n        children?: React.ReactNode;\r\n    }\r\n> = ({ can, children }) => {\r\n    return (\r\n        <AccessControlContext.Provider value={{ can }}>\r\n            {children}\r\n        </AccessControlContext.Provider>\r\n    );\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { AccessControlContext } from \"@contexts/accessControl\";\r\nimport { IAccessControlContext } from \"../../interfaces\";\r\n\r\nexport const useCanWithoutCache = (): IAccessControlContext => {\r\n    const { can } = useContext(AccessControlContext);\r\n\r\n    return { can };\r\n};\r\n","import { useMemo, useState } from \"react\";\r\nimport { QueryObserverResult, UseQueryOptions } from \"react-query\";\r\nimport uniqBy from \"lodash/uniqBy\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nimport { useList, useMany } from \"@hooks\";\r\nimport {\r\n    CrudSorting,\r\n    Option,\r\n    BaseRecord,\r\n    GetManyResponse,\r\n    GetListResponse,\r\n    CrudFilters,\r\n    SuccessErrorNotification,\r\n    HttpError,\r\n    MetaDataQuery,\r\n    LiveModeProps,\r\n    BaseKey,\r\n} from \"../../interfaces\";\r\n\r\nexport type UseSelectProps<TData, TError> = {\r\n    resource: string;\r\n    optionLabel?: string;\r\n    optionValue?: string;\r\n    sort?: CrudSorting;\r\n    filters?: CrudFilters;\r\n    defaultValue?: BaseKey | BaseKey[];\r\n    debounce?: number;\r\n    queryOptions?: UseQueryOptions<GetListResponse<TData>, TError>;\r\n    fetchSize?: number;\r\n    defaultValueQueryOptions?: UseQueryOptions<GetManyResponse<TData>, TError>;\r\n    onSearch?: (value: string) => CrudFilters;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n} & SuccessErrorNotification &\r\n    LiveModeProps;\r\n\r\nexport type UseSelectReturnType<TData extends BaseRecord = BaseRecord> = {\r\n    queryResult: QueryObserverResult<GetListResponse<TData>>;\r\n    defaultValueQueryResult: QueryObserverResult<GetManyResponse<TData>>;\r\n    onSearch: (value: string | undefined) => void;\r\n    options: Option[];\r\n};\r\n\r\nexport const useSelect = <\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n>(\r\n    props: UseSelectProps<TData, TError>,\r\n): UseSelectReturnType<TData> => {\r\n    const [search, setSearch] = useState<CrudFilters>([]);\r\n    const [options, setOptions] = useState<Option[]>([]);\r\n    const [selectedOptions, setSelectedOptions] = useState<Option[]>([]);\r\n\r\n    const {\r\n        resource,\r\n        sort,\r\n        filters = [],\r\n        optionLabel = \"title\",\r\n        optionValue = \"id\",\r\n        debounce: debounceValue = 300,\r\n        successNotification,\r\n        errorNotification,\r\n        defaultValueQueryOptions: defaultValueQueryOptionsFromProps,\r\n        queryOptions,\r\n        fetchSize,\r\n        liveMode,\r\n        defaultValue = [],\r\n        onLiveEvent,\r\n        onSearch: onSearchFromProp,\r\n        liveParams,\r\n        metaData,\r\n        dataProviderName,\r\n    } = props;\r\n\r\n    const defaultValues = Array.isArray(defaultValue)\r\n        ? defaultValue\r\n        : [defaultValue];\r\n\r\n    const defaultValueQueryOnSuccess = (data: GetManyResponse<TData>) => {\r\n        setSelectedOptions(\r\n            data.data.map((item) => ({\r\n                label: item[optionLabel],\r\n                value: item[optionValue],\r\n            })),\r\n        );\r\n    };\r\n\r\n    const defaultValueQueryOptions =\r\n        defaultValueQueryOptionsFromProps ?? (queryOptions as any);\r\n\r\n    const defaultValueQueryResult = useMany<TData, TError>({\r\n        resource,\r\n        ids: defaultValues,\r\n        queryOptions: {\r\n            enabled: defaultValues.length > 0,\r\n            ...defaultValueQueryOptions,\r\n            onSuccess: (data) => {\r\n                defaultValueQueryOnSuccess(data);\r\n                defaultValueQueryOptions?.onSuccess?.(data);\r\n            },\r\n        },\r\n        metaData,\r\n        liveMode: \"off\",\r\n        dataProviderName,\r\n    });\r\n\r\n    const defaultQueryOnSuccess = (data: GetListResponse<TData>) => {\r\n        setOptions(\r\n            data.data.map((item) => ({\r\n                label: item[optionLabel],\r\n                value: item[optionValue],\r\n            })),\r\n        );\r\n    };\r\n\r\n    const queryResult = useList<TData, TError>({\r\n        resource,\r\n        config: {\r\n            sort,\r\n            filters: filters.concat(search),\r\n            pagination: fetchSize\r\n                ? {\r\n                      pageSize: fetchSize,\r\n                  }\r\n                : undefined,\r\n        },\r\n        queryOptions: {\r\n            ...queryOptions,\r\n            onSuccess: (data) => {\r\n                defaultQueryOnSuccess(data);\r\n                queryOptions?.onSuccess?.(data);\r\n            },\r\n        },\r\n        successNotification,\r\n        errorNotification,\r\n        metaData,\r\n        liveMode,\r\n        liveParams,\r\n        onLiveEvent,\r\n        dataProviderName,\r\n    });\r\n\r\n    const onSearch = (value: string | undefined) => {\r\n        if (!value) {\r\n            setSearch([]);\r\n            return;\r\n        }\r\n\r\n        if (onSearchFromProp) {\r\n            setSearch(onSearchFromProp(value));\r\n        } else {\r\n            setSearch([\r\n                {\r\n                    field: optionLabel,\r\n                    operator: \"contains\",\r\n                    value,\r\n                },\r\n            ]);\r\n        }\r\n    };\r\n\r\n    return {\r\n        queryResult,\r\n        defaultValueQueryResult,\r\n        options: useMemo(\r\n            () => uniqBy([...options, ...selectedOptions], \"value\"),\r\n            [options, selectedOptions],\r\n        ),\r\n        onSearch: debounce(onSearch, debounceValue),\r\n    };\r\n};\r\n","import { useMemo, useState, useEffect } from \"react\";\r\nimport { QueryObserverResult, UseQueryOptions } from \"react-query\";\r\nimport differenceWith from \"lodash/differenceWith\";\r\nimport isEqual from \"lodash/isEqual\";\r\n\r\nimport {\r\n    useRouterContext,\r\n    useSyncWithLocation,\r\n    useNavigation,\r\n    useResourceWithRoute,\r\n    useList,\r\n    useLiveMode,\r\n} from \"@hooks\";\r\nimport {\r\n    stringifyTableParams,\r\n    parseTableParams,\r\n    unionFilters,\r\n    setInitialFilters,\r\n    setInitialSorters,\r\n    unionSorters,\r\n} from \"@definitions/table\";\r\n\r\nimport {\r\n    ResourceRouterParams,\r\n    BaseRecord,\r\n    CrudFilters,\r\n    CrudSorting,\r\n    GetListResponse,\r\n    SuccessErrorNotification,\r\n    HttpError,\r\n    MetaDataQuery,\r\n    LiveModeProps,\r\n} from \"../../interfaces\";\r\n\r\ntype SetFilterBehavior = \"merge\" | \"replace\";\r\n\r\nexport type useTableProps<TData, TError> = {\r\n    resource?: string;\r\n    initialCurrent?: number;\r\n    initialPageSize?: number;\r\n    hasPagination?: boolean;\r\n    initialSorter?: CrudSorting;\r\n    permanentSorter?: CrudSorting;\r\n    defaultSetFilterBehavior?: SetFilterBehavior;\r\n    initialFilter?: CrudFilters;\r\n    permanentFilter?: CrudFilters;\r\n    syncWithLocation?: boolean;\r\n    queryOptions?: UseQueryOptions<GetListResponse<TData>, TError>;\r\n    metaData?: MetaDataQuery;\r\n    dataProviderName?: string;\r\n} & SuccessErrorNotification &\r\n    LiveModeProps;\r\n\r\ntype ReactSetState<T> = React.Dispatch<React.SetStateAction<T>>;\r\n\r\ntype SyncWithLocationParams = {\r\n    pagination: { current?: number; pageSize?: number };\r\n    sorter: CrudSorting;\r\n    filters: CrudFilters;\r\n};\r\n\r\nexport type useTablePaginationKeys =\r\n    | \"current\"\r\n    | \"setCurrent\"\r\n    | \"pageSize\"\r\n    | \"setPageSize\"\r\n    | \"pageCount\";\r\n\r\nexport type useTableReturnType<TData extends BaseRecord = BaseRecord> = {\r\n    tableQueryResult: QueryObserverResult<GetListResponse<TData>>;\r\n    sorter: CrudSorting;\r\n    setSorter: (sorter: CrudSorting) => void;\r\n    filters: CrudFilters;\r\n    setFilters: ((filters: CrudFilters, behavior?: SetFilterBehavior) => void) &\r\n        ((setter: (prevFilters: CrudFilters) => CrudFilters) => void);\r\n    createLinkForSyncWithLocation: (params: SyncWithLocationParams) => string;\r\n    current: number;\r\n    setCurrent: ReactSetState<useTableReturnType[\"current\"]>;\r\n    pageSize: number;\r\n    setPageSize: ReactSetState<useTableReturnType[\"pageSize\"]>;\r\n    pageCount: number;\r\n};\r\n\r\nexport type useTableNoPaginationReturnType<\r\n    TData extends BaseRecord = BaseRecord,\r\n> = Omit<useTableReturnType<TData>, useTablePaginationKeys> &\r\n    Record<useTablePaginationKeys, undefined>;\r\n\r\n/**\r\n * By using useTable, you are able to get properties that are compatible with\r\n * Ant Design {@link https://ant.design/components/table/ `<Table>`} component.\r\n * All features such as sorting, filtering and pagination comes as out of box.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/hooks/table/useTable} for more details.\r\n */\r\n\r\nconst defaultPermanentFilter: CrudFilters = [];\r\nconst defaultPermanentSorter: CrudSorting = [];\r\n\r\n// overload with pagination\r\nexport function useTable<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n>(\r\n    props?: useTableProps<TData, TError> & {\r\n        hasPagination?: true;\r\n    },\r\n): useTableReturnType<TData>;\r\n// overload without pagination\r\nexport function useTable<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n>(\r\n    props?: useTableProps<TData, TError> & {\r\n        hasPagination: false;\r\n    },\r\n): useTableNoPaginationReturnType<TData>;\r\n// implementation\r\nexport function useTable<\r\n    TData extends BaseRecord = BaseRecord,\r\n    TError extends HttpError = HttpError,\r\n>({\r\n    initialCurrent = 1,\r\n    initialPageSize = 10,\r\n    hasPagination = true,\r\n    initialSorter,\r\n    permanentSorter = defaultPermanentSorter,\r\n    defaultSetFilterBehavior = \"merge\",\r\n    initialFilter,\r\n    permanentFilter = defaultPermanentFilter,\r\n    syncWithLocation: syncWithLocationProp,\r\n    resource: resourceFromProp,\r\n    successNotification,\r\n    errorNotification,\r\n    queryOptions,\r\n    liveMode: liveModeFromProp,\r\n    onLiveEvent,\r\n    liveParams,\r\n    metaData,\r\n    dataProviderName,\r\n}: useTableProps<TData, TError> = {}):\r\n    | useTableReturnType<TData>\r\n    | useTableNoPaginationReturnType<TData> {\r\n    const { syncWithLocation: syncWithLocationContext } = useSyncWithLocation();\r\n\r\n    const syncWithLocation = syncWithLocationProp ?? syncWithLocationContext;\r\n\r\n    const { useLocation, useParams } = useRouterContext();\r\n    const { search, pathname } = useLocation();\r\n    const liveMode = useLiveMode(liveModeFromProp);\r\n\r\n    // We want to always parse the query string even when syncWithLocation is\r\n    // deactivated, for hotlinking to work properly\r\n    const { parsedCurrent, parsedPageSize, parsedSorter, parsedFilters } =\r\n        parseTableParams(search);\r\n\r\n    const defaultCurrent = parsedCurrent || initialCurrent;\r\n    const defaultPageSize = parsedPageSize || initialPageSize;\r\n    const defaultSorter = parsedSorter.length ? parsedSorter : initialSorter;\r\n    const defaultFilter = parsedFilters.length ? parsedFilters : initialFilter;\r\n\r\n    const { resource: routeResourceName } = useParams<ResourceRouterParams>();\r\n\r\n    const { push } = useNavigation();\r\n    const resourceWithRoute = useResourceWithRoute();\r\n\r\n    const resource = resourceWithRoute(resourceFromProp ?? routeResourceName);\r\n\r\n    const [sorter, setSorter] = useState<CrudSorting>(\r\n        setInitialSorters(permanentSorter, defaultSorter ?? []),\r\n    );\r\n    const [filters, setFilters] = useState<CrudFilters>(\r\n        setInitialFilters(permanentFilter, defaultFilter ?? []),\r\n    );\r\n    const [current, setCurrent] = useState<number>(defaultCurrent);\r\n    const [pageSize, setPageSize] = useState<number>(defaultPageSize);\r\n\r\n    const createLinkForSyncWithLocation = ({\r\n        pagination: { current, pageSize },\r\n        sorter,\r\n        filters,\r\n    }: SyncWithLocationParams) => {\r\n        const stringifyParams = stringifyTableParams({\r\n            pagination: {\r\n                pageSize,\r\n                current,\r\n            },\r\n            sorter,\r\n            filters,\r\n        });\r\n        return `${pathname}?${stringifyParams}`;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (search === \"\") {\r\n            setCurrent(defaultCurrent);\r\n            setPageSize(defaultPageSize);\r\n            setSorter(setInitialSorters(permanentSorter, defaultSorter ?? []));\r\n            setFilters(setInitialFilters(permanentFilter, defaultFilter ?? []));\r\n        }\r\n    }, [search]);\r\n\r\n    useEffect(() => {\r\n        if (syncWithLocation) {\r\n            const stringifyParams = stringifyTableParams({\r\n                ...(hasPagination\r\n                    ? {\r\n                          pagination: {\r\n                              pageSize,\r\n                              current,\r\n                          },\r\n                      }\r\n                    : {}),\r\n                sorter: differenceWith(sorter, permanentSorter, isEqual),\r\n                filters: differenceWith(filters, permanentFilter, isEqual),\r\n            });\r\n\r\n            // Careful! This triggers render\r\n            return push(`${pathname}?${stringifyParams}`);\r\n        }\r\n    }, [syncWithLocation, current, pageSize, sorter, filters]);\r\n\r\n    const queryResult = useList<TData, TError>({\r\n        resource: resource.name,\r\n        config: {\r\n            hasPagination,\r\n            pagination: { current, pageSize },\r\n            filters: unionFilters(permanentFilter, filters),\r\n            sort: unionSorters(permanentSorter, sorter),\r\n        },\r\n        queryOptions,\r\n        successNotification,\r\n        errorNotification,\r\n        metaData,\r\n        liveMode,\r\n        liveParams,\r\n        onLiveEvent,\r\n        dataProviderName,\r\n    });\r\n\r\n    const setFiltersAsMerge = (newFilters: CrudFilters) => {\r\n        setFilters((prevFilters) =>\r\n            unionFilters(permanentFilter, newFilters, prevFilters),\r\n        );\r\n    };\r\n\r\n    const setFiltersAsReplace = (newFilters: CrudFilters) => {\r\n        setFilters(unionFilters(permanentFilter, newFilters));\r\n    };\r\n\r\n    const setFiltersWithSetter = (\r\n        setter: (prevFilters: CrudFilters) => CrudFilters,\r\n    ) => {\r\n        setFilters((prev) => unionFilters(permanentFilter, setter(prev)));\r\n    };\r\n\r\n    const setFiltersFn: useTableReturnType<TData>[\"setFilters\"] = (\r\n        setterOrFilters,\r\n        behavior: SetFilterBehavior = defaultSetFilterBehavior,\r\n    ) => {\r\n        if (typeof setterOrFilters === \"function\") {\r\n            setFiltersWithSetter(setterOrFilters);\r\n        } else {\r\n            if (behavior === \"replace\") {\r\n                setFiltersAsReplace(setterOrFilters);\r\n            } else {\r\n                setFiltersAsMerge(setterOrFilters);\r\n            }\r\n        }\r\n    };\r\n\r\n    const setSortWithUnion = (newSorter: CrudSorting) => {\r\n        setSorter(() => unionSorters(permanentSorter, newSorter));\r\n    };\r\n\r\n    const paginationValues = useMemo(() => {\r\n        if (hasPagination) {\r\n            return {\r\n                current,\r\n                setCurrent,\r\n                pageSize,\r\n                setPageSize,\r\n                pageCount: pageSize\r\n                    ? Math.ceil((queryResult.data?.total ?? 0) / pageSize)\r\n                    : 1,\r\n            };\r\n        }\r\n\r\n        return {\r\n            current: undefined,\r\n            setCurrent: undefined,\r\n            pageSize: undefined,\r\n            setPageSize: undefined,\r\n            pageCount: undefined,\r\n        };\r\n    }, [hasPagination, current, pageSize, queryResult.data?.total]);\r\n\r\n    return {\r\n        tableQueryResult: queryResult,\r\n        sorter,\r\n        setSorter: setSortWithUnion,\r\n        filters,\r\n        setFilters: setFiltersFn,\r\n        ...paginationValues,\r\n        createLinkForSyncWithLocation,\r\n    };\r\n}\r\n","import { useContext } from \"react\";\r\nimport { useMutation, UseMutationResult, useQueryClient } from \"react-query\";\r\n\r\nimport { AuditLogContext } from \"@contexts/auditLog\";\r\nimport { ResourceContext } from \"@contexts/resource\";\r\nimport { useGetIdentity } from \"@hooks/auth\";\r\nimport { BaseKey, LogParams } from \"../../../interfaces\";\r\nimport { hasPermission, queryKeys } from \"@definitions/helpers\";\r\n\r\ntype LogRenameData =\r\n    | {\r\n          resource?: string;\r\n      }\r\n    | undefined;\r\n\r\nexport type UseLogReturnType<TLogData, TLogRenameData> = {\r\n    log: UseMutationResult<TLogData, Error, LogParams>;\r\n    rename: UseMutationResult<\r\n        TLogRenameData,\r\n        Error,\r\n        {\r\n            id: BaseKey;\r\n            name: string;\r\n        }\r\n    >;\r\n};\r\n\r\n/**\r\n * useLog is used to `create` a new and `rename` the existing audit log.\r\n * @see {@link https://refine.dev/docs/core/hooks/audit-log/useLog} for more details.\r\n */\r\n\r\nexport const useLog = <\r\n    TLogData,\r\n    TLogRenameData extends LogRenameData = LogRenameData,\r\n>(): UseLogReturnType<TLogData, TLogRenameData> => {\r\n    const queryClient = useQueryClient();\r\n    const auditLogContext = useContext(AuditLogContext);\r\n\r\n    const { resources } = useContext(ResourceContext);\r\n    const {\r\n        data: identityData,\r\n        refetch,\r\n        isLoading,\r\n    } = useGetIdentity({\r\n        queryOptions: {\r\n            enabled: !!auditLogContext,\r\n        },\r\n    });\r\n\r\n    const log = useMutation<TLogData, Error, LogParams, unknown>(\r\n        async (params) => {\r\n            const resource = resources.find((p) => p.name === params.resource);\r\n            const logPermissions = resource?.options?.auditLog?.permissions;\r\n\r\n            if (logPermissions) {\r\n                if (!hasPermission(logPermissions, params.action)) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            let authorData;\r\n            if (isLoading) {\r\n                authorData = await refetch();\r\n            }\r\n\r\n            return await auditLogContext.create?.({\r\n                ...params,\r\n                author: identityData ?? authorData?.data,\r\n            });\r\n        },\r\n    );\r\n\r\n    const rename = useMutation<\r\n        TLogRenameData,\r\n        Error,\r\n        { id: BaseKey; name: string },\r\n        unknown\r\n    >(\r\n        async (params) => {\r\n            return await auditLogContext.update?.(params);\r\n        },\r\n        {\r\n            onSuccess: (data) => {\r\n                if (data?.resource) {\r\n                    const queryKey = queryKeys(data?.resource);\r\n                    queryClient.invalidateQueries(queryKey.logList());\r\n                }\r\n            },\r\n        },\r\n    );\r\n\r\n    return { log, rename };\r\n};\r\n","import React from \"react\";\r\n\r\nimport { IAuditLogContext } from \"./IAuditLogContext\";\r\n\r\nexport const AuditLogContext = React.createContext<IAuditLogContext>({});\r\n\r\nexport const AuditLogContextProvider: React.FC<\r\n    IAuditLogContext & {\r\n        children: React.ReactNode;\r\n    }\r\n> = ({ create, get, update, children }) => {\r\n    return (\r\n        <AuditLogContext.Provider value={{ create, get, update }}>\r\n            {children}\r\n        </AuditLogContext.Provider>\r\n    );\r\n};\r\n","import { useContext } from \"react\";\r\nimport { useQuery, UseQueryResult, UseQueryOptions } from \"react-query\";\r\n\r\nimport { AuditLogContext } from \"@contexts/auditLog\";\r\nimport { queryKeys } from \"@definitions/helpers\";\r\nimport { HttpError, MetaDataQuery } from \"../../../interfaces\";\r\n\r\nexport type UseLogProps<TData, TError> = {\r\n    resource: string;\r\n    action?: string;\r\n    meta?: Record<number | string, any>;\r\n    author?: Record<number | string, any>;\r\n    queryOptions?: UseQueryOptions<TData, TError>;\r\n    metaData?: MetaDataQuery;\r\n};\r\n\r\n/**\r\n * useLogList is used to get and filter audit logs.\r\n * @see {@link https://refine.dev/docs/core/hooks/audit-log/useLogList} for more details.\r\n */\r\nexport const useLogList = <TData = any, TError extends HttpError = HttpError>({\r\n    resource,\r\n    action,\r\n    meta,\r\n    author,\r\n    metaData,\r\n    queryOptions,\r\n}: UseLogProps<TData, TError>): UseQueryResult<TData> => {\r\n    const { get } = useContext(AuditLogContext);\r\n\r\n    const queryKey = queryKeys(resource, undefined, metaData);\r\n\r\n    const queryResponse = useQuery<TData, TError>(\r\n        queryKey.logList(meta),\r\n        () =>\r\n            get?.({\r\n                resource,\r\n                action,\r\n                author,\r\n                meta,\r\n                metaData,\r\n            }) ?? Promise.resolve([]),\r\n        {\r\n            enabled: typeof get !== \"undefined\",\r\n            ...queryOptions,\r\n            retry: false,\r\n        },\r\n    );\r\n\r\n    return queryResponse;\r\n};\r\n","import { useCallback } from \"react\";\r\nimport { useQueryClient } from \"react-query\";\r\n\r\nimport { queryKeys } from \"@definitions\";\r\nimport { BaseKey, IQueryKeys } from \"../../interfaces\";\r\n\r\nexport type UseInvalidateProp = {\r\n    resource?: string;\r\n    id?: BaseKey;\r\n    dataProviderName?: string;\r\n    invalidates: Array<keyof IQueryKeys> | false;\r\n};\r\n\r\nexport const useInvalidate = (): ((props: UseInvalidateProp) => void) => {\r\n    const queryClient = useQueryClient();\r\n\r\n    const invalidate = useCallback(\r\n        ({\r\n            resource,\r\n            dataProviderName,\r\n            invalidates,\r\n            id,\r\n        }: UseInvalidateProp) => {\r\n            if (invalidates === false) {\r\n                return;\r\n            }\r\n            const queryKey = queryKeys(resource, dataProviderName);\r\n\r\n            invalidates.forEach((key) => {\r\n                switch (key) {\r\n                    case \"all\":\r\n                        queryClient.invalidateQueries(queryKey.all);\r\n                        break;\r\n                    case \"list\":\r\n                        queryClient.invalidateQueries(queryKey.list());\r\n                        break;\r\n                    case \"many\":\r\n                        queryClient.invalidateQueries(queryKey.many());\r\n                        break;\r\n                    case \"resourceAll\":\r\n                        queryClient.invalidateQueries(queryKey.resourceAll);\r\n                        break;\r\n                    case \"detail\":\r\n                        queryClient.invalidateQueries(\r\n                            queryKey.detail(id || \"\"),\r\n                        );\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        },\r\n        [],\r\n    );\r\n\r\n    return invalidate;\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport humanizeString from \"humanize-string\";\r\nimport warnOnce from \"warn-once\";\r\n\r\nimport { useResource, useRouterContext, useTranslate } from \"@hooks\";\r\nimport { TranslationContext } from \"@contexts/translation\";\r\n\r\nimport { ResourceRouterParams } from \"../../interfaces\";\r\n\r\nexport type BreadcrumbsType = {\r\n    label: string;\r\n    href?: string;\r\n    icon?: React.ReactNode;\r\n};\r\n\r\ntype UseBreadcrumbReturnType = {\r\n    breadcrumbs: BreadcrumbsType[];\r\n};\r\n\r\nexport const useBreadcrumb = (): UseBreadcrumbReturnType => {\r\n    const { useParams } = useRouterContext();\r\n    const { i18nProvider } = useContext(TranslationContext);\r\n\r\n    const translate = useTranslate();\r\n\r\n    const { resources, resource } = useResource();\r\n\r\n    const { action } = useParams<ResourceRouterParams>();\r\n\r\n    const breadcrumbs: BreadcrumbsType[] = [];\r\n\r\n    if (!resource?.name) {\r\n        return { breadcrumbs };\r\n    }\r\n\r\n    const addBreadcrumb = (parentName: string) => {\r\n        const parentResource = resources.find(\r\n            (resource) => resource.name === parentName,\r\n        );\r\n\r\n        if (parentResource) {\r\n            if (parentResource.parentName) {\r\n                addBreadcrumb(parentResource.parentName);\r\n            }\r\n            breadcrumbs.push({\r\n                label:\r\n                    parentResource.label ??\r\n                    translate(\r\n                        `${parentResource.name}.${parentResource.name}`,\r\n                        humanizeString(parentResource.name),\r\n                    ),\r\n\r\n                href: !!parentResource.list\r\n                    ? `/${parentResource.route}`\r\n                    : undefined,\r\n                icon: parentResource.icon,\r\n            });\r\n        }\r\n    };\r\n\r\n    if (resource.parentName) {\r\n        addBreadcrumb(resource.parentName);\r\n    }\r\n\r\n    breadcrumbs.push({\r\n        label:\r\n            resource.label ??\r\n            translate(\r\n                `${resource.name}.${resource.name}`,\r\n                humanizeString(resource.name),\r\n            ),\r\n        href: !!resource.list ? `/${resource.route}` : undefined,\r\n        icon: resource.icon,\r\n    });\r\n\r\n    if (action) {\r\n        const key = `actions.${action}`;\r\n        const actionLabel = translate(key);\r\n        if (typeof i18nProvider !== \"undefined\" && actionLabel === key) {\r\n            warnOnce(\r\n                true,\r\n                `[useBreadcrumb]: Breadcrumb missing translate key for the \"${action}\" action. Please add \"actions.${action}\" key to your translation file.\\nFor more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`,\r\n            );\r\n            breadcrumbs.push({\r\n                label: translate(`buttons.${action}`, humanizeString(action)),\r\n            });\r\n        } else {\r\n            breadcrumbs.push({\r\n                label: translate(key, humanizeString(action)),\r\n            });\r\n        }\r\n    }\r\n\r\n    return {\r\n        breadcrumbs,\r\n    };\r\n};\r\n","import React from \"react\";\r\nimport {\r\n    useRefineContext,\r\n    useTranslate,\r\n    useResource,\r\n    useRouterContext,\r\n} from \"..\";\r\nimport { IMenuItem, ITreeMenu } from \"../../interfaces\";\r\nimport { userFriendlyResourceName, createTreeView } from \"@definitions\";\r\n\r\ntype useMenuReturnType = {\r\n    defaultOpenKeys: string[];\r\n    selectedKey: string;\r\n    menuItems: ITreeMenu[];\r\n};\r\n\r\n/**\r\n * `useMenu` is used to get menu items of the default sidebar.\r\n * These items include a link to dashboard page (if it exists) and links to the user defined resources\r\n * (passed as children to {@link https://refine.dev/docs/core/components/refine-config `<Refine>`}).\r\n * This hook can also be used to build custom menus, which is also used by default sidebar to show menu items.\r\n *\r\n * @see {@link https://refine.dev/docs/core/hooks/ui/useMenu} for more details.\r\n */\r\nexport const useMenu: () => useMenuReturnType = () => {\r\n    const { resources } = useResource();\r\n    const translate = useTranslate();\r\n\r\n    const { useLocation, useParams } = useRouterContext();\r\n    const location = useLocation();\r\n    const params = useParams<{ resource: string }>();\r\n\r\n    const { hasDashboard } = useRefineContext();\r\n\r\n    const selectedKey = React.useMemo(() => {\r\n        let selectedResource = resources.find(\r\n            (el) => location?.pathname === `/${el.route}`,\r\n        );\r\n\r\n        if (!selectedResource) {\r\n            selectedResource = resources.find(\r\n                (el) => params?.resource === (el.route as string),\r\n            );\r\n        }\r\n\r\n        let _selectedKey: string;\r\n        if (selectedResource?.route) {\r\n            _selectedKey = `/${selectedResource?.route}`;\r\n        } else if (location.pathname === \"/\") {\r\n            _selectedKey = \"/\";\r\n        } else {\r\n            _selectedKey = location?.pathname;\r\n        }\r\n        return _selectedKey;\r\n    }, [resources, location, params]);\r\n\r\n    const treeMenuItems: IMenuItem[] = React.useMemo(\r\n        () =>\r\n            resources.map((resource) => {\r\n                const route = `/${resource.route}`;\r\n\r\n                return {\r\n                    ...resource,\r\n                    icon: resource.icon,\r\n                    route: route,\r\n                    key: resource.key ?? route,\r\n                    label:\r\n                        resource.label ??\r\n                        translate(\r\n                            `${resource.name}.${resource.name}`,\r\n                            userFriendlyResourceName(resource.name, \"plural\"),\r\n                        ),\r\n                };\r\n            }),\r\n        [resources, hasDashboard],\r\n    );\r\n    const menuItems: ITreeMenu[] = React.useMemo(\r\n        () => createTreeView(treeMenuItems),\r\n        [treeMenuItems],\r\n    );\r\n\r\n    const crawlNestedKeys = React.useCallback(\r\n        (\r\n            currentKey: string,\r\n            currentResources: typeof resources,\r\n            isParent = false,\r\n        ): string[] => {\r\n            const currentElement = currentResources.find((el) =>\r\n                isParent ? el.name === currentKey : el.route === currentKey,\r\n            );\r\n\r\n            if (currentElement) {\r\n                const keysArray: string[] = [];\r\n\r\n                if (isParent && currentElement.route) {\r\n                    keysArray.unshift(...[currentElement.route]);\r\n                }\r\n\r\n                if (currentElement.parentName) {\r\n                    keysArray.unshift(\r\n                        ...crawlNestedKeys(\r\n                            currentElement.parentName,\r\n                            currentResources,\r\n                            true,\r\n                        ),\r\n                    );\r\n                }\r\n                return keysArray;\r\n            }\r\n\r\n            return [];\r\n        },\r\n        [],\r\n    );\r\n\r\n    const defaultOpenKeys = React.useMemo(\r\n        () => crawlNestedKeys(selectedKey, treeMenuItems),\r\n        [selectedKey, treeMenuItems],\r\n    );\r\n\r\n    const values = React.useMemo(() => {\r\n        const filterMenuItemsByListView = (menus: ITreeMenu[]): ITreeMenu[] => {\r\n            return menus.reduce((menuItem: ITreeMenu[], obj) => {\r\n                if (obj.children.length > 0)\r\n                    return [\r\n                        ...menuItem,\r\n                        {\r\n                            ...obj,\r\n                            children: filterMenuItemsByListView(obj.children),\r\n                        },\r\n                    ];\r\n                else if (typeof obj.list !== \"undefined\")\r\n                    return [...menuItem, obj];\r\n\r\n                return menuItem;\r\n            }, []);\r\n        };\r\n\r\n        return {\r\n            defaultOpenKeys,\r\n            selectedKey,\r\n            menuItems: filterMenuItemsByListView(menuItems),\r\n        };\r\n    }, [defaultOpenKeys, selectedKey, menuItems]);\r\n\r\n    return values;\r\n};\r\n","import React, { useState } from \"react\";\r\n\r\nimport { useLogin, useTranslate } from \"@hooks\";\r\nexport interface ILoginForm {\r\n    username: string;\r\n    password: string;\r\n}\r\n\r\n/**\r\n * **refine** has a default login page form which is served on `/login` route when the `authProvider` configuration is provided.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/components/refine-config#loginpage} for more details.\r\n */\r\nexport const LoginPage: React.FC = () => {\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    const translate = useTranslate();\r\n\r\n    const { mutate: login } = useLogin<ILoginForm>();\r\n\r\n    return (\r\n        <>\r\n            <h1>{translate(\"pages.login.title\", \"Sign in your account\")}</h1>\r\n            <form\r\n                onSubmit={(e) => {\r\n                    e.preventDefault();\r\n                    login({ username, password });\r\n                }}\r\n            >\r\n                <table>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                {translate(\r\n                                    \"pages.login.username\",\r\n                                    undefined,\r\n                                    \"username\",\r\n                                )}\r\n                                :\r\n                            </td>\r\n                            <td>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    size={20}\r\n                                    autoCorrect=\"off\"\r\n                                    spellCheck={false}\r\n                                    autoCapitalize=\"off\"\r\n                                    autoFocus\r\n                                    required\r\n                                    value={username}\r\n                                    onChange={(e) =>\r\n                                        setUsername(e.target.value)\r\n                                    }\r\n                                />\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                {translate(\r\n                                    \"pages.login.password\",\r\n                                    undefined,\r\n                                    \"password\",\r\n                                )}\r\n                                :\r\n                            </td>\r\n                            <td>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    required\r\n                                    size={20}\r\n                                    value={password}\r\n                                    onChange={(e) =>\r\n                                        setPassword(e.target.value)\r\n                                    }\r\n                                />\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <br />\r\n                <input type=\"submit\" value=\"login\" />\r\n            </form>\r\n        </>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\n/**\r\n * **refine** shows a default ready page on root route when no `resources` is passed to the `<Refine>` component as a property.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/components/refine-config#readypage} for more details.\r\n */\r\nexport const ReadyPage: React.FC = () => {\r\n    return (\r\n        <>\r\n            <h1>Welcome on board</h1>\r\n            <p>Your configuration is completed.</p>\r\n            <p>\r\n                Now you can get started by adding your resources to the{\" \"}\r\n                <code>`resources`</code> property of <code>{\"`<Refine>`\"}</code>\r\n            </p>\r\n            <div style={{ display: \"flex\", gap: 8 }}>\r\n                <a href=\"https://refine.dev\" target=\"_blank\" rel=\"noreferrer\">\r\n                    <button>Documentation</button>\r\n                </a>\r\n                <a\r\n                    href=\"https://refine.dev/docs/examples/tutorial\"\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                >\r\n                    <button>Examples</button>\r\n                </a>\r\n                <a\r\n                    href=\"https://discord.gg/refine\"\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                >\r\n                    <button>Community</button>\r\n                </a>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport {\r\n  QueryClientProvider,\r\n  QueryClient,\r\n  QueryCache,\r\n  MutationCache,\r\n  DefaultOptions,\r\n  ReactQueryDevtools,\r\n} from 'react-query';\r\n\r\nimport { AuthContextProvider } from '@contexts/auth';\r\nimport { DataContextProvider } from '@contexts/data';\r\nimport { LiveContextProvider } from '@contexts/live';\r\nimport { TranslationContextProvider } from '@contexts/translation';\r\nimport { ResourceContextProvider, IResourceItem } from '@contexts/resource';\r\nimport { RefineContextProvider } from '@contexts/refine';\r\nimport { UndoableQueueContextProvider } from '@contexts/undoableQueue';\r\nimport { UnsavedWarnContextProvider } from '@contexts/unsavedWarn';\r\nimport { RouterContextProvider } from '@contexts/router';\r\nimport { AccessControlContextProvider } from '@contexts/accessControl';\r\nimport { NotificationContextProvider } from '@contexts/notification';\r\nimport { AuditLogContextProvider } from '@contexts/auditLog';\r\nimport { ReadyPage as DefaultReadyPage, RouteChangeHandler } from '@components';\r\nimport { routeGenerator } from '@definitions';\r\nimport { Telemetry } from '@components/telemetry';\r\n\r\nimport {\r\n  MutationMode,\r\n  IDataContextProvider,\r\n  I18nProvider,\r\n  LayoutProps,\r\n  TitleProps,\r\n  IRouterProvider,\r\n  ResourceProps,\r\n  ILiveContext,\r\n  LiveModeProps,\r\n  IDataMultipleContextProvider,\r\n  AuthProvider,\r\n  NotificationProvider,\r\n  AccessControlProvider,\r\n  AuditLogProvider,\r\n} from '../../../interfaces';\r\n\r\ninterface QueryClientConfig {\r\n  queryCache?: QueryCache;\r\n  mutationCache?: MutationCache;\r\n  defaultOptions?: DefaultOptions;\r\n}\r\nexport interface RefineProps {\r\n  authProvider?: AuthProvider;\r\n  dataProvider: IDataContextProvider | IDataMultipleContextProvider;\r\n  liveProvider?: ILiveContext;\r\n  routerProvider: IRouterProvider;\r\n  notificationProvider?: NotificationProvider | (() => NotificationProvider);\r\n  accessControlProvider?: AccessControlProvider;\r\n  auditLogProvider?: AuditLogProvider;\r\n  resources?: ResourceProps[];\r\n  i18nProvider?: I18nProvider;\r\n  catchAll?: React.ReactNode;\r\n  LoginPage?: React.FC;\r\n  DashboardPage?: React.FC;\r\n  ReadyPage?: React.FC;\r\n  mutationMode?: MutationMode;\r\n  syncWithLocation?: boolean;\r\n  warnWhenUnsavedChanges?: boolean;\r\n  undoableTimeout?: number;\r\n  Layout?: React.FC<LayoutProps>;\r\n  Sider?: React.FC;\r\n  Header?: React.FC;\r\n  Footer?: React.FC;\r\n  OffLayoutArea?: React.FC;\r\n  Title?: React.FC<TitleProps>;\r\n  reactQueryClientConfig?: QueryClientConfig;\r\n  reactQueryDevtoolConfig?: any;\r\n  liveMode?: LiveModeProps['liveMode'];\r\n  onLiveEvent?: LiveModeProps['onLiveEvent'];\r\n  children?: React.ReactNode;\r\n  disableTelemetry?: boolean;\r\n}\r\n\r\n/**\r\n * {@link https://refine.dev/docs/api-references/components/refine-config `<Refine> component`} is the entry point of a refine app.\r\n * It is where the highest level of configuration of the app occurs.\r\n * Only a dataProvider is required to bootstrap the app. After adding a dataProvider, resources can be added as property.\r\n *\r\n * @see {@link https://refine.dev/docs/api-references/components/refine-config} for more details.\r\n */\r\nexport const Refine: React.FC<RefineProps> = ({\r\n  authProvider,\r\n  dataProvider,\r\n  routerProvider,\r\n  notificationProvider,\r\n  accessControlProvider,\r\n  auditLogProvider,\r\n  resources: resourcesFromProps,\r\n  DashboardPage,\r\n  ReadyPage,\r\n  LoginPage,\r\n  catchAll,\r\n  children,\r\n  liveProvider,\r\n  i18nProvider,\r\n  mutationMode = 'pessimistic',\r\n  syncWithLocation = false,\r\n  warnWhenUnsavedChanges = false,\r\n  undoableTimeout = 5000,\r\n  Title,\r\n  Layout,\r\n  Sider,\r\n  Header,\r\n  Footer,\r\n  OffLayoutArea,\r\n  reactQueryClientConfig,\r\n  reactQueryDevtoolConfig,\r\n  liveMode,\r\n  onLiveEvent,\r\n  disableTelemetry = false,\r\n}) => {\r\n  const queryClient = new QueryClient({\r\n    ...reactQueryClientConfig,\r\n    defaultOptions: {\r\n      ...reactQueryClientConfig?.defaultOptions,\r\n      queries: {\r\n        refetchOnWindowFocus: false,\r\n        keepPreviousData: true,\r\n        ...reactQueryClientConfig?.defaultOptions?.queries,\r\n      },\r\n    },\r\n  });\r\n\r\n  const notificationProviderContextValues =\r\n    typeof notificationProvider === 'function'\r\n      ? notificationProvider()\r\n      : notificationProvider ?? {};\r\n\r\n  const resources: IResourceItem[] = [];\r\n\r\n  resourcesFromProps?.map((resource) => {\r\n    resources.push({\r\n      key: resource.key,\r\n      name: resource.name,\r\n      label: resource.options?.label,\r\n      icon: resource.icon,\r\n      route:\r\n        resource.options?.route ?? routeGenerator(resource, resourcesFromProps),\r\n      canCreate: !!resource.create,\r\n      canEdit: !!resource.edit,\r\n      canShow: !!resource.show,\r\n      canDelete: resource.canDelete,\r\n      create: resource.create,\r\n      show: resource.show,\r\n      list: resource.list,\r\n      edit: resource.edit,\r\n      options: resource.options,\r\n      parentName: resource.parentName,\r\n    });\r\n  });\r\n\r\n  if (resources.length === 0) {\r\n    return ReadyPage ? <ReadyPage /> : <DefaultReadyPage />;\r\n  }\r\n\r\n  const { RouterComponent = React.Fragment } = routerProvider;\r\n\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <NotificationContextProvider {...notificationProviderContextValues}>\r\n        <AuthContextProvider\r\n          {...(authProvider ?? {})}\r\n          isProvided={Boolean(authProvider)}>\r\n          <DataContextProvider {...dataProvider}>\r\n            <LiveContextProvider liveProvider={liveProvider}>\r\n              <RouterContextProvider {...routerProvider}>\r\n                <ResourceContextProvider resources={resources}>\r\n                  <TranslationContextProvider i18nProvider={i18nProvider}>\r\n                    <AccessControlContextProvider\r\n                      {...(accessControlProvider ?? {})}>\r\n                      <AuditLogContextProvider {...(auditLogProvider ?? {})}>\r\n                        <UndoableQueueContextProvider>\r\n                          <RefineContextProvider\r\n                            mutationMode={mutationMode}\r\n                            warnWhenUnsavedChanges={warnWhenUnsavedChanges}\r\n                            syncWithLocation={syncWithLocation}\r\n                            Title={Title}\r\n                            undoableTimeout={undoableTimeout}\r\n                            catchAll={catchAll}\r\n                            DashboardPage={DashboardPage}\r\n                            LoginPage={LoginPage}\r\n                            Layout={Layout}\r\n                            Sider={Sider}\r\n                            Footer={Footer}\r\n                            Header={Header}\r\n                            OffLayoutArea={OffLayoutArea}\r\n                            hasDashboard={!!DashboardPage}\r\n                            liveMode={liveMode}\r\n                            onLiveEvent={onLiveEvent}>\r\n                            <UnsavedWarnContextProvider>\r\n                              <RouterComponent>\r\n                                {children}\r\n                                {!disableTelemetry && <Telemetry />}\r\n                                <RouteChangeHandler />\r\n                              </RouterComponent>\r\n                            </UnsavedWarnContextProvider>\r\n                          </RefineContextProvider>\r\n                        </UndoableQueueContextProvider>\r\n                      </AuditLogContextProvider>\r\n                    </AccessControlContextProvider>\r\n                  </TranslationContextProvider>\r\n                </ResourceContextProvider>\r\n              </RouterContextProvider>\r\n            </LiveContextProvider>\r\n          </DataContextProvider>\r\n        </AuthContextProvider>\r\n      </NotificationContextProvider>\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { CompactEncrypt, importJWK } from \"jose\";\r\n\r\nimport { useTelemetryData } from \"@hooks/useTelemetryData\";\r\n\r\nconst PUBLIC_KEY = {\r\n    kty: \"RSA\",\r\n    e: \"AQAB\",\r\n    use: \"enc\",\r\n    alg: \"RSA-OAEP-256\",\r\n    n: \"glC_mSwk1VqaofnOPXK3HEC5njb4uHZM5_shFdQLRn_898dxVUMK7HkyOgoVOtEsNxDBjwK_KPbSEYX_lyfrJ6ONjnxPJ2_d0W_1ZwdwT_gr5ofFLz5Bm7WbVHcKDK1j5iMYsqUJbFVQ-KXzAswae2iiqzCBKLD4y-fLsIvOUGZliERMMi54hRPqVj6p0xhJEvH22jZ5rk48KJBNvjBBuLes1qk5cehirDHnh07A8Alr3Pe6Qk7xpyC_mUvMqX99JvYThyvjQMMPEXHLJY9m1g-sgHJPlMkxMoLUd5JI1v6QMLezhq2F-bNXiRgXJgT0ew3g-H_PKpWmMQmSRtgiEw\",\r\n};\r\n\r\nexport const Telemetry: React.FC<{}> = () => {\r\n    const payload = useTelemetryData();\r\n\r\n    useEffect(() => {\r\n        if (typeof window === \"undefined\") {\r\n            return;\r\n        }\r\n\r\n        (async () => {\r\n            const jwk = await importJWK(PUBLIC_KEY);\r\n\r\n            const encryptedPayload = await new CompactEncrypt(\r\n                new TextEncoder().encode(JSON.stringify(payload)),\r\n            )\r\n                .setProtectedHeader({ alg: \"RSA-OAEP-256\", enc: \"A256GCM\" })\r\n                .encrypt(jwk);\r\n\r\n            fetch(\"https://telemetry.refine.dev/send\", {\r\n                headers: {\r\n                    Accept: \"application/text\",\r\n                    \"Content-Type\": \"application/text\",\r\n                },\r\n                method: \"POST\",\r\n                body: encryptedPayload,\r\n            });\r\n        })();\r\n    }, []);\r\n\r\n    return null;\r\n};\r\n","import { useContext } from \"react\";\r\n\r\nimport { AuthContext } from \"@contexts/auth\";\r\nimport { AuditLogContext } from \"@contexts/auditLog\";\r\nimport { LiveContext } from \"@contexts/live\";\r\nimport { RouterContext } from \"@contexts/router\";\r\nimport { DataContext } from \"@contexts/data\";\r\nimport { TranslationContext } from \"@contexts/translation\";\r\nimport { NotificationContext } from \"@contexts/notification\";\r\nimport { AccessControlContext } from \"@contexts/accessControl\";\r\nimport { useResource } from \"@hooks/resource\";\r\n\r\nimport { ITelemetryData } from \"../../interfaces/telementry\";\r\n\r\n// It reads and updates from package.json during build. ref: tsup.config.ts\r\nconst REFINE_VERSION = \"3.54.1\";\r\n\r\nexport const useTelemetryData = (): ITelemetryData => {\r\n    const authContext = useContext(AuthContext);\r\n    const auditLogContext = useContext(AuditLogContext);\r\n    const liveContext = useContext(LiveContext);\r\n    const routerContext = useContext(RouterContext);\r\n    const dataContext = useContext(DataContext);\r\n    const { i18nProvider } = useContext(TranslationContext);\r\n    const notificationContext = useContext(NotificationContext);\r\n    const accessControlContext = useContext(AccessControlContext);\r\n    const { resources } = useResource();\r\n\r\n    const auth = authContext.isProvided;\r\n\r\n    const auditLog =\r\n        !!auditLogContext.create ||\r\n        !!auditLogContext.get ||\r\n        !!auditLogContext.update;\r\n\r\n    const live =\r\n        !!liveContext?.publish ||\r\n        !!liveContext?.subscribe ||\r\n        !!liveContext?.unsubscribe;\r\n\r\n    const router =\r\n        !!routerContext.useHistory ||\r\n        !!routerContext.Link ||\r\n        !!routerContext.Prompt ||\r\n        !!routerContext.useLocation ||\r\n        !!routerContext.useParams;\r\n\r\n    const data = !!dataContext;\r\n\r\n    const i18n =\r\n        !!i18nProvider?.changeLocale ||\r\n        !!i18nProvider?.getLocale ||\r\n        !!i18nProvider?.translate;\r\n\r\n    const notification =\r\n        !!notificationContext.close || !!notificationContext.open;\r\n\r\n    const accessControl = !!accessControlContext.can;\r\n\r\n    return {\r\n        providers: {\r\n            auth,\r\n            auditLog,\r\n            live,\r\n            router,\r\n            data,\r\n            i18n,\r\n            notification,\r\n            accessControl,\r\n        },\r\n        version: REFINE_VERSION,\r\n        resourceCount: resources.length,\r\n    };\r\n};\r\n","import React, { useEffect } from \"react\";\r\n\r\nimport { ActionTypes } from \"@contexts/undoableQueue\";\r\nimport { useCancelNotification, useNotification, useTranslate } from \"@hooks\";\r\nimport { IUndoableQueue } from \"../../interfaces\";\r\n\r\nimport { userFriendlySecond } from \"@definitions/helpers\";\r\n\r\nexport const UndoableQueue: React.FC<{\r\n    notifications: IUndoableQueue[];\r\n}> = ({ notifications }) => {\r\n    const translate = useTranslate();\r\n\r\n    const { notificationDispatch } = useCancelNotification();\r\n    const { open } = useNotification();\r\n\r\n    const cancelNotification = () => {\r\n        notifications.forEach((notificationItem: IUndoableQueue) => {\r\n            if (notificationItem.isRunning === true) {\r\n                if (notificationItem.seconds === 0) {\r\n                    notificationItem.doMutation();\r\n                }\r\n                if (!notificationItem.isSilent) {\r\n                    open?.({\r\n                        key: `${notificationItem.id}-${notificationItem.resource}-notification`,\r\n                        type: \"progress\",\r\n                        message: translate(\r\n                            \"notifications.undoable\",\r\n                            {\r\n                                seconds: userFriendlySecond(\r\n                                    notificationItem.seconds,\r\n                                ),\r\n                            },\r\n                            `You have ${userFriendlySecond(\r\n                                notificationItem.seconds,\r\n                            )} seconds to undo`,\r\n                        ),\r\n                        cancelMutation: notificationItem.cancelMutation,\r\n                        undoableTimeout: userFriendlySecond(\r\n                            notificationItem.seconds,\r\n                        ),\r\n                    });\r\n                }\r\n\r\n                if (notificationItem.seconds > 0) {\r\n                    setTimeout(() => {\r\n                        notificationDispatch({\r\n                            type: ActionTypes.DECREASE_NOTIFICATION_SECOND,\r\n                            payload: {\r\n                                id: notificationItem.id,\r\n                                seconds: notificationItem.seconds,\r\n                                resource: notificationItem.resource,\r\n                            },\r\n                        });\r\n                    }, 1000);\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        cancelNotification();\r\n    }, [notifications]);\r\n\r\n    return null;\r\n};\r\n","import React, { useEffect } from \"react\";\r\n\r\nimport {\r\n    useRefineContext,\r\n    useRouterContext,\r\n    useTranslate,\r\n    useWarnAboutChange,\r\n} from \"@hooks\";\r\nimport { LayoutProps, TitleProps } from \"../../interfaces\";\r\n\r\nexport interface LayoutWrapperProps {\r\n    Layout?: React.FC<LayoutProps>;\r\n    Sider?: React.FC;\r\n    Header?: React.FC;\r\n    Title?: React.FC<TitleProps>;\r\n    Footer?: React.FC;\r\n    OffLayoutArea?: React.FC;\r\n    children: React.ReactNode;\r\n}\r\n\r\n/**\r\n * `<LayoutWrapper>` wraps its contents in **refine's** layout with all customizations made in {@link https://refine.dev/docs/core/components/refine-config `<Refine>`} component.\r\n * It is the default layout used in resource pages.\r\n * It can be used in custom pages to use global layout.\r\n *\r\n * @see {@link https://refine.dev/docs/core/components/layout-wrapper} for more details.\r\n */\r\nexport const LayoutWrapper: React.FC<LayoutWrapperProps> = ({\r\n    children,\r\n    Layout: LayoutFromProps,\r\n    Sider: SiderFromProps,\r\n    Header: HeaderFromProps,\r\n    Title: TitleFromProps,\r\n    Footer: FooterFromProps,\r\n    OffLayoutArea: OffLayoutAreaFromProps,\r\n}) => {\r\n    const { Layout, Footer, Header, Sider, Title, OffLayoutArea } =\r\n        useRefineContext();\r\n\r\n    const LayoutToRender = LayoutFromProps ?? Layout;\r\n\r\n    return (\r\n        <LayoutToRender\r\n            Sider={SiderFromProps ?? Sider}\r\n            Header={HeaderFromProps ?? Header}\r\n            Footer={FooterFromProps ?? Footer}\r\n            Title={TitleFromProps ?? Title}\r\n            OffLayoutArea={OffLayoutAreaFromProps ?? OffLayoutArea}\r\n        >\r\n            {children}\r\n            <UnsavedPrompt />\r\n        </LayoutToRender>\r\n    );\r\n};\r\n\r\nconst UnsavedPrompt: React.FC = () => {\r\n    const { Prompt } = useRouterContext();\r\n\r\n    const translate = useTranslate();\r\n\r\n    const { warnWhen, setWarnWhen } = useWarnAboutChange();\r\n\r\n    const warnWhenListener = (e: {\r\n        preventDefault: () => void;\r\n        returnValue: string;\r\n    }) => {\r\n        e.preventDefault();\r\n\r\n        e.returnValue = translate(\r\n            \"warnWhenUnsavedChanges\",\r\n            \"Are you sure you want to leave? You have unsaved changes.\",\r\n        );\r\n\r\n        return e.returnValue;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (warnWhen) {\r\n            window.addEventListener(\"beforeunload\", warnWhenListener);\r\n        }\r\n\r\n        return window.removeEventListener(\"beforeunload\", warnWhenListener);\r\n    }, [warnWhen]);\r\n\r\n    return (\r\n        <Prompt\r\n            when={warnWhen}\r\n            message={translate(\r\n                \"warnWhenUnsavedChanges\",\r\n                \"Are you sure you want to leave? You have unsaved changes.\",\r\n            )}\r\n            setWarnWhen={setWarnWhen}\r\n        />\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\nimport { useAuthenticated, useNavigation, useRouterContext } from \"@hooks\";\r\n\r\nexport type AuthenticatedProps = {\r\n    fallback?: React.ReactNode;\r\n    loading?: React.ReactNode;\r\n    children: React.ReactNode;\r\n};\r\n\r\n/**\r\n * `<Authenticated>` is the component form of {@link https://refine.dev/docs/core/hooks/auth/useAuthenticated `useAuthenticated`}. It internally uses `useAuthenticated` to provide it's functionality.\r\n *\r\n * @see {@link https://refine.dev/docs/core/components/auth/authenticated `<Authenticated>`} component for more details.\r\n */\r\nexport const Authenticated: React.FC<AuthenticatedProps> = ({\r\n    children,\r\n    fallback,\r\n    loading,\r\n}) => {\r\n    const { isSuccess, isLoading, isError } = useAuthenticated();\r\n\r\n    const { replace } = useNavigation();\r\n    const { useLocation } = useRouterContext();\r\n    const { pathname, search } = useLocation();\r\n\r\n    if (isLoading) {\r\n        return <>{loading}</> || null;\r\n    }\r\n    if (isError) {\r\n        if (!fallback) {\r\n            const toURL = `${pathname}${search}`;\r\n            if (!pathname.includes(\"/login\")) {\r\n                replace(`/login?to=${encodeURIComponent(toURL)}`);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        return <>{fallback}</>;\r\n    }\r\n\r\n    if (isSuccess) {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    return null;\r\n};\r\n","import { useContext, useEffect } from \"react\";\r\nimport { AuthContext } from \"@contexts/auth\";\r\nimport { useRouterContext } from \"@hooks\";\r\n\r\nimport { IAuthContext } from \"../../interfaces\";\r\n\r\nexport const RouteChangeHandler: React.FC = () => {\r\n    const { useLocation } = useRouterContext();\r\n\r\n    const { checkAuth } = useContext<IAuthContext>(AuthContext);\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        checkAuth?.().catch(() => false);\r\n    }, [location?.pathname]);\r\n\r\n    return null;\r\n};\r\n","import React from \"react\";\r\n\r\nimport { useCan } from \"@hooks\";\r\nimport { CanParams } from \"../../interfaces\";\r\n\r\nexport type CanAccessProps = CanParams & {\r\n    fallback?: React.ReactNode;\r\n    children: React.ReactNode;\r\n};\r\n\r\nexport const CanAccess: React.FC<CanAccessProps> = ({\r\n    resource,\r\n    action,\r\n    params,\r\n    fallback,\r\n    children,\r\n    ...rest\r\n}) => {\r\n    const { data } = useCan({\r\n        resource,\r\n        action,\r\n        params,\r\n    });\r\n\r\n    if (data?.can) {\r\n        if (React.isValidElement(children)) {\r\n            const Children = React.cloneElement(children, rest);\r\n            return Children;\r\n        }\r\n\r\n        return <>{children}</>;\r\n    }\r\n\r\n    if (data?.can === false) {\r\n        return <>{fallback ?? null}</>;\r\n    }\r\n\r\n    return null;\r\n};\r\n"],"mappings":"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","names":["React","useEffect","useState","React","useQuery","React","useQuery","React","React","React","useMutation","React","useMutation","useContext","useQuery","useContext","useQuery","React","useMutation","React","useMutation","useContext","useContext","useQuery","useQuery","useQuery","qs","filter","useQuery","useQuery","useQuery","useMutation","useQueryClient","React","React","pluralize","useQueryClient","useMutation","pluralize","_a","useMutation","pluralize","useMutation","pluralize","useQueryClient","useMutation","pluralize","useQueryClient","useMutation","pluralize","useMutation","pluralize","useMutation","useMutation","useQueryClient","pluralize","useQueryClient","useMutation","pluralize","useQueryClient","useMutation","pluralize","useQueryClient","useMutation","pluralize","useQuery","useQuery","useMutation","useMutation","useContext","React","useContext","useContext","useEffect","useQueryClient","React","React","React","React","LoginPage","useQueryClient","useContext","useEffect","useContext","useContext","useContext","useEffect","useContext","useEffect","useContext","useContext","useContext","React","useContext","useContext","useCallback","useContext","useCallback","useContext","useContext","useContext","React","React","useContext","useCallback","useCallback","useCallback","useContext","React","React","useContext","useCallback","useContext","useContext","useContext","useCallback","useContext","useCallback","useContext","useContext","useContext","React","useState","useContext","useContext","useContext","useContext","useContext","useContext","LoginPage","useContext","useState","useState","React","React","id","_a","redirect","useCallback","useCallback","useState","useState","useEffect","useState","useState","useEffect","data","response","useCallback","useState","useContext","React","useContext","useContext","useQuery","React","React","useContext","useQuery","useContext","useContext","useMemo","useState","useState","useMemo","useMemo","useState","useEffect","differenceWith","useState","current","pageSize","sorter","filters","useEffect","differenceWith","useMemo","_a","useContext","useMutation","useQueryClient","React","useQueryClient","useContext","useMutation","useContext","useQuery","useContext","useQuery","useCallback","useQueryClient","useQueryClient","useCallback","useContext","humanizeString","useContext","_a","resource","humanizeString","React","React","useState","useEffect","React","React","useState","useState","React","React","React","useEffect","useContext","useContext","useEffect","ReadyPage","LoginPage","_a","React","useEffect","useEffect","React","useEffect","React","useEffect","React","React","useContext","useEffect","useContext","useEffect","React","React"]}